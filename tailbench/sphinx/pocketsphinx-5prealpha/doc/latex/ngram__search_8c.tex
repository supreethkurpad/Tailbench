\section{src/libpocketsphinx/ngram\+\_\+search.c File Reference}
\label{ngram__search_8c}\index{src/libpocketsphinx/ngram\+\_\+search.\+c@{src/libpocketsphinx/ngram\+\_\+search.\+c}}


N-\/\+Gram based multi-\/pass search (\char`\"{}\+F\+B\+S\char`\"{})  


{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$assert.\+h$>$}\newline
{\ttfamily \#include $<$sphinxbase/ckd\+\_\+alloc.\+h$>$}\newline
{\ttfamily \#include $<$sphinxbase/listelem\+\_\+alloc.\+h$>$}\newline
{\ttfamily \#include $<$sphinxbase/err.\+h$>$}\newline
{\ttfamily \#include \char`\"{}pocketsphinx\+\_\+internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ps\+\_\+lattice\+\_\+internal.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ngram\+\_\+search.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ngram\+\_\+search\+\_\+fwdtree.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ngram\+\_\+search\+\_\+fwdflat.\+h\char`\"{}}\newline
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{ngram__search_8c_af9ad6b3d4ef3ad501da8e2296b25a131}} 
\#define {\bfseries N\+G\+R\+A\+M\+\_\+\+H\+I\+S\+T\+O\+R\+Y\+\_\+\+L\+O\+N\+G\+\_\+\+W\+O\+RD}~2000 /$\ast$ 20s $\ast$/
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\label{ngram__search_8c_a04f80b377c847026254fb85596e2f43c}} 
\textbf{ ps\+\_\+search\+\_\+t} $\ast$ \textbf{ ngram\+\_\+search\+\_\+init} (const char $\ast$name, ngram\+\_\+model\+\_\+t $\ast$lm, cmd\+\_\+ln\+\_\+t $\ast$config, \textbf{ acmod\+\_\+t} $\ast$acmod, \textbf{ dict\+\_\+t} $\ast$dict, \textbf{ dict2pid\+\_\+t} $\ast$d2p)
\begin{DoxyCompactList}\small\item\em Initialize the N-\/\+Gram search module. \end{DoxyCompactList}\item 
\mbox{\label{ngram__search_8c_aeaf140dc2bbeaa5c274f73480b5328f3}} 
void \textbf{ ngram\+\_\+search\+\_\+free} (\textbf{ ps\+\_\+search\+\_\+t} $\ast$search)
\begin{DoxyCompactList}\small\item\em Finalize the N-\/\+Gram search module. \end{DoxyCompactList}\item 
int \textbf{ ngram\+\_\+search\+\_\+mark\+\_\+bptable} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, int frame\+\_\+idx)
\begin{DoxyCompactList}\small\item\em Record the current frame\textquotesingle{}s index in the backpointer table. \end{DoxyCompactList}\item 
\mbox{\label{ngram__search_8c_ae36649be6f5a2190e759e7ed13bd7b6b}} 
void \textbf{ ngram\+\_\+search\+\_\+save\+\_\+bp} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, int frame\+\_\+idx, int32 w, int32 score, int32 path, int32 rc)
\begin{DoxyCompactList}\small\item\em Enter a word in the backpointer table. \end{DoxyCompactList}\item 
int \textbf{ ngram\+\_\+search\+\_\+find\+\_\+exit} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, int frame\+\_\+idx, int32 $\ast$out\+\_\+best\+\_\+score, int32 $\ast$out\+\_\+is\+\_\+final)
\begin{DoxyCompactList}\small\item\em Find the best word exit for the current frame in the backpointer table. \end{DoxyCompactList}\item 
char const  $\ast$ \textbf{ ngram\+\_\+search\+\_\+bp\+\_\+hyp} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, int bpidx)
\begin{DoxyCompactList}\small\item\em Backtrace from a given backpointer index to obtain a word hypothesis. \end{DoxyCompactList}\item 
\mbox{\label{ngram__search_8c_a1ddcc1a9cb3e164ceb2140097ed23a3e}} 
void \textbf{ ngram\+\_\+search\+\_\+alloc\+\_\+all\+\_\+rc} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, int32 w)
\begin{DoxyCompactList}\small\item\em Allocate last phone channels for all possible right contexts for word w. \end{DoxyCompactList}\item 
\mbox{\label{ngram__search_8c_a15477192481dffcb29e9c4167eff6c3c}} 
void \textbf{ ngram\+\_\+search\+\_\+free\+\_\+all\+\_\+rc} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, int32 w)
\begin{DoxyCompactList}\small\item\em Allocate last phone channels for all possible right contexts for word w. \end{DoxyCompactList}\item 
\mbox{\label{ngram__search_8c_a25a80e488425b2bd4e24eb753c9295a5}} 
int32 \textbf{ ngram\+\_\+search\+\_\+exit\+\_\+score} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, \textbf{ bptbl\+\_\+t} $\ast$pbe, int rcphone)
\begin{DoxyCompactList}\small\item\em Get the exit score for a backpointer entry with a given right context. \end{DoxyCompactList}\item 
\mbox{\label{ngram__search_8c_a7526cf720a80052770c5b6f82c93749d}} 
void {\bfseries ngram\+\_\+compute\+\_\+seg\+\_\+score} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs, \textbf{ bptbl\+\_\+t} $\ast$be, float32 lwf, int32 $\ast$out\+\_\+ascr, int32 $\ast$out\+\_\+lscr)
\item 
\mbox{\label{ngram__search_8c_ac10e5308e0a48948b3c21bb4c2d80c1b}} 
void {\bfseries dump\+\_\+bptable} (\textbf{ ngram\+\_\+search\+\_\+t} $\ast$ngs)
\item 
\mbox{\label{ngram__search_8c_ac30e7dec4bbfeee9f5163abf4bbd1014}} 
\textbf{ ps\+\_\+lattice\+\_\+t} $\ast$ \textbf{ ngram\+\_\+search\+\_\+lattice} (\textbf{ ps\+\_\+search\+\_\+t} $\ast$search)
\begin{DoxyCompactList}\small\item\em Construct a word lattice from the current hypothesis. \end{DoxyCompactList}\item 
void \textbf{ ngram\+\_\+search\+\_\+set\+\_\+lm} (ngram\+\_\+model\+\_\+t $\ast$lm)
\begin{DoxyCompactList}\small\item\em Sets the global language model. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
N-\/\+Gram based multi-\/pass search (\char`\"{}\+F\+B\+S\char`\"{}) 



\subsection{Function Documentation}
\mbox{\label{ngram__search_8c_aee393a136f8f7e8b98161e6eed7b1dd9}} 
\index{ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}!ngram\+\_\+search\+\_\+bp\+\_\+hyp@{ngram\+\_\+search\+\_\+bp\+\_\+hyp}}
\index{ngram\+\_\+search\+\_\+bp\+\_\+hyp@{ngram\+\_\+search\+\_\+bp\+\_\+hyp}!ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}}
\subsubsection{ngram\+\_\+search\+\_\+bp\+\_\+hyp()}
{\footnotesize\ttfamily char const$\ast$ ngram\+\_\+search\+\_\+bp\+\_\+hyp (\begin{DoxyParamCaption}\item[{\textbf{ ngram\+\_\+search\+\_\+t} $\ast$}]{ngs,  }\item[{int}]{bpidx }\end{DoxyParamCaption})}



Backtrace from a given backpointer index to obtain a word hypothesis. 

\begin{DoxyReturn}{Returns}
a {\bfseries read-\/only} string with the best hypothesis. 
\end{DoxyReturn}


Definition at line 553 of file ngram\+\_\+search.\+c.

\mbox{\label{ngram__search_8c_ac6a01bb08e7b8d1deb39763a98148cb0}} 
\index{ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}!ngram\+\_\+search\+\_\+find\+\_\+exit@{ngram\+\_\+search\+\_\+find\+\_\+exit}}
\index{ngram\+\_\+search\+\_\+find\+\_\+exit@{ngram\+\_\+search\+\_\+find\+\_\+exit}!ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}}
\subsubsection{ngram\+\_\+search\+\_\+find\+\_\+exit()}
{\footnotesize\ttfamily int ngram\+\_\+search\+\_\+find\+\_\+exit (\begin{DoxyParamCaption}\item[{\textbf{ ngram\+\_\+search\+\_\+t} $\ast$}]{ngs,  }\item[{int}]{frame\+\_\+idx,  }\item[{int32 $\ast$}]{out\+\_\+best\+\_\+score,  }\item[{int32 $\ast$}]{out\+\_\+is\+\_\+final }\end{DoxyParamCaption})}



Find the best word exit for the current frame in the backpointer table. 

\begin{DoxyReturn}{Returns}
the backpointer index of the best word exit. 
\end{DoxyReturn}


Definition at line 506 of file ngram\+\_\+search.\+c.



References ngram\+\_\+search\+\_\+s\+::n\+\_\+frame.

\mbox{\label{ngram__search_8c_a7772e007b7d7fdf437c87aeb08b59c71}} 
\index{ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}!ngram\+\_\+search\+\_\+mark\+\_\+bptable@{ngram\+\_\+search\+\_\+mark\+\_\+bptable}}
\index{ngram\+\_\+search\+\_\+mark\+\_\+bptable@{ngram\+\_\+search\+\_\+mark\+\_\+bptable}!ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}}
\subsubsection{ngram\+\_\+search\+\_\+mark\+\_\+bptable()}
{\footnotesize\ttfamily int ngram\+\_\+search\+\_\+mark\+\_\+bptable (\begin{DoxyParamCaption}\item[{\textbf{ ngram\+\_\+search\+\_\+t} $\ast$}]{ngs,  }\item[{int}]{frame\+\_\+idx }\end{DoxyParamCaption})}



Record the current frame\textquotesingle{}s index in the backpointer table. 

\begin{DoxyReturn}{Returns}
the current backpointer index. 
\end{DoxyReturn}


Definition at line 329 of file ngram\+\_\+search.\+c.



References ngram\+\_\+search\+\_\+s\+::frm\+\_\+wordlist, and ngram\+\_\+search\+\_\+s\+::n\+\_\+frame\+\_\+alloc.

\mbox{\label{ngram__search_8c_a0e681022d3fa0e63da066aad123245e7}} 
\index{ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}!ngram\+\_\+search\+\_\+set\+\_\+lm@{ngram\+\_\+search\+\_\+set\+\_\+lm}}
\index{ngram\+\_\+search\+\_\+set\+\_\+lm@{ngram\+\_\+search\+\_\+set\+\_\+lm}!ngram\+\_\+search.\+c@{ngram\+\_\+search.\+c}}
\subsubsection{ngram\+\_\+search\+\_\+set\+\_\+lm()}
{\footnotesize\ttfamily void ngram\+\_\+search\+\_\+set\+\_\+lm (\begin{DoxyParamCaption}\item[{ngram\+\_\+model\+\_\+t $\ast$}]{lm }\end{DoxyParamCaption})}



Sets the global language model. 

Sets the language model to use if nothing was passed in configuration 

Definition at line 1406 of file ngram\+\_\+search.\+c.

