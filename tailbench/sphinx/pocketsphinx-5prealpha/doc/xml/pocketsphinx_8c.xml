<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.13">
  <compounddef id="pocketsphinx_8c" kind="file" language="C++">
    <compoundname>pocketsphinx.c</compoundname>
    <includes local="no">stdio.h</includes>
    <includes local="no">assert.h</includes>
    <includes local="no">sphinxbase/err.h</includes>
    <includes local="no">sphinxbase/strfuncs.h</includes>
    <includes local="no">sphinxbase/filename.h</includes>
    <includes local="no">sphinxbase/pio.h</includes>
    <includes local="no">sphinxbase/jsgf.h</includes>
    <includes local="no">sphinxbase/hash_table.h</includes>
    <includes refid="cmdln__macro_8h" local="yes">cmdln_macro.h</includes>
    <includes refid="pocketsphinx_8h" local="yes">pocketsphinx.h</includes>
    <includes refid="pocketsphinx__internal_8h" local="yes">pocketsphinx_internal.h</includes>
    <includes refid="ps__lattice__internal_8h" local="yes">ps_lattice_internal.h</includes>
    <includes refid="phone__loop__search_8h" local="yes">phone_loop_search.h</includes>
    <includes refid="kws__search_8h" local="yes">kws_search.h</includes>
    <includes refid="fsg__search__internal_8h" local="yes">fsg_search_internal.h</includes>
    <includes refid="ngram__search_8h" local="yes">ngram_search.h</includes>
    <includes refid="ngram__search__fwdtree_8h" local="yes">ngram_search_fwdtree.h</includes>
    <includes refid="ngram__search__fwdflat_8h" local="yes">ngram_search_fwdflat.h</includes>
    <includes refid="allphone__search_8h" local="yes">allphone_search.h</includes>
    <incdepgraph>
      <node id="1749">
        <label>sphinxbase/jsgf.h</label>
      </node>
      <node id="1760">
        <label>sphinxbase/ngram_model.h</label>
      </node>
      <node id="1750">
        <label>sphinxbase/hash_table.h</label>
      </node>
      <node id="1792">
        <label>allphone_search.h</label>
        <link refid="allphone__search_8h_source"/>
        <childnode refid="1783" relation="include">
        </childnode>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1760" relation="include">
        </childnode>
        <childnode refid="1767" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1787" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
      </node>
      <node id="1742">
        <label>src/libpocketsphinx/pocketsphinx.c</label>
        <link refid="pocketsphinx_8c"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1744" relation="include">
        </childnode>
        <childnode refid="1745" relation="include">
        </childnode>
        <childnode refid="1746" relation="include">
        </childnode>
        <childnode refid="1747" relation="include">
        </childnode>
        <childnode refid="1748" relation="include">
        </childnode>
        <childnode refid="1749" relation="include">
        </childnode>
        <childnode refid="1750" relation="include">
        </childnode>
        <childnode refid="1751" relation="include">
        </childnode>
        <childnode refid="1755" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1780" relation="include">
        </childnode>
        <childnode refid="1781" relation="include">
        </childnode>
        <childnode refid="1782" relation="include">
        </childnode>
        <childnode refid="1785" relation="include">
        </childnode>
        <childnode refid="1789" relation="include">
        </childnode>
        <childnode refid="1790" relation="include">
        </childnode>
        <childnode refid="1791" relation="include">
        </childnode>
        <childnode refid="1792" relation="include">
        </childnode>
      </node>
      <node id="1775">
        <label>dict.h</label>
        <link refid="dict_8h"/>
        <childnode refid="1750" relation="include">
        </childnode>
        <childnode refid="1776" relation="include">
        </childnode>
        <childnode refid="1768" relation="include">
        </childnode>
        <childnode refid="1757" relation="include">
        </childnode>
      </node>
      <node id="1785">
        <label>fsg_search_internal.h</label>
        <link refid="fsg__search__internal_8h_source"/>
        <childnode refid="1783" relation="include">
        </childnode>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1763" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
        <childnode refid="1786" relation="include">
        </childnode>
        <childnode refid="1788" relation="include">
        </childnode>
      </node>
      <node id="1744">
        <label>assert.h</label>
      </node>
      <node id="1776">
        <label>s3types.h</label>
        <link refid="s3types_8h"/>
        <childnode refid="1777" relation="include">
        </childnode>
        <childnode refid="1744" relation="include">
        </childnode>
        <childnode refid="1759" relation="include">
        </childnode>
        <childnode refid="1745" relation="include">
        </childnode>
        <childnode refid="1778" relation="include">
        </childnode>
      </node>
      <node id="1761">
        <label>ps_mllr.h</label>
        <link refid="ps__mllr_8h"/>
        <childnode refid="1759" relation="include">
        </childnode>
        <childnode refid="1760" relation="include">
        </childnode>
        <childnode refid="1757" relation="include">
        </childnode>
      </node>
      <node id="1777">
        <label>float.h</label>
      </node>
      <node id="1758">
        <label>ps_lattice.h</label>
        <link refid="ps__lattice_8h"/>
        <childnode refid="1759" relation="include">
        </childnode>
        <childnode refid="1760" relation="include">
        </childnode>
        <childnode refid="1757" relation="include">
        </childnode>
      </node>
      <node id="1771">
        <label>tmat.h</label>
        <link refid="tmat_8h"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
      </node>
      <node id="1752">
        <label>sphinxbase/cmd_ln.h</label>
      </node>
      <node id="1754">
        <label>sphinxbase/fe.h</label>
      </node>
      <node id="1773">
        <label>sphinxbase/fixpoint.h</label>
      </node>
      <node id="1757">
        <label>pocketsphinx_export.h</label>
        <link refid="pocketsphinx__export_8h_source"/>
      </node>
      <node id="1766">
        <label>acmod.h</label>
        <link refid="acmod_8h"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
        <childnode refid="1754" relation="include">
        </childnode>
        <childnode refid="1753" relation="include">
        </childnode>
        <childnode refid="1767" relation="include">
        </childnode>
        <childnode refid="1745" relation="include">
        </childnode>
        <childnode refid="1759" relation="include">
        </childnode>
        <childnode refid="1761" relation="include">
        </childnode>
        <childnode refid="1768" relation="include">
        </childnode>
        <childnode refid="1771" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
      </node>
      <node id="1747">
        <label>sphinxbase/filename.h</label>
      </node>
      <node id="1769">
        <label>sphinxbase/mmio.h</label>
      </node>
      <node id="1787">
        <label>blkarray_list.h</label>
        <link refid="blkarray__list_8h_source"/>
        <childnode refid="1759" relation="include">
        </childnode>
      </node>
      <node id="1786">
        <label>fsg_history.h</label>
        <link refid="fsg__history_8h_source"/>
        <childnode refid="1759" relation="include">
        </childnode>
        <childnode refid="1763" relation="include">
        </childnode>
        <childnode refid="1787" relation="include">
        </childnode>
        <childnode refid="1788" relation="include">
        </childnode>
        <childnode refid="1775" relation="include">
        </childnode>
      </node>
      <node id="1781">
        <label>phone_loop_search.h</label>
        <link refid="phone__loop__search_8h"/>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
        <childnode refid="1760" relation="include">
        </childnode>
        <childnode refid="1774" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
      </node>
      <node id="1778">
        <label>sphinxbase/ckd_alloc.h</label>
      </node>
      <node id="1774">
        <label>sphinxbase/listelem_alloc.h</label>
      </node>
      <node id="1784">
        <label>kws_detections.h</label>
        <link refid="kws__detections_8h_source"/>
        <childnode refid="1783" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
      </node>
      <node id="1748">
        <label>sphinxbase/pio.h</label>
      </node>
      <node id="1789">
        <label>ngram_search.h</label>
        <link refid="ngram__search_8h"/>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
        <childnode refid="1760" relation="include">
        </childnode>
        <childnode refid="1774" relation="include">
        </childnode>
        <childnode refid="1745" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
      </node>
      <node id="1770">
        <label>mdef.h</label>
        <link refid="mdef_8h"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1750" relation="include">
        </childnode>
      </node>
      <node id="1753">
        <label>sphinxbase/feat.h</label>
      </node>
      <node id="1779">
        <label>dict2pid.h</label>
        <link refid="dict2pid_8h"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
        <childnode refid="1767" relation="include">
        </childnode>
        <childnode refid="1776" relation="include">
        </childnode>
        <childnode refid="1768" relation="include">
        </childnode>
        <childnode refid="1775" relation="include">
        </childnode>
      </node>
      <node id="1759">
        <label>sphinxbase/prim_type.h</label>
      </node>
      <node id="1751">
        <label>cmdln_macro.h</label>
        <link refid="cmdln__macro_8h_source"/>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1753" relation="include">
        </childnode>
        <childnode refid="1754" relation="include">
        </childnode>
      </node>
      <node id="1772">
        <label>hmm.h</label>
        <link refid="hmm_8h"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1773" relation="include">
        </childnode>
        <childnode refid="1774" relation="include">
        </childnode>
        <childnode refid="1768" relation="include">
        </childnode>
      </node>
      <node id="1767">
        <label>sphinxbase/bitvec.h</label>
      </node>
      <node id="1790">
        <label>ngram_search_fwdtree.h</label>
        <link refid="ngram__search__fwdtree_8h"/>
        <childnode refid="1789" relation="include">
        </childnode>
      </node>
      <node id="1746">
        <label>sphinxbase/strfuncs.h</label>
      </node>
      <node id="1755">
        <label>pocketsphinx.h</label>
        <link refid="pocketsphinx_8h"/>
        <childnode refid="1743" relation="include">
        </childnode>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
        <childnode refid="1754" relation="include">
        </childnode>
        <childnode refid="1753" relation="include">
        </childnode>
        <childnode refid="1757" relation="include">
        </childnode>
        <childnode refid="1751" relation="include">
        </childnode>
        <childnode refid="1758" relation="include">
        </childnode>
        <childnode refid="1761" relation="include">
        </childnode>
        <childnode refid="1762" relation="include">
        </childnode>
      </node>
      <node id="1791">
        <label>ngram_search_fwdflat.h</label>
        <link refid="ngram__search__fwdflat_8h"/>
        <childnode refid="1789" relation="include">
        </childnode>
      </node>
      <node id="1782">
        <label>kws_search.h</label>
        <link refid="kws__search_8h_source"/>
        <childnode refid="1783" relation="include">
        </childnode>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1764" relation="include">
        </childnode>
        <childnode refid="1784" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
      </node>
      <node id="1768">
        <label>bin_mdef.h</label>
        <link refid="bin__mdef_8h"/>
        <childnode refid="1769" relation="include">
        </childnode>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1757" relation="include">
        </childnode>
        <childnode refid="1770" relation="include">
        </childnode>
      </node>
      <node id="1762">
        <label>ps_search.h</label>
        <link refid="ps__search_8h"/>
        <childnode refid="1763" relation="include">
        </childnode>
        <childnode refid="1760" relation="include">
        </childnode>
      </node>
      <node id="1764">
        <label>pocketsphinx_internal.h</label>
        <link refid="pocketsphinx__internal_8h"/>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1754" relation="include">
        </childnode>
        <childnode refid="1753" relation="include">
        </childnode>
        <childnode refid="1750" relation="include">
        </childnode>
        <childnode refid="1756" relation="include">
        </childnode>
        <childnode refid="1765" relation="include">
        </childnode>
        <childnode refid="1755" relation="include">
        </childnode>
        <childnode refid="1766" relation="include">
        </childnode>
        <childnode refid="1775" relation="include">
        </childnode>
        <childnode refid="1779" relation="include">
        </childnode>
      </node>
      <node id="1745">
        <label>sphinxbase/err.h</label>
      </node>
      <node id="1788">
        <label>fsg_lextree.h</label>
        <link refid="fsg__lextree_8h_source"/>
        <childnode refid="1752" relation="include">
        </childnode>
        <childnode refid="1763" relation="include">
        </childnode>
        <childnode refid="1772" relation="include">
        </childnode>
        <childnode refid="1775" relation="include">
        </childnode>
        <childnode refid="1779" relation="include">
        </childnode>
      </node>
      <node id="1763">
        <label>sphinxbase/fsg_model.h</label>
      </node>
      <node id="1756">
        <label>sphinxbase/logmath.h</label>
      </node>
      <node id="1765">
        <label>sphinxbase/profile.h</label>
      </node>
      <node id="1743">
        <label>stdio.h</label>
      </node>
      <node id="1783">
        <label>sphinxbase/glist.h</label>
      </node>
      <node id="1780">
        <label>ps_lattice_internal.h</label>
        <link refid="ps__lattice__internal_8h"/>
      </node>
    </incdepgraph>
      <sectiondef kind="var">
      <memberdef kind="variable" id="pocketsphinx_8c_1af556b3496d5767fce748d8c2bf48b878" prot="public" static="yes" mutable="no">
        <type>const arg_t</type>
        <definition>const arg_t ps_args_def[]</definition>
        <argsstring>[]</argsstring>
        <name>ps_args_def</name>
        <initializer>= {
    POCKETSPHINX_OPTIONS,
    CMDLN_EMPTY_OPTION
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="67" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="67" bodyend="-1"/>
      </memberdef>
      <memberdef kind="variable" id="pocketsphinx_8c_1ad77bdbafbb56971896b56a5261f02ae8" prot="public" static="yes" mutable="no">
        <type>const arg_t</type>
        <definition>const arg_t feat_defn[]</definition>
        <argsstring>[]</argsstring>
        <name>feat_defn</name>
        <initializer>= {
    waveform_to_cepstral_command_line_macro(),
    cepstral_to_feature_command_line_macro(),
    CMDLN_EMPTY_OPTION
}</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="109" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="109" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="pocketsphinx_8c_1a5183d8c6fd626cd308586b3324cf1f60" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int file_exists</definition>
        <argsstring>(const char *path)</argsstring>
        <name>file_exists</name>
        <param>
          <type>const char *</type>
          <declname>path</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="74" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="74" bodyend="81"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a48689e39f22568ac23be42c0a6f96687" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void ps_add_file</definition>
        <argsstring>(ps_decoder_t *ps, const char *arg, const char *hmmdir, const char *file)</argsstring>
        <name>ps_add_file</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>arg</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>hmmdir</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>file</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="98" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="98" bodyend="106"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1aee73c05313f929f79ffec0fa8fc5a2b2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void ps_expand_model_config</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_expand_model_config</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="116" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="116" bodyend="152"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a12722df2a8d22aefb3a2386c0007e733" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>static void ps_free_searches</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_free_searches</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="155" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="155" bodyend="168"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a3b069fae5493e17dadb1923390729e5b" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx__internal_8h_1adc3de4d62e46c5e6cb93d09fb61be8ee" kindref="member">ps_search_t</ref> *</type>
        <definition>static ps_search_t* ps_find_search</definition>
        <argsstring>(ps_decoder_t *ps, char const *name)</argsstring>
        <name>ps_find_search</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="171" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="171" bodyend="177"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a3c5ce9b114138d1f85526834e47ef4d3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_default_search_args</definition>
        <argsstring>(cmd_ln_t *config)</argsstring>
        <name>ps_default_search_args</name>
        <param>
          <type>cmd_ln_t *</type>
          <declname>config</declname>
        </param>
        <briefdescription>
<para>Sets default grammar and language model if they are not set explicitly and are present in the default search path. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="180" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="180" bodyend="231"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a23e70ba8b0b9a5823db56ba6cb749018" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_reinit</definition>
        <argsstring>(ps_decoder_t *ps, cmd_ln_t *config)</argsstring>
        <name>ps_reinit</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>cmd_ln_t *</type>
          <declname>config</declname>
        </param>
        <briefdescription>
<para>Reinitialize the decoder with updated configuration. </para>        </briefdescription>
        <detaileddescription>
<para>This function allows you to switch the acoustic model, dictionary, or other configuration without creating an entirely new decoding object.</para><para><simplesect kind="note"><para>The decoder retains ownership of the pointer <computeroutput>config</computeroutput>, so you must not attempt to free it manually. If you wish to reuse it elsewhere, call cmd_ln_retain() on it.</para></simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>config</parametername>
</parameternamelist>
<parameterdescription>
<para>An optional new configuration to use. If this is NULL, the previous configuration will be reloaded, with any changes applied. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 for success, &lt;0 for failure. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="234" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="234" bodyend="401"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1a8bb5ef8791798b8dd9bc82b1ec016663" compoundref="pocketsphinx__internal_8h" startline="224">ps_decoder_s::mfclogdir</references>
        <references refid="structps__decoder__s_1aa2610c52a9267ee18ca095169bf34bfd" compoundref="pocketsphinx__internal_8h" startline="225">ps_decoder_s::rawlogdir</references>
        <references refid="structps__decoder__s_1a0ed3476113fe3d63b13ac5e8da3f3b4f" compoundref="pocketsphinx__internal_8h" startline="226">ps_decoder_s::senlogdir</references>
        <references refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" compoundref="pocketsphinx__internal_8h" startline="213">ps_decoder_s::searches</references>
        <references refid="acmod_8c_1a1e3345e8ef8b060fc04e88f86e6afa4a" compoundref="acmod_8c" startline="301" endline="338">acmod_free</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" compoundref="dict_8c" startline="468" endline="496">dict_free</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" compoundref="dict2pid_8c" startline="507" endline="530">dict2pid_free</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
        <references refid="acmod_8c_1a6f32b623cbc3d15a1e3c5d09aba7dabf" compoundref="acmod_8c" startline="230" endline="298">acmod_init</references>
        <references refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" compoundref="pocketsphinx__internal_8h" startline="217">ps_decoder_s::phone_loop</references>
        <referencedby refid="pocketsphinx_8h_1ad033da98d0f7785d6ab89a41dac3cc7c" compoundref="pocketsphinx_8c" startline="404" endline="420">ps_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ab215b6e42968542a402822cde71d9aaa" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
        <definition>ps_decoder_t* ps_init</definition>
        <argsstring>(cmd_ln_t *config)</argsstring>
        <name>ps_init</name>
        <param>
          <type>cmd_ln_t *</type>
          <declname>config</declname>
        </param>
        <briefdescription>
<para>Initialize the decoder from a configuration object. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="note"><para>The decoder retains ownership of the pointer <computeroutput>config</computeroutput>, so if you are not going to use it elsewere, you can free it.</para></simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>config</parametername>
</parameternamelist>
<parameterdescription>
<para>a command-line structure, as created by cmd_ln_parse_r() or cmd_ln_parse_file_r(). </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="404" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="404" bodyend="420"/>
        <references refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" compoundref="pocketsphinx__internal_8h" startline="204">ps_decoder_s::refcount</references>
        <references refid="pocketsphinx_8h_1a391679e7edb0de1e324aa302ee820287" compoundref="pocketsphinx_8c" startline="234" endline="401">ps_reinit</references>
        <references refid="pocketsphinx_8h_1ad8fd9b79ae9f87703af3f4755b3ab567" compoundref="pocketsphinx_8c" startline="436" endline="450">ps_free</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a2d6f70b6ed3c838138b55d2df1952fe5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>arg_t const  *</type>
        <definition>arg_t const* ps_args</definition>
        <argsstring>(void)</argsstring>
        <name>ps_args</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Returns the argument definitions used in <ref refid="pocketsphinx_8h_1ad033da98d0f7785d6ab89a41dac3cc7c" kindref="member">ps_init()</ref>. </para>        </briefdescription>
        <detaileddescription>
<para>This is here to avoid exporting global data, which is problematic on Win32 and Symbian (and possibly other platforms). </para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="423" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="423" bodyend="426"/>
        <referencedby refid="pocketsphinx_8h_1a824f46e51681d931b7e2706a86c3d86f" compoundref="pocketsphinx_8c" startline="741" endline="794">ps_load_dict</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a5c043fd399b559b2d43ca4c184665c4b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
        <definition>ps_decoder_t* ps_retain</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_retain</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Retain a pointer to the decoder. </para>        </briefdescription>
        <detaileddescription>
<para>This increments the reference count on the decoder, allowing it to be shared between multiple parent objects. In general you will not need to use this function, ever. It is mainly here for the convenience of scripting language bindings.</para><para><simplesect kind="return"><para>pointer to retained decoder. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="429" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="429" bodyend="433"/>
        <references refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" compoundref="pocketsphinx__internal_8h" startline="204">ps_decoder_s::refcount</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1adb379f0f85b222b4baf7ec9b5c436080" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_free</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_free</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Finalize the decoder. </para>        </briefdescription>
        <detaileddescription>
<para>This releases all resources associated with the decoder, including any language models or grammars which have been added to it, and the initial configuration object passed to <ref refid="pocketsphinx_8h_1ad033da98d0f7785d6ab89a41dac3cc7c" kindref="member">ps_init()</ref>.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder to be freed. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>New reference count (0 if freed). </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="436" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="436" bodyend="450"/>
        <references refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" compoundref="pocketsphinx__internal_8h" startline="204">ps_decoder_s::refcount</references>
        <references refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" compoundref="dict_8c" startline="468" endline="496">dict_free</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" compoundref="dict2pid_8c" startline="507" endline="530">dict2pid_free</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <references refid="acmod_8c_1a1e3345e8ef8b060fc04e88f86e6afa4a" compoundref="acmod_8c" startline="301" endline="338">acmod_free</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <referencedby refid="pocketsphinx_8h_1ad033da98d0f7785d6ab89a41dac3cc7c" compoundref="pocketsphinx_8c" startline="404" endline="420">ps_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ab6aad63b86c50383f1aa6d87af40b6b4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>cmd_ln_t *</type>
        <definition>cmd_ln_t* ps_get_config</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_config</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get the configuration object for this decoder. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>The configuration object for this decoder. The decoder retains ownership of this pointer, so you should not attempt to free it manually. Use cmd_ln_retain() if you wish to reuse it elsewhere. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="453" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="453" bodyend="456"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a6e7b20385ad1a13553fc83d571efa67f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>logmath_t *</type>
        <definition>logmath_t* ps_get_logmath</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_logmath</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get the log-math computation object for this decoder. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>The log-math object for this decoder. The decoder retains ownership of this pointer, so you should not attempt to free it manually. Use logmath_retain() if you wish to reuse it elsewhere. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="459" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="459" bodyend="462"/>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a1f704a9a4298c786f5d5432f803b1751" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>fe_t *</type>
        <definition>fe_t* ps_get_fe</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_fe</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get the feature extraction object for this decoder. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>The feature extraction object for this decoder. The decoder retains ownership of this pointer, so you should not attempt to free it manually. Use fe_retain() if you wish to reuse it elsewhere. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="465" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="465" bodyend="468"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a56eaceb9b6a1cbcccd09cf42cfa87231" compoundref="acmod_8h" startline="155">acmod_s::fe</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a3c8a3b4f28a3aec44c73aeaa9e644d7c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>feat_t *</type>
        <definition>feat_t* ps_get_feat</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_feat</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get the dynamic feature computation object for this decoder. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="return"><para>The dynamic feature computation object for this decoder. The decoder retains ownership of this pointer, so you should not attempt to free it manually. Use feat_retain() if you wish to reuse it elsewhere. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="471" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="471" bodyend="474"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a37ec6c2b1f3ada764842e08481239b34" compoundref="acmod_8h" startline="156">acmod_s::fcb</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ad419310c1874a100858269166b421970" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="ps__mllr_8h_1ad4b6bf4c3cb6a671f79f1d709857d5b1" kindref="member">ps_mllr_t</ref> *</type>
        <definition>ps_mllr_t* ps_update_mllr</definition>
        <argsstring>(ps_decoder_t *ps, ps_mllr_t *mllr)</argsstring>
        <name>ps_update_mllr</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type><ref refid="ps__mllr_8h_1ad4b6bf4c3cb6a671f79f1d709857d5b1" kindref="member">ps_mllr_t</ref> *</type>
          <declname>mllr</declname>
        </param>
        <briefdescription>
<para>Adapt current acoustic model using a linear transform. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>mllr</parametername>
</parameternamelist>
<parameterdescription>
<para>The new transform to use, or NULL to update the existing transform. The decoder retains ownership of this pointer, so you should not attempt to free it manually. Use <ref refid="ps__mllr_8h_1a2f40deff6976bf03a845aa474494edfb" kindref="member">ps_mllr_retain()</ref> if you wish to reuse it elsewhere. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The updated transform object for this decoder, or NULL on failure. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="477" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="477" bodyend="480"/>
        <references refid="acmod_8c_1a4205b92d38db562577eafc3c432593ab" compoundref="acmod_8c" startline="341" endline="349">acmod_update_mllr</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ab2971d0b6bc8dea68537740438f0ed21" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_search</definition>
        <argsstring>(ps_decoder_t *ps, const char *name)</argsstring>
        <name>ps_set_search</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
<para>Actives search with the provided name. </para>        </briefdescription>
        <detaileddescription>
<para>Activates search with the provided name. The search must be added before using either <ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg()</ref>, <ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm()</ref> or <ref refid="ps__search_8h_1a0780564ad3f12179b0291ac87774cea1" kindref="member">ps_set_kws()</ref>.</para><para><simplesect kind="return"><para>0 on success, -1 on failure </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="483" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="483" bodyend="498"/>
        <references refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" compoundref="pocketsphinx__internal_8h" startline="216">ps_decoder_s::search</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a4ca490365e059ee7a602bdc9743b8e23" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* ps_get_search</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_search</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Returns name of curent search in decoder. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="501" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="501" bodyend="513"/>
        <references refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" compoundref="pocketsphinx__internal_8h" startline="213">ps_decoder_s::searches</references>
        <references refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" compoundref="pocketsphinx__internal_8h" startline="216">ps_decoder_s::search</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1aaa0207e4843b8ae524856fcc30f0a54a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_unset_search</definition>
        <argsstring>(ps_decoder_t *ps, const char *name)</argsstring>
        <name>ps_unset_search</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
<para>Unsets the search and releases related resources. </para>        </briefdescription>
        <detaileddescription>
<para>Unsets the search previously added with using either <ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg()</ref>, <ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm()</ref> or <ref refid="ps__search_8h_1a0780564ad3f12179b0291ac87774cea1" kindref="member">ps_set_kws()</ref>.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref> </para></simplesect>
<simplesect kind="see"><para><ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm</ref> </para></simplesect>
<simplesect kind="see"><para><ref refid="ps__search_8h_1a0780564ad3f12179b0291ac87774cea1" kindref="member">ps_set_kws</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="516" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="516" bodyend="525"/>
        <references refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" compoundref="pocketsphinx__internal_8h" startline="213">ps_decoder_s::searches</references>
        <references refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" compoundref="pocketsphinx__internal_8h" startline="216">ps_decoder_s::search</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ac9b880a34745190a543318980476c0d0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="ps__search_8h_1ae3fe90e6eb1fa74e30783e20468280c1" kindref="member">ps_search_iter_t</ref> *</type>
        <definition>ps_search_iter_t* ps_search_iter</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_search_iter</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Returns iterator over current searches. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="528" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="528" bodyend="531"/>
        <references refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" compoundref="pocketsphinx__internal_8h" startline="213">ps_decoder_s::searches</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a12cd7764cfd772c0467f26836ed61732" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="ps__search_8h_1ae3fe90e6eb1fa74e30783e20468280c1" kindref="member">ps_search_iter_t</ref> *</type>
        <definition>ps_search_iter_t* ps_search_iter_next</definition>
        <argsstring>(ps_search_iter_t *itor)</argsstring>
        <name>ps_search_iter_next</name>
        <param>
          <type><ref refid="ps__search_8h_1ae3fe90e6eb1fa74e30783e20468280c1" kindref="member">ps_search_iter_t</ref> *</type>
          <declname>itor</declname>
        </param>
        <briefdescription>
<para>Updates search iterator to point to the next position. </para>        </briefdescription>
        <detaileddescription>
<para>This function automatically frees the iterator object upon reaching the final entry. <simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="534" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="534" bodyend="537"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1aeb7bbd9cda65d8aae9dd9b02636b33fd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* ps_search_iter_val</definition>
        <argsstring>(ps_search_iter_t *itor)</argsstring>
        <name>ps_search_iter_val</name>
        <param>
          <type><ref refid="ps__search_8h_1ae3fe90e6eb1fa74e30783e20468280c1" kindref="member">ps_search_iter_t</ref> *</type>
          <declname>itor</declname>
        </param>
        <briefdescription>
<para>Retrieves the name of the search the iterator points to. </para>        </briefdescription>
        <detaileddescription>
<para>Updates search iterator to point to the next position.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref></para></simplesect>
This function automatically frees the iterator object upon reaching the final entry. <simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="540" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="540" bodyend="543"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a8bb4fddfa9b22c012999b614baa929ed" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_search_iter_free</definition>
        <argsstring>(ps_search_iter_t *itor)</argsstring>
        <name>ps_search_iter_free</name>
        <param>
          <type><ref refid="ps__search_8h_1ae3fe90e6eb1fa74e30783e20468280c1" kindref="member">ps_search_iter_t</ref> *</type>
          <declname>itor</declname>
        </param>
        <briefdescription>
<para>Delete an unfinished search iterator. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="546" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="546" bodyend="549"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1accbeea1e5c814ffcd4cb38a4b77e09b7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>ngram_model_t *</type>
        <definition>ngram_model_t* ps_get_lm</definition>
        <argsstring>(ps_decoder_t *ps, const char *name)</argsstring>
        <name>ps_get_lm</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
<para>Get the language model set object for this decoder. </para>        </briefdescription>
        <detaileddescription>
<para>If N-Gram decoding is not enabled, this will return NULL. You will need to enable it using ps_set_lmset().</para><para><simplesect kind="return"><para>The language model set object for this decoder. The decoder retains ownership of this pointer, so you should not attempt to free it manually. Use ngram_model_retain() if you wish to reuse it elsewhere. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="552" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="552" bodyend="558"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1aa041182fca6bcbf3abab7b06c75f859f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>fsg_model_t *</type>
        <definition>fsg_model_t* ps_get_fsg</definition>
        <argsstring>(ps_decoder_t *ps, const char *name)</argsstring>
        <name>ps_get_fsg</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
<para>Get the finite-state grammar set object for this decoder. </para>        </briefdescription>
        <detaileddescription>
<para>If FSG decoding is not enabled, this returns NULL. Call ps_set_fsgset() to enable it.</para><para><simplesect kind="return"><para>The current FSG set object for this decoder, or NULL if none is available. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="561" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="561" bodyend="567"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ae79793914434920f6a47b81a7ef916ee" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>const char *</type>
        <definition>const char* ps_get_kws</definition>
        <argsstring>(ps_decoder_t *ps, const char *name)</argsstring>
        <name>ps_get_kws</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <briefdescription>
<para>Get the current Key phrase to spot. </para>        </briefdescription>
        <detaileddescription>
<para>If KWS is not enabled, this returns NULL. Call ps_update_kws() to enable it.</para><para><simplesect kind="return"><para>The current keyphrase to spot </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="570" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="570" bodyend="576"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1affc11a5546581c60aa16303304bd2ec2" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int set_search_internal</definition>
        <argsstring>(ps_decoder_t *ps, ps_search_t *search)</argsstring>
        <name>set_search_internal</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type><ref refid="pocketsphinx__internal_8h_1adc3de4d62e46c5e6cb93d09fb61be8ee" kindref="member">ps_search_t</ref> *</type>
          <declname>search</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="579" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="579" bodyend="592"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a1bf3797b2c0e82795459d1a4dccf5734" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_lm</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, ngram_model_t *lm)</argsstring>
        <name>ps_set_lm</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>ngram_model_t *</type>
          <declname>lm</declname>
        </param>
        <briefdescription>
<para>Adds new search based on N-gram language model. </para>        </briefdescription>
        <detaileddescription>
<para>Associates N-gram search with the provided name. The search can be activated using <ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search()</ref>.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="595" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="595" bodyend="600"/>
        <references refid="ngram__search_8c_1a04f80b377c847026254fb85596e2f43c" compoundref="ngram__search_8c" startline="140" endline="237">ngram_search_init</references>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <referencedby refid="ps__search_8h_1a78372effd2aa6bddf7b71d6e2e9c3776" compoundref="pocketsphinx_8c" startline="603" endline="615">ps_set_lm_file</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a8471835609583ed16743af715d12d91d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_lm_file</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, const char *path)</argsstring>
        <name>ps_set_lm_file</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>path</declname>
        </param>
        <briefdescription>
<para>Adds new search based on N-gram language model. </para>        </briefdescription>
        <detaileddescription>
<para>Convenient method to load N-gram model and create a search.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="603" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="603" bodyend="615"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
        <references refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" compoundref="pocketsphinx_8c" startline="595" endline="600">ps_set_lm</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1abecb34b3a85fedcb201afeb9212a27e6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_allphone</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, ngram_model_t *lm)</argsstring>
        <name>ps_set_allphone</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>ngram_model_t *</type>
          <declname>lm</declname>
        </param>
        <briefdescription>
<para>Adds new search based on phone N-gram language model. </para>        </briefdescription>
        <detaileddescription>
<para>Associates N-gram search with the provided name. The search can be activated using <ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search()</ref>.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="618" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="618" bodyend="623"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <referencedby refid="ps__search_8h_1a66bebfccb8ece9e7bff411329f25ee5e" compoundref="pocketsphinx_8c" startline="626" endline="638">ps_set_allphone_file</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1aed691fc484da3192f944b7a2f02075db" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_allphone_file</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, const char *path)</argsstring>
        <name>ps_set_allphone_file</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>path</declname>
        </param>
        <briefdescription>
<para>Adds new search based on phone N-gram language model. </para>        </briefdescription>
        <detaileddescription>
<para>Convenient method to load N-gram model and create a search.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1aa38c96913dd3a06cbab54ce834af5141" kindref="member">ps_set_allphone</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="626" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="626" bodyend="638"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
        <references refid="ps__search_8h_1aa38c96913dd3a06cbab54ce834af5141" compoundref="pocketsphinx_8c" startline="618" endline="623">ps_set_allphone</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ab221c8e6e672c90aafafd13d3a17a012" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_kws</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, const char *keyfile)</argsstring>
        <name>ps_set_kws</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>keyfile</declname>
        </param>
        <briefdescription>
<para>Adds keywords from a file to spotting. </para>        </briefdescription>
        <detaileddescription>
<para>Associates KWS search with the provided name. The search can be activated using <ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search()</ref>.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="641" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="641" bodyend="646"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a695a5838a49800cfcb7fdba6b22dbabf" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_keyphrase</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, const char *keyphrase)</argsstring>
        <name>ps_set_keyphrase</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>keyphrase</declname>
        </param>
        <briefdescription>
<para>Adds new keyword to spot. </para>        </briefdescription>
        <detaileddescription>
<para>Associates KWS search with the provided name. The search can be activated using <ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search()</ref>.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="649" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="649" bodyend="654"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1adef292eb3f5656975cd7c98e073c7724" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_fsg</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, fsg_model_t *fsg)</argsstring>
        <name>ps_set_fsg</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>fsg_model_t *</type>
          <declname>fsg</declname>
        </param>
        <briefdescription>
<para>Adds new search based on finite state grammar. </para>        </briefdescription>
        <detaileddescription>
<para>Associates FSG search with the provided name. The search can be activated using <ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search()</ref>.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="657" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="657" bodyend="662"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <referencedby refid="ps__search_8h_1ae845bbf6a3e5b859e833f6cc0d1ba55f" compoundref="pocketsphinx_8c" startline="665" endline="701">ps_set_jsgf_file</referencedby>
        <referencedby refid="ps__search_8h_1a3c51b0eab27ac9df20ee54e1d87b3ca3" compoundref="pocketsphinx_8c" startline="704" endline="737">ps_set_jsgf_string</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a349cfdc9ed80cb88ba433801d1e2c5f6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_jsgf_file</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, const char *path)</argsstring>
        <name>ps_set_jsgf_file</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>path</declname>
        </param>
        <briefdescription>
<para>Adds new search using JSGF model. </para>        </briefdescription>
        <detaileddescription>
<para>Convenient method to load JSGF model and create a search.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="665" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="665" bodyend="701"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
        <references refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" compoundref="pocketsphinx_8c" startline="657" endline="662">ps_set_fsg</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ac122095a09d9d1a328afe699d4f7f8fc" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_set_jsgf_string</definition>
        <argsstring>(ps_decoder_t *ps, const char *name, const char *jsgf_string)</argsstring>
        <name>ps_set_jsgf_string</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>jsgf_string</declname>
        </param>
        <briefdescription>
<para>Adds new search using JSGF model. </para>        </briefdescription>
        <detaileddescription>
<para>Convenience method to parse JSGF model from string and create a search.</para><para><simplesect kind="see"><para><ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref> </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="704" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="704" bodyend="737"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" compoundref="pocketsphinx__internal_8h" startline="210">ps_decoder_s::lmath</references>
        <references refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" compoundref="pocketsphinx_8c" startline="657" endline="662">ps_set_fsg</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a6ae7ab622e70bd62ec944f0081719475" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_load_dict</definition>
        <argsstring>(ps_decoder_t *ps, char const *dictfile, char const *fdictfile, char const *format)</argsstring>
        <name>ps_load_dict</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>dictfile</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>fdictfile</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>format</declname>
        </param>
        <briefdescription>
<para>Reload the pronunciation dictionary from a file. </para>        </briefdescription>
        <detaileddescription>
<para>This function replaces the current pronunciation dictionary with the one stored in dictfile. This also causes the active search module(s) to be reinitialized, in the same manner as calling <ref refid="pocketsphinx_8h_1a5f3c4fcdbef34915c4e785ac9a1c6005" kindref="member">ps_add_word()</ref> with update=TRUE.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dictfile</parametername>
</parameternamelist>
<parameterdescription>
<para>Path to dictionary file to load. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fdictfile</parametername>
</parameternamelist>
<parameterdescription>
<para>Path to filler dictionary to load, or NULL to keep the existing filler dictionary. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>format</parametername>
</parameternamelist>
<parameterdescription>
<para>Format of the dictionary file, or NULL to determine automatically (currently unused,should be NULL) </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="741" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="741" bodyend="794"/>
        <references refid="pocketsphinx_8h_1ad873ea6e20f91a3284963d5c34331c58" compoundref="pocketsphinx_8c" startline="423" endline="426">ps_args</references>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="dict_8h_1a05d8dac3e5fe5399ccb8bf7776e203e2" compoundref="dict_8c" startline="252" endline="395">dict_init</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" compoundref="acmod_8h" startline="159">acmod_s::mdef</references>
        <references refid="dict2pid_8c_1addd541f2275b79e284575fb11b7986e1" compoundref="dict2pid_8c" startline="388" endline="497">dict2pid_build</references>
        <references refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" compoundref="dict_8c" startline="468" endline="496">dict_free</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" compoundref="dict2pid_8c" startline="507" endline="530">dict2pid_free</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <references refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" compoundref="pocketsphinx__internal_8h" startline="213">ps_decoder_s::searches</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a72d636888a070dd27739451eeb55eb2d" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_save_dict</definition>
        <argsstring>(ps_decoder_t *ps, char const *dictfile, char const *format)</argsstring>
        <name>ps_save_dict</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>dictfile</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>format</declname>
        </param>
        <briefdescription>
<para>Dump the current pronunciation dictionary to a file. </para>        </briefdescription>
        <detaileddescription>
<para>This function dumps the current pronunciation dictionary to a tex</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>dictfile</parametername>
</parameternamelist>
<parameterdescription>
<para>Path to file where dictionary will be written. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>format</parametername>
</parameternamelist>
<parameterdescription>
<para>Format of the dictionary file, or NULL for the default (text) format (currently unused, should be NULL) </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="797" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="797" bodyend="801"/>
        <references refid="dict_8h_1a4bfa8e3b7b9ff30165375d1c97bb04b8" compoundref="dict_8c" startline="221" endline="248">dict_write</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a08caffcf720a4b959a0b9259a428dc7f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_add_word</definition>
        <argsstring>(ps_decoder_t *ps, char const *word, char const *phones, int update)</argsstring>
        <name>ps_add_word</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>word</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>phones</declname>
        </param>
        <param>
          <type>int</type>
          <declname>update</declname>
        </param>
        <briefdescription>
<para>Add a word to the pronunciation dictionary. </para>        </briefdescription>
        <detaileddescription>
<para>This function adds a word to the pronunciation dictionary and the current language model (but, obviously, not to the current FSG if FSG mode is enabled). If the word is already present in one or the other, it does whatever is necessary to ensure that the word can be recognized.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>word</parametername>
</parameternamelist>
<parameterdescription>
<para>Word string to add. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>phones</parametername>
</parameternamelist>
<parameterdescription>
<para>Whitespace-separated list of phoneme strings describing pronunciation of <computeroutput>word</computeroutput>. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>update</parametername>
</parameternamelist>
<parameterdescription>
<para>If TRUE, update the search module (whichever one is currently active) to recognize the newly added word. If adding multiple words, it is more efficient to pass FALSE here in all but the last word. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The internal ID (&gt;= 0) of the newly added word, or &lt;0 on failure. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="804" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="804" bodyend="869"/>
        <references refid="bin__mdef_8h_1af592f710731474b77166a29530716672" compoundref="bin__mdef_8c" startline="691" endline="711">bin_mdef_ciphone_id</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" compoundref="acmod_8h" startline="159">acmod_s::mdef</references>
        <references refid="dict_8h_1a24888ac8e24259e553c43c4655b38432" compoundref="dict_8c" startline="80" endline="145">dict_add_word</references>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="dict2pid_8c_1aa94120dcea4b17807576e29484b8a008" compoundref="dict2pid_8c" startline="298" endline="364">dict2pid_add_word</references>
        <references refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" compoundref="pocketsphinx__internal_8h" startline="209">ps_decoder_s::d2p</references>
        <references refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" compoundref="pocketsphinx__internal_8h" startline="213">ps_decoder_s::searches</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a025c35865b6447ddcd3510e78f629e70" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char *</type>
        <definition>char* ps_lookup_word</definition>
        <argsstring>(ps_decoder_t *ps, const char *word)</argsstring>
        <name>ps_lookup_word</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>word</declname>
        </param>
        <briefdescription>
<para>Lookup for the word in the dictionary and return phone transcription for it. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Pocketsphinx decoder </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>word</parametername>
</parameternamelist>
<parameterdescription>
<para>Word to look for</para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Whitespace-spearated phone string describing the pronunciation of the <computeroutput>word</computeroutput> or NULL if word is not present in the dictionary. The string is allocated and must be freed by the user. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="872" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="872" bodyend="892"/>
        <references refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" compoundref="pocketsphinx__internal_8h" startline="208">ps_decoder_s::dict</references>
        <references refid="dict_8h_1ad3729eb1a02a9a321e17933f7e90c80e" compoundref="dict_8c" startline="399" endline="409">dict_wordid</references>
        <references refid="s3types_8h_1a5c42410b7125da611210c5a4be29898b" compoundref="s3types_8h" startline="90">BAD_S3WID</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a1a394d8a2e4368bebf4388873d7330b5" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>long</type>
        <definition>long ps_decode_raw</definition>
        <argsstring>(ps_decoder_t *ps, FILE *rawfh, long maxsamps)</argsstring>
        <name>ps_decode_raw</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>FILE *</type>
          <declname>rawfh</declname>
        </param>
        <param>
          <type>long</type>
          <declname>maxsamps</declname>
        </param>
        <briefdescription>
<para>Decode a raw audio stream. </para>        </briefdescription>
        <detaileddescription>
<para>No headers are recognized in this files. The configuration parameters <computeroutput>-samprate</computeroutput> and <computeroutput>-input_endian</computeroutput> are used to determine the sampling rate and endianness of the stream, respectively. Audio is always assumed to be 16-bit signed PCM.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>rawfh</parametername>
</parameternamelist>
<parameterdescription>
<para>Previously opened file stream. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>maxsamps</parametername>
</parameternamelist>
<parameterdescription>
<para>Maximum number of samples to read from rawfh, or -1 to read until end-of-file. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of samples of audio. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="895" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="895" bodyend="935"/>
        <references refid="pocketsphinx_8h_1a89be3b2a8f83291a225db0bcd9ee65b2" compoundref="pocketsphinx_8c" startline="938" endline="942">ps_start_stream</references>
        <references refid="pocketsphinx_8h_1ade3909b1c12c1b70afe284639e70cbff" compoundref="pocketsphinx_8c" startline="945" endline="1023">ps_start_utt</references>
        <references refid="pocketsphinx_8h_1a572ad08651b4caae820d178a12c8f95f" compoundref="pocketsphinx_8c" startline="1069" endline="1102">ps_process_raw</references>
        <references refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" compoundref="pocketsphinx_8c" startline="1136" endline="1199">ps_end_utt</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a00aa091481f79c6b3f6cdc8c288cf095" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_start_stream</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_start_stream</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Start processing of the stream of speech. </para>        </briefdescription>
        <detaileddescription>
<para>Channel parameters like noise-level are maintained for the stream and reused among utterances. Times returned in segment iterators are also stream-wide.</para><para><simplesect kind="return"><para>0 for success, &lt;0 on error. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="938" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="938" bodyend="942"/>
        <references refid="acmod_8c_1ae065d2fafc704177e7537988c9d3b5c1" compoundref="acmod_8c" startline="1334" endline="1338">acmod_start_stream</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <referencedby refid="pocketsphinx_8h_1a43b378f9c42bcb19fdff0ebe71c25adb" compoundref="pocketsphinx_8c" startline="895" endline="935">ps_decode_raw</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a51b559594ab5ed6999df04d9fe1afbb3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_start_utt</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_start_utt</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Start utterance processing. </para>        </briefdescription>
        <detaileddescription>
<para>This function should be called before any utterance data is passed to the decoder. It marks the start of a new utterance and reinitializes internal data structures.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder to be started. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 for success, &lt;0 on error. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="945" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="945" bodyend="1023"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" compoundref="acmod_8h" startline="187">acmod_s::state</references>
        <references refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba71f39dbe81403dbb045f4312d1bbaae3" compoundref="acmod_8h" startline="69">ACMOD_STARTED</references>
        <references refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba1ed8df720ee7006ebaada8c75371d94c" compoundref="acmod_8h" startline="70">ACMOD_PROCESSING</references>
        <references refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" compoundref="pocketsphinx__internal_8h" startline="216">ps_decoder_s::search</references>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
        <references refid="structps__decoder__s_1a0f597370dd162c2799efe216c9b991fc" compoundref="pocketsphinx__internal_8h" startline="221">ps_decoder_s::uttno</references>
        <references refid="ps__lattice_8h_1a3f90e846bde47cd1acdff165b92f5c22" compoundref="ps__lattice_8c" startline="665" endline="679">ps_lattice_free</references>
        <references refid="structps__search__s_1a897f46c55d17e817ff1364f555b31463" compoundref="pocketsphinx__internal_8h" startline="110">ps_search_s::dag</references>
        <references refid="structps__search__s_1aa3020ef7bd4e56713dfe2fbad52e6e4f" compoundref="pocketsphinx__internal_8h" startline="111">ps_search_s::last_link</references>
        <references refid="structps__search__s_1a721a656d0e34f7604ea8c52a1bdf14ff" compoundref="pocketsphinx__internal_8h" startline="112">ps_search_s::post</references>
        <references refid="structps__search__s_1aa398c736a887af97e42b2a562359adc3" compoundref="pocketsphinx__internal_8h" startline="109">ps_search_s::hyp_str</references>
        <references refid="acmod_8c_1aa3a5a89f76338e3e1bcfa7a2cecc5845" compoundref="acmod_8c" startline="425" endline="440">acmod_start_utt</references>
        <references refid="structps__decoder__s_1a8bb5ef8791798b8dd9bc82b1ec016663" compoundref="pocketsphinx__internal_8h" startline="224">ps_decoder_s::mfclogdir</references>
        <references refid="acmod_8c_1a5753caa516c75bdc74b385d7aa66a97c" compoundref="acmod_8c" startline="377" endline="386">acmod_set_mfcfh</references>
        <references refid="structps__decoder__s_1aa2610c52a9267ee18ca095169bf34bfd" compoundref="pocketsphinx__internal_8h" startline="225">ps_decoder_s::rawlogdir</references>
        <references refid="acmod_8c_1a6979441ae866ea846ef41f8471b105a0" compoundref="acmod_8c" startline="389" endline="395">acmod_set_rawfh</references>
        <references refid="structps__decoder__s_1a0ed3476113fe3d63b13ac5e8da3f3b4f" compoundref="pocketsphinx__internal_8h" startline="226">ps_decoder_s::senlogdir</references>
        <references refid="acmod_8c_1ab35cb48cdf326a3fb5223589d73ae0ce" compoundref="acmod_8c" startline="366" endline="374">acmod_set_senfh</references>
        <references refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" compoundref="pocketsphinx__internal_8h" startline="217">ps_decoder_s::phone_loop</references>
        <referencedby refid="pocketsphinx_8h_1a43b378f9c42bcb19fdff0ebe71c25adb" compoundref="pocketsphinx_8c" startline="895" endline="935">ps_decode_raw</referencedby>
        <referencedby refid="pocketsphinx_8h_1a466d1d718873e7b1cf0881e4f552a4a2" compoundref="pocketsphinx_8c" startline="1048" endline="1066">ps_decode_senscr</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a3074b45826979ec7cb94de2adffa1702" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>static int ps_search_forward</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_search_forward</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1026" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1026" bodyend="1045"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a607f7ef176e85f564563c31ba396c295" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_decode_senscr</definition>
        <argsstring>(ps_decoder_t *ps, FILE *senfh)</argsstring>
        <name>ps_decode_senscr</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>FILE *</type>
          <declname>senfh</declname>
        </param>
        <briefdescription>
<para>Decode a senone score dump file. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>fh</parametername>
</parameternamelist>
<parameterdescription>
<para>Previously opened file handle positioned at start of file. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of frames read. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1048" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1048" bodyend="1066"/>
        <references refid="pocketsphinx_8h_1ade3909b1c12c1b70afe284639e70cbff" compoundref="pocketsphinx_8c" startline="945" endline="1023">ps_start_utt</references>
        <references refid="acmod_8c_1a58bd6038bec5d3901ac2057cacdd778a" compoundref="acmod_8c" startline="884" endline="894">acmod_set_insenfh</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="acmod_8c_1a5c193164be78ad42944b7fb1be6299a2" compoundref="acmod_8c" startline="1032" endline="1066">acmod_read_scores</references>
        <references refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" compoundref="pocketsphinx_8c" startline="1136" endline="1199">ps_end_utt</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1af85997a52e688fdfa7c76d346c497c5c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_process_raw</definition>
        <argsstring>(ps_decoder_t *ps, int16 const *data, size_t n_samples, int no_search, int full_utt)</argsstring>
        <name>ps_process_raw</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int16 const *</type>
          <declname>data</declname>
        </param>
        <param>
          <type>size_t</type>
          <declname>n_samples</declname>
        </param>
        <param>
          <type>int</type>
          <declname>no_search</declname>
        </param>
        <param>
          <type>int</type>
          <declname>full_utt</declname>
        </param>
        <briefdescription>
<para>Decode raw audio data. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>no_search</parametername>
</parameternamelist>
<parameterdescription>
<para>If non-zero, perform feature extraction but don&apos;t do any recognition yet. This may be necessary if your processor has trouble doing recognition in real-time. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>full_utt</parametername>
</parameternamelist>
<parameterdescription>
<para>If non-zero, this block of data is a full utterance worth of data. This may allow the recognizer to produce more accurate results. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of frames of data searched, or &lt;0 for error. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1069" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1069" bodyend="1102"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" compoundref="acmod_8h" startline="187">acmod_s::state</references>
        <references refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba09f7964816ae844c445acd4cf3e33253" compoundref="acmod_8h" startline="68">ACMOD_IDLE</references>
        <references refid="acmod_8c_1a1555dac8fa27f644d709c5c89bbfa881" compoundref="acmod_8c" startline="412" endline="422">acmod_set_grow</references>
        <references refid="acmod_8c_1a23e63c8833e6128ae248e183d42f9b2b" compoundref="acmod_8c" startline="627" endline="716">acmod_process_raw</references>
        <references refid="pocketsphinx_8h_1adc0ab735d6460142126bc31a9e9d2ba0">ps_process_cep</references>
        <references refid="acmod_8c_1a9464f7708a361171469d613d401619fe" compoundref="acmod_8c" startline="719" endline="814">acmod_process_cep</references>
        <referencedby refid="pocketsphinx_8h_1a43b378f9c42bcb19fdff0ebe71c25adb" compoundref="pocketsphinx_8c" startline="895" endline="935">ps_decode_raw</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ad4bc1738249a8927b6e88b83522111d3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_process_cep</definition>
        <argsstring>(ps_decoder_t *ps, mfcc_t **data, int32 n_frames, int no_search, int full_utt)</argsstring>
        <name>ps_process_cep</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>mfcc_t **</type>
          <declname>data</declname>
        </param>
        <param>
          <type>int32</type>
          <declname>n_frames</declname>
        </param>
        <param>
          <type>int</type>
          <declname>no_search</declname>
        </param>
        <param>
          <type>int</type>
          <declname>full_utt</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1105" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1105" bodyend="1133"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a2ea28cc58bdbe70367268c5fea0d153b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_end_utt</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_end_utt</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>End utterance processing. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 for success, &lt;0 on error </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1136" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1136" bodyend="1199"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" compoundref="acmod_8h" startline="187">acmod_s::state</references>
        <references refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba3d936d27ce644db26a862830f3b6d188" compoundref="acmod_8h" startline="71">ACMOD_ENDED</references>
        <references refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba09f7964816ae844c445acd4cf3e33253" compoundref="acmod_8h" startline="68">ACMOD_IDLE</references>
        <references refid="acmod_8c_1a262372bdd6063f61e64b5417a449c1a9" compoundref="acmod_8c" startline="443" endline="486">acmod_end_utt</references>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
        <references refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" compoundref="pocketsphinx__internal_8h" startline="217">ps_decoder_s::phone_loop</references>
        <referencedby refid="pocketsphinx_8h_1a43b378f9c42bcb19fdff0ebe71c25adb" compoundref="pocketsphinx_8c" startline="895" endline="935">ps_decode_raw</referencedby>
        <referencedby refid="pocketsphinx_8h_1a466d1d718873e7b1cf0881e4f552a4a2" compoundref="pocketsphinx_8c" startline="1048" endline="1066">ps_decode_senscr</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a9be2f6e748193e74a3e205f165dabc94" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char const  *</type>
        <definition>char const* ps_get_hyp</definition>
        <argsstring>(ps_decoder_t *ps, int32 *out_best_score)</argsstring>
        <name>ps_get_hyp</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_best_score</declname>
        </param>
        <briefdescription>
<para>Get hypothesis string and path score. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_best_score</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: path score corresponding to returned string. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>String containing best hypothesis at this point in decoding. NULL if no hypothesis is available. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1202" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1202" bodyend="1210"/>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a6f96058c8d2a404ee57c527eadaed31e" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char const  *</type>
        <definition>char const* ps_get_hyp_final</definition>
        <argsstring>(ps_decoder_t *ps, int32 *out_is_final)</argsstring>
        <name>ps_get_hyp_final</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_is_final</declname>
        </param>
        <briefdescription>
<para>Get hypothesis string and final flag. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_is_best_score</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: if hypothesis is reached final state in the grammar. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>String containing best hypothesis at this point in decoding. NULL if no hypothesis is available. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1213" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1213" bodyend="1221"/>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1abfbf5eba83bd25edb102cc90a081f606" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32</type>
        <definition>int32 ps_get_prob</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_prob</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get posterior probability. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="note"><para>Unless the -bestpath option is enabled, this function will always return zero (corresponding to a posterior probability of 1.0). Even if -bestpath is enabled, it will also return zero when called on a partial result. Ongoing research into effective confidence annotation for partial hypotheses may result in these restrictions being lifted in future versions.</para></simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Posterior probability of the best hypothesis. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1225" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1225" bodyend="1233"/>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a91f1754dbc6fbcc4ca2ff00996aaaeb0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
        <definition>ps_seg_t* ps_seg_iter</definition>
        <argsstring>(ps_decoder_t *ps, int32 *out_best_score)</argsstring>
        <name>ps_seg_iter</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_best_score</declname>
        </param>
        <briefdescription>
<para>Get an iterator over the word segmentation for the best hypothesis. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_best_score</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: path score corresponding to hypothesis. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Iterator over the best hypothesis at this point in decoding. NULL if no hypothesis is available. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1236" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1236" bodyend="1244"/>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a364787819cc4796deb0452011a215a17" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
        <definition>ps_seg_t* ps_seg_next</definition>
        <argsstring>(ps_seg_t *seg)</argsstring>
        <name>ps_seg_next</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
          <declname>seg</declname>
        </param>
        <briefdescription>
<para>Get the next segment in a word segmentation. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>seg</parametername>
</parameternamelist>
<parameterdescription>
<para>Segment iterator. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Updated iterator with the next segment. NULL at end of utterance (the iterator will be freed in this case). </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1247" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1247" bodyend="1250"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a1af602036e5861583a8349440480b9b9" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char const  *</type>
        <definition>char const* ps_seg_word</definition>
        <argsstring>(ps_seg_t *seg)</argsstring>
        <name>ps_seg_word</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
          <declname>seg</declname>
        </param>
        <briefdescription>
<para>Get word string from a segmentation iterator. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>seg</parametername>
</parameternamelist>
<parameterdescription>
<para>Segment iterator. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Read-only string giving string name of this segment. This is only valid until the next call to <ref refid="pocketsphinx_8h_1ae16ba181f654ffc9bfbbe861e9315f12" kindref="member">ps_seg_next()</ref>. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1253" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1253" bodyend="1256"/>
        <references refid="structps__seg__s_1a97a0dc7db931c7e3f98d23d21ce27f04" compoundref="pocketsphinx__internal_8h" startline="181">ps_seg_s::word</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a26cdfd9ee83cace62d22c8c06a1045a3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_seg_frames</definition>
        <argsstring>(ps_seg_t *seg, int *out_sf, int *out_ef)</argsstring>
        <name>ps_seg_frames</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
          <declname>seg</declname>
        </param>
        <param>
          <type>int *</type>
          <declname>out_sf</declname>
        </param>
        <param>
          <type>int *</type>
          <declname>out_ef</declname>
        </param>
        <briefdescription>
<para>Get inclusive start and end frames from a segmentation iterator. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="note"><para>These frame numbers are inclusive, i.e. the end frame refers to the last frame in which the given word or other segment was active. Therefore, the actual duration is *out_ef - *out_sf + 1.</para></simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>seg</parametername>
</parameternamelist>
<parameterdescription>
<para>Segment iterator. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_sf</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: First frame index in segment. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_sf</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Last frame index in segment. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1259" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1259" bodyend="1265"/>
        <references refid="acmod_8c_1a8b52ce1289cc84deda1cf98b4cebbca2" compoundref="acmod_8c" startline="1328" endline="1331">acmod_stream_offset</references>
        <references refid="structps__seg__s_1a14168ddcb60e094dad36c7c920a79bb3" compoundref="pocketsphinx__internal_8h" startline="180">ps_seg_s::search</references>
        <references refid="structps__search__s_1a0fdf6fe8c4d9c28f10c48c09517c6b91" compoundref="pocketsphinx__internal_8h" startline="106">ps_search_s::acmod</references>
        <references refid="structps__seg__s_1a885a599726cd0efba573d106d016e6e2" compoundref="pocketsphinx__internal_8h" startline="182">ps_seg_s::sf</references>
        <references refid="structps__seg__s_1ab25ecc6af8d2695c6097cf7e934eadd4" compoundref="pocketsphinx__internal_8h" startline="183">ps_seg_s::ef</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a70cfbc24b5c837ae7d43503d44cb84f1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int32</type>
        <definition>int32 ps_seg_prob</definition>
        <argsstring>(ps_seg_t *seg, int32 *out_ascr, int32 *out_lscr, int32 *out_lback)</argsstring>
        <name>ps_seg_prob</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
          <declname>seg</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_ascr</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_lscr</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_lback</declname>
        </param>
        <briefdescription>
<para>Get language, acoustic, and posterior probabilities from a segmentation iterator. </para>        </briefdescription>
        <detaileddescription>
<para><simplesect kind="note"><para>Unless the -bestpath option is enabled, this function will always return zero (corresponding to a posterior probability of 1.0). Even if -bestpath is enabled, it will also return zero when called on a partial result. Ongoing research into effective confidence annotation for partial hypotheses may result in these restrictions being lifted in future versions.</para></simplesect>
<parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>out_ascr</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: acoustic model score for this segment. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_lscr</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: language model score for this segment. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_lback</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: language model backoff mode for this segment (i.e. the number of words used in calculating lscr). This field is, of course, only meaningful for N-Gram models. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Log posterior probability of current segment. Log is expressed in the log-base used in the decoder. To convert to linear floating-point, use logmath_exp(<ref refid="pocketsphinx_8h_1a249cfc383b7d9111a28b550945a606b5" kindref="member">ps_get_logmath()</ref>, pprob). </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1268" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1268" bodyend="1274"/>
        <references refid="structps__seg__s_1a6f7706ec4c0d0ec8ecafaf0f29f41f4b" compoundref="pocketsphinx__internal_8h" startline="184">ps_seg_s::ascr</references>
        <references refid="structps__seg__s_1a69e605f422eeed1a9c67437e8ddd8b08" compoundref="pocketsphinx__internal_8h" startline="185">ps_seg_s::lscr</references>
        <references refid="structps__seg__s_1a4d86c21f1ed2dc3eb3b1b1b37ce9bb48" compoundref="pocketsphinx__internal_8h" startline="189">ps_seg_s::lback</references>
        <references refid="structps__seg__s_1ae683244d90d0a5339930b47757778432" compoundref="pocketsphinx__internal_8h" startline="186">ps_seg_s::prob</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1adb0ebc18a05264de223e41cb91dbbfc1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_seg_free</definition>
        <argsstring>(ps_seg_t *seg)</argsstring>
        <name>ps_seg_free</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
          <declname>seg</declname>
        </param>
        <briefdescription>
<para>Finish iterating over a word segmentation early, freeing resources. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1277" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1277" bodyend="1280"/>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a42dea62c41e5f17a9d08a32f043ab19c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="ps__lattice_8h_1af3c03aa650aafdaea0cbcfabe1a1c1e5" kindref="member">ps_lattice_t</ref> *</type>
        <definition>ps_lattice_t* ps_get_lattice</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_lattice</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get word lattice. </para>        </briefdescription>
        <detaileddescription>
<para>There isn&apos;t much you can do with this so far, a public API will appear in the future.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Word lattice object containing all hypotheses so far. NULL if no hypotheses are available. This pointer is owned by the decoder and you should not attempt to free it manually. It is only valid until the next utterance, unless you use <ref refid="ps__lattice_8h_1a9efc5f2836e2a0bd5d58326303516df5" kindref="member">ps_lattice_retain()</ref> to retain it. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1283" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1283" bodyend="1286"/>
        <referencedby refid="pocketsphinx_8h_1af4bb6ba47844a135745db428919d9810" compoundref="pocketsphinx_8c" startline="1289" endline="1319">ps_nbest</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a2aa16361be95c42576ad89d8a23eebf6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1a73090e41024a1f07f5552b83ac7e0993" kindref="member">ps_nbest_t</ref> *</type>
        <definition>ps_nbest_t* ps_nbest</definition>
        <argsstring>(ps_decoder_t *ps, int sf, int ef, char const *ctx1, char const *ctx2)</argsstring>
        <name>ps_nbest</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int</type>
          <declname>sf</declname>
        </param>
        <param>
          <type>int</type>
          <declname>ef</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>ctx1</declname>
        </param>
        <param>
          <type>char const *</type>
          <declname>ctx2</declname>
        </param>
        <briefdescription>
<para>Get an iterator over the best hypotheses, optionally within a selected region of the utterance. </para>        </briefdescription>
        <detaileddescription>
<para>Iterator is empty now, it must be advanced with ps_nbest_next first. The function may also return a NULL which means that there is no hypothesis available for this utterance.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>sf</parametername>
</parameternamelist>
<parameterdescription>
<para>Start frame for N-best search (0 for whole utterance) </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>ef</parametername>
</parameternamelist>
<parameterdescription>
<para>End frame for N-best search (-1 for whole utterance) </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>ctx1</parametername>
</parameternamelist>
<parameterdescription>
<para>First word of trigram context (NULL for whole utterance) </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>ctx2</parametername>
</parameternamelist>
<parameterdescription>
<para>First word of trigram context (NULL for whole utterance) </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Iterator over N-best hypotheses or NULL if no hypothesis is available </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1289" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1289" bodyend="1319"/>
        <references refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" compoundref="pocketsphinx__internal_8h" startline="216">ps_decoder_s::search</references>
        <references refid="pocketsphinx_8h_1ac7e8897e5eed452f284bef3ee53d2429" compoundref="pocketsphinx_8c" startline="1283" endline="1286">ps_get_lattice</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a2eeba140b916ecf05750e92e87c07a34" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_nbest_free</definition>
        <argsstring>(ps_nbest_t *nbest)</argsstring>
        <name>ps_nbest_free</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a73090e41024a1f07f5552b83ac7e0993" kindref="member">ps_nbest_t</ref> *</type>
          <declname>nbest</declname>
        </param>
        <briefdescription>
<para>Finish N-best search early, releasing resources. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nbest</parametername>
</parameternamelist>
<parameterdescription>
<para>N-best iterator. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1322" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1322" bodyend="1325"/>
        <references refid="ps__lattice_8c_1abfb03e9e0fcbe3def45120f5ba43be14" compoundref="ps__lattice_8c" startline="1925" endline="1938">ps_astar_finish</references>
        <referencedby refid="pocketsphinx_8h_1a0942b8c0570009319a5be20ef1b52821" compoundref="pocketsphinx_8c" startline="1328" endline="1338">ps_nbest_next</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a662f40f8b4b7b5f9464656bb4484cd38" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1a73090e41024a1f07f5552b83ac7e0993" kindref="member">ps_nbest_t</ref> *</type>
        <definition>ps_nbest_t* ps_nbest_next</definition>
        <argsstring>(ps_nbest_t *nbest)</argsstring>
        <name>ps_nbest_next</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a73090e41024a1f07f5552b83ac7e0993" kindref="member">ps_nbest_t</ref> *</type>
          <declname>nbest</declname>
        </param>
        <briefdescription>
<para>Move an N-best list iterator forward. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nbest</parametername>
</parameternamelist>
<parameterdescription>
<para>N-best iterator. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Updated N-best iterator, or NULL if no more hypotheses are available (iterator is freed ni this case). </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1328" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1328" bodyend="1338"/>
        <references refid="ps__lattice_8c_1a6bea95f8fb827af790bbe6ce1920908c" compoundref="ps__lattice_8c" startline="1771" endline="1801">ps_astar_next</references>
        <references refid="pocketsphinx_8h_1a83379b2da95eebdf5070d29196a9b067" compoundref="pocketsphinx_8c" startline="1322" endline="1325">ps_nbest_free</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1ac69ace813fa72560fcaae856ce371c55" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>char const  *</type>
        <definition>char const* ps_nbest_hyp</definition>
        <argsstring>(ps_nbest_t *nbest, int32 *out_score)</argsstring>
        <name>ps_nbest_hyp</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a73090e41024a1f07f5552b83ac7e0993" kindref="member">ps_nbest_t</ref> *</type>
          <declname>nbest</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_score</declname>
        </param>
        <briefdescription>
<para>Get the hypothesis string from an N-best list iterator. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nbest</parametername>
</parameternamelist>
<parameterdescription>
<para>N-best iterator. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_score</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Path score for this hypothesis. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>String containing next best hypothesis. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1341" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1341" bodyend="1349"/>
        <references refid="structps__latpath__s_1a9249fb528f754db992df1d494a69b580" compoundref="ps__lattice__internal_8h" startline="157">ps_latpath_s::score</references>
        <references refid="ps__lattice_8c_1ac7372b5c5ec111f6814ce1ba495593e4" compoundref="ps__lattice_8c" startline="1804" endline="1848">ps_astar_hyp</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a2ecfe9758e4d5d6153286b25e9dbddc6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="pocketsphinx_8h_1a64d3ac229ef945017112bab4c2a5ec94" kindref="member">ps_seg_t</ref> *</type>
        <definition>ps_seg_t* ps_nbest_seg</definition>
        <argsstring>(ps_nbest_t *nbest, int32 *out_score)</argsstring>
        <name>ps_nbest_seg</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1a73090e41024a1f07f5552b83ac7e0993" kindref="member">ps_nbest_t</ref> *</type>
          <declname>nbest</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>out_score</declname>
        </param>
        <briefdescription>
<para>Get the word segmentation from an N-best list iterator. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>nbest</parametername>
</parameternamelist>
<parameterdescription>
<para>N-best iterator. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_score</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Path score for this hypothesis. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Iterator over the next best hypothesis. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1352" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1352" bodyend="1358"/>
        <references refid="structps__latpath__s_1a9249fb528f754db992df1d494a69b580" compoundref="ps__lattice__internal_8h" startline="157">ps_latpath_s::score</references>
        <references refid="ps__lattice_8c_1ac8e3dff7276c03c93377d0cb79fbdbd7" compoundref="ps__lattice_8c" startline="1898" endline="1922">ps_astar_seg_iter</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a7fe404c3111562ff869b2564e96349be" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int ps_get_n_frames</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_n_frames</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Get the number of frames of data searched. </para>        </briefdescription>
        <detaileddescription>
<para>Note that there is a delay between this and the number of frames of audio which have been input to the system. This is due to the fact that acoustic features are computed using a sliding window of audio, and dynamic features are computed over a sliding window of acoustic features.</para><para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Number of frames of speech data which have been recognized so far. </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1361" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1361" bodyend="1364"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" compoundref="acmod_8h" startline="194">acmod_s::output_frame</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a127410da6415747c0fcf79c33087615b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_get_utt_time</definition>
        <argsstring>(ps_decoder_t *ps, double *out_nspeech, double *out_ncpu, double *out_nwall)</argsstring>
        <name>ps_get_utt_time</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>out_nspeech</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>out_ncpu</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>out_nwall</declname>
        </param>
        <briefdescription>
<para>Get performance information for the current utterance. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_nspeech</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Number of seconds of speech. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_ncpu</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Number of seconds of CPU time used. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_nwall</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Number of seconds of wall time used. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1367" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1367" bodyend="1376"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" compoundref="acmod_8h" startline="194">acmod_s::output_frame</references>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a3a68e8f7acbda948af2f4cc78d6879db" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_get_all_time</definition>
        <argsstring>(ps_decoder_t *ps, double *out_nspeech, double *out_ncpu, double *out_nwall)</argsstring>
        <name>ps_get_all_time</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>out_nspeech</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>out_ncpu</declname>
        </param>
        <param>
          <type>double *</type>
          <declname>out_nwall</declname>
        </param>
        <briefdescription>
<para>Get overall performance information. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_nspeech</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Number of seconds of speech. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_ncpu</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Number of seconds of CPU time used. </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>out_nwall</parametername>
</parameternamelist>
<parameterdescription>
<para>Output: Number of seconds of wall time used. </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1379" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1379" bodyend="1388"/>
        <references refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" compoundref="pocketsphinx__internal_8h" startline="203">ps_decoder_s::config</references>
        <references refid="structps__decoder__s_1a2886b321c576c7def449ebb2f37899fd" compoundref="pocketsphinx__internal_8h" startline="223">ps_decoder_s::n_frame</references>
        <references refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" compoundref="pocketsphinx__internal_8h" startline="222">ps_decoder_s::perf</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a722e1fb7eff071bd8af170794ba8ba59" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>uint8</type>
        <definition>uint8 ps_get_in_speech</definition>
        <argsstring>(ps_decoder_t *ps)</argsstring>
        <name>ps_get_in_speech</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <briefdescription>
<para>Checks if the last feed audio buffer contained speech. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder. </para></parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>1 if last buffer contained speech, 0 - otherwise </para></simplesect>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1391" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1391" bodyend="1394"/>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
        <references refid="structacmod__s_1a56eaceb9b6a1cbcccd09cf42cfa87231" compoundref="acmod_8h" startline="155">acmod_s::fe</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a9e0d66662ea7c64f8bddbbfe57496896" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_search_init</definition>
        <argsstring>(ps_search_t *search, ps_searchfuncs_t *vt, const char *type, const char *name, cmd_ln_t *config, acmod_t *acmod, dict_t *dict, dict2pid_t *d2p)</argsstring>
        <name>ps_search_init</name>
        <param>
          <type><ref refid="pocketsphinx__internal_8h_1adc3de4d62e46c5e6cb93d09fb61be8ee" kindref="member">ps_search_t</ref> *</type>
          <declname>search</declname>
        </param>
        <param>
          <type><ref refid="pocketsphinx__internal_8h_1a0eae078e32bd5f339792884c68aad8b3" kindref="member">ps_searchfuncs_t</ref> *</type>
          <declname>vt</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>type</declname>
        </param>
        <param>
          <type>const char *</type>
          <declname>name</declname>
        </param>
        <param>
          <type>cmd_ln_t *</type>
          <declname>config</declname>
        </param>
        <param>
          <type><ref refid="structacmod__s" kindref="compound">acmod_t</ref> *</type>
          <declname>acmod</declname>
        </param>
        <param>
          <type><ref refid="structdict__t" kindref="compound">dict_t</ref> *</type>
          <declname>dict</declname>
        </param>
        <param>
          <type><ref refid="structdict2pid__t" kindref="compound">dict2pid_t</ref> *</type>
          <declname>d2p</declname>
        </param>
        <briefdescription>
<para>Initialize base structure. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1397" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1397" bodyend="1425"/>
        <references refid="structps__search__s_1aa51e88956bbe9c05359d32526180809b" compoundref="pocketsphinx__internal_8h" startline="99">ps_search_s::vt</references>
        <references refid="structps__search__s_1aa6e3e18165bbc70084a06575d5703042" compoundref="pocketsphinx__internal_8h" startline="105">ps_search_s::config</references>
        <references refid="structps__search__s_1a0fdf6fe8c4d9c28f10c48c09517c6b91" compoundref="pocketsphinx__internal_8h" startline="106">ps_search_s::acmod</references>
        <references refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" compoundref="pocketsphinx__internal_8h" startline="108">ps_search_s::d2p</references>
        <references refid="dict2pid_8c_1a85a8de8009445e1129766186ddaa949a" compoundref="dict2pid_8c" startline="500" endline="504">dict2pid_retain</references>
        <references refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" compoundref="pocketsphinx__internal_8h" startline="107">ps_search_s::dict</references>
        <references refid="dict_8h_1a0edf70be186e8940af9d21243083cb8b" compoundref="dict_8c" startline="461" endline="465">dict_retain</references>
        <references refid="structps__search__s_1ae1a9fa33bfc851ec91ce96870714b3cc" compoundref="pocketsphinx__internal_8h" startline="117">ps_search_s::start_wid</references>
        <referencedby refid="ngram__search_8h_1a04f80b377c847026254fb85596e2f43c" compoundref="ngram__search_8c" startline="140" endline="237">ngram_search_init</referencedby>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a39db3228c813a2943d47ff3f13e6ef08" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_search_base_free</definition>
        <argsstring>(ps_search_t *search)</argsstring>
        <name>ps_search_base_free</name>
        <param>
          <type><ref refid="pocketsphinx__internal_8h_1adc3de4d62e46c5e6cb93d09fb61be8ee" kindref="member">ps_search_t</ref> *</type>
          <declname>search</declname>
        </param>
        <briefdescription>
<para>Free search. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1428" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1428" bodyend="1438"/>
        <references refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" compoundref="dict_8c" startline="468" endline="496">dict_free</references>
        <references refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" compoundref="pocketsphinx__internal_8h" startline="107">ps_search_s::dict</references>
        <references refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" compoundref="dict2pid_8c" startline="507" endline="530">dict2pid_free</references>
        <references refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" compoundref="pocketsphinx__internal_8h" startline="108">ps_search_s::d2p</references>
        <references refid="structps__search__s_1aa398c736a887af97e42b2a562359adc3" compoundref="pocketsphinx__internal_8h" startline="109">ps_search_s::hyp_str</references>
        <references refid="ps__lattice_8h_1a3f90e846bde47cd1acdff165b92f5c22" compoundref="ps__lattice_8c" startline="665" endline="679">ps_lattice_free</references>
        <references refid="structps__search__s_1a897f46c55d17e817ff1364f555b31463" compoundref="pocketsphinx__internal_8h" startline="110">ps_search_s::dag</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a307801961f27bd5f4b82a3e6b83e0ca1" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_search_base_reinit</definition>
        <argsstring>(ps_search_t *search, dict_t *dict, dict2pid_t *d2p)</argsstring>
        <name>ps_search_base_reinit</name>
        <param>
          <type><ref refid="pocketsphinx__internal_8h_1adc3de4d62e46c5e6cb93d09fb61be8ee" kindref="member">ps_search_t</ref> *</type>
          <declname>search</declname>
        </param>
        <param>
          <type><ref refid="structdict__t" kindref="compound">dict_t</ref> *</type>
          <declname>dict</declname>
        </param>
        <param>
          <type><ref refid="structdict2pid__t" kindref="compound">dict2pid_t</ref> *</type>
          <declname>d2p</declname>
        </param>
        <briefdescription>
<para>Re-initialize base structure with new dictionary. </para>        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1441" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1441" bodyend="1463"/>
        <references refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" compoundref="dict_8c" startline="468" endline="496">dict_free</references>
        <references refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" compoundref="pocketsphinx__internal_8h" startline="107">ps_search_s::dict</references>
        <references refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" compoundref="dict2pid_8c" startline="507" endline="530">dict2pid_free</references>
        <references refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" compoundref="pocketsphinx__internal_8h" startline="108">ps_search_s::d2p</references>
        <references refid="dict_8h_1a0edf70be186e8940af9d21243083cb8b" compoundref="dict_8c" startline="461" endline="465">dict_retain</references>
        <references refid="structps__search__s_1ae1a9fa33bfc851ec91ce96870714b3cc" compoundref="pocketsphinx__internal_8h" startline="117">ps_search_s::start_wid</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1a87cceed7aa2ade2f7ad6229117a43bb3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_set_rawdata_size</definition>
        <argsstring>(ps_decoder_t *ps, int32 size)</argsstring>
        <name>ps_set_rawdata_size</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int32</type>
          <declname>size</declname>
        </param>
        <briefdescription>
<para>Sets the limit of the raw audio data to store in decoder to retrieve it later on ps_get_rawdata. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>size</parametername>
</parameternamelist>
<parameterdescription>
<para>bytes of the utterance to store </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1466" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1466" bodyend="1469"/>
        <references refid="acmod_8c_1a8c8dce7790c4486d1ee1b20d810805bf" compoundref="acmod_8c" startline="1341" endline="1349">acmod_set_rawdata_size</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
      </memberdef>
      <memberdef kind="function" id="pocketsphinx_8c_1afb95db30640b82e99d1bd1081923c763" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void ps_get_rawdata</definition>
        <argsstring>(ps_decoder_t *ps, int16 **buffer, int32 *size)</argsstring>
        <name>ps_get_rawdata</name>
        <param>
          <type><ref refid="pocketsphinx_8h_1ac6ba825b5a9e1c9003b257221eb6e055" kindref="member">ps_decoder_t</ref> *</type>
          <declname>ps</declname>
        </param>
        <param>
          <type>int16 **</type>
          <declname>buffer</declname>
        </param>
        <param>
          <type>int32 *</type>
          <declname>size</declname>
        </param>
        <briefdescription>
<para>Retrieves the raw data collected during utterance decoding. </para>        </briefdescription>
        <detaileddescription>
<para><parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>ps</parametername>
</parameternamelist>
<parameterdescription>
<para>Decoder </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>buffer</parametername>
</parameternamelist>
<parameterdescription>
<para>preallocated buffer to store the data, must be within the limit set before </para></parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>size</parametername>
</parameternamelist>
<parameterdescription>
<para>size of the data collected in samples (not bytes). </para></parameterdescription>
</parameteritem>
</parameterlist>
</para>        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="src/libpocketsphinx/pocketsphinx.c" line="1472" column="1" bodyfile="src/libpocketsphinx/pocketsphinx.c" bodystart="1472" bodyend="1475"/>
        <references refid="acmod_8c_1a0804fc79c26de167a95ece1189effbec" compoundref="acmod_8c" startline="1352" endline="1360">acmod_get_rawdata</references>
        <references refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" compoundref="pocketsphinx__internal_8h" startline="207">ps_decoder_s::acmod</references>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>-*-<sp/>c-basic-offset:<sp/>4;<sp/>indent-tabs-mode:<sp/>nil<sp/>-*-<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>====================================================================</highlight></codeline>
<codeline lineno="3"><highlight class="comment"><sp/>*<sp/>Copyright<sp/>(c)<sp/>2008<sp/>Carnegie<sp/>Mellon<sp/>University.<sp/><sp/>All<sp/>rights</highlight></codeline>
<codeline lineno="4"><highlight class="comment"><sp/>*<sp/>reserved.</highlight></codeline>
<codeline lineno="5"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="6"><highlight class="comment"><sp/>*<sp/>Redistribution<sp/>and<sp/>use<sp/>in<sp/>source<sp/>and<sp/>binary<sp/>forms,<sp/>with<sp/>or<sp/>without</highlight></codeline>
<codeline lineno="7"><highlight class="comment"><sp/>*<sp/>modification,<sp/>are<sp/>permitted<sp/>provided<sp/>that<sp/>the<sp/>following<sp/>conditions</highlight></codeline>
<codeline lineno="8"><highlight class="comment"><sp/>*<sp/>are<sp/>met:</highlight></codeline>
<codeline lineno="9"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="10"><highlight class="comment"><sp/>*<sp/>1.<sp/>Redistributions<sp/>of<sp/>source<sp/>code<sp/>must<sp/>retain<sp/>the<sp/>above<sp/>copyright</highlight></codeline>
<codeline lineno="11"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer.</highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/>*<sp/>2.<sp/>Redistributions<sp/>in<sp/>binary<sp/>form<sp/>must<sp/>reproduce<sp/>the<sp/>above<sp/>copyright</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>notice,<sp/>this<sp/>list<sp/>of<sp/>conditions<sp/>and<sp/>the<sp/>following<sp/>disclaimer<sp/>in</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>the<sp/>documentation<sp/>and/or<sp/>other<sp/>materials<sp/>provided<sp/>with<sp/>the</highlight></codeline>
<codeline lineno="16"><highlight class="comment"><sp/>*<sp/><sp/><sp/><sp/>distribution.</highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/>*<sp/>This<sp/>work<sp/>was<sp/>supported<sp/>in<sp/>part<sp/>by<sp/>funding<sp/>from<sp/>the<sp/>Defense<sp/>Advanced</highlight></codeline>
<codeline lineno="19"><highlight class="comment"><sp/>*<sp/>Research<sp/>Projects<sp/>Agency<sp/>and<sp/>the<sp/>National<sp/>Science<sp/>Foundation<sp/>of<sp/>the</highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/>*<sp/>United<sp/>States<sp/>of<sp/>America,<sp/>and<sp/>the<sp/>CMU<sp/>Sphinx<sp/>Speech<sp/>Consortium.</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="22"><highlight class="comment"><sp/>*<sp/>THIS<sp/>SOFTWARE<sp/>IS<sp/>PROVIDED<sp/>BY<sp/>CARNEGIE<sp/>MELLON<sp/>UNIVERSITY<sp/>``AS<sp/>IS&apos;&apos;<sp/>AND</highlight></codeline>
<codeline lineno="23"><highlight class="comment"><sp/>*<sp/>ANY<sp/>EXPRESSED<sp/>OR<sp/>IMPLIED<sp/>WARRANTIES,<sp/>INCLUDING,<sp/>BUT<sp/>NOT<sp/>LIMITED<sp/>TO,</highlight></codeline>
<codeline lineno="24"><highlight class="comment"><sp/>*<sp/>THE<sp/>IMPLIED<sp/>WARRANTIES<sp/>OF<sp/>MERCHANTABILITY<sp/>AND<sp/>FITNESS<sp/>FOR<sp/>A<sp/>PARTICULAR</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*<sp/>PURPOSE<sp/>ARE<sp/>DISCLAIMED.<sp/><sp/>IN<sp/>NO<sp/>EVENT<sp/>SHALL<sp/>CARNEGIE<sp/>MELLON<sp/>UNIVERSITY</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>NOR<sp/>ITS<sp/>EMPLOYEES<sp/>BE<sp/>LIABLE<sp/>FOR<sp/>ANY<sp/>DIRECT,<sp/>INDIRECT,<sp/>INCIDENTAL,</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>SPECIAL,<sp/>EXEMPLARY,<sp/>OR<sp/>CONSEQUENTIAL<sp/>DAMAGES<sp/>(INCLUDING,<sp/>BUT<sp/>NOT</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*<sp/>LIMITED<sp/>TO,<sp/>PROCUREMENT<sp/>OF<sp/>SUBSTITUTE<sp/>GOODS<sp/>OR<sp/>SERVICES;<sp/>LOSS<sp/>OF<sp/>USE,</highlight></codeline>
<codeline lineno="29"><highlight class="comment"><sp/>*<sp/>DATA,<sp/>OR<sp/>PROFITS;<sp/>OR<sp/>BUSINESS<sp/>INTERRUPTION)<sp/>HOWEVER<sp/>CAUSED<sp/>AND<sp/>ON<sp/>ANY</highlight></codeline>
<codeline lineno="30"><highlight class="comment"><sp/>*<sp/>THEORY<sp/>OF<sp/>LIABILITY,<sp/>WHETHER<sp/>IN<sp/>CONTRACT,<sp/>STRICT<sp/>LIABILITY,<sp/>OR<sp/>TORT</highlight></codeline>
<codeline lineno="31"><highlight class="comment"><sp/>*<sp/>(INCLUDING<sp/>NEGLIGENCE<sp/>OR<sp/>OTHERWISE)<sp/>ARISING<sp/>IN<sp/>ANY<sp/>WAY<sp/>OUT<sp/>OF<sp/>THE<sp/>USE</highlight></codeline>
<codeline lineno="32"><highlight class="comment"><sp/>*<sp/>OF<sp/>THIS<sp/>SOFTWARE,<sp/>EVEN<sp/>IF<sp/>ADVISED<sp/>OF<sp/>THE<sp/>POSSIBILITY<sp/>OF<sp/>SUCH<sp/>DAMAGE.</highlight></codeline>
<codeline lineno="33"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="34"><highlight class="comment"><sp/>*<sp/>====================================================================</highlight></codeline>
<codeline lineno="35"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="36"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>System<sp/>headers.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;assert.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HAVE_UNISTD_H</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;unistd.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>SphinxBase<sp/>headers.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sphinxbase/err.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sphinxbase/strfuncs.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sphinxbase/filename.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sphinxbase/pio.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sphinxbase/jsgf.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;sphinxbase/hash_table.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Local<sp/>headers.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;cmdln_macro.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pocketsphinx_8h" kindref="compound">pocketsphinx.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="pocketsphinx__internal_8h" kindref="compound">pocketsphinx_internal.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ps__lattice__internal_8h" kindref="compound">ps_lattice_internal.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="phone__loop__search_8h" kindref="compound">phone_loop_search.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;kws_search.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;fsg_search_internal.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ngram__search_8h" kindref="compound">ngram_search.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ngram__search__fwdtree_8h" kindref="compound">ngram_search_fwdtree.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="ngram__search__fwdflat_8h" kindref="compound">ngram_search_fwdflat.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;allphone_search.h&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>arg_t<sp/>ps_args_def[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/>POCKETSPHINX_OPTIONS,</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>CMDLN_EMPTY_OPTION</highlight></codeline>
<codeline lineno="70"><highlight class="normal">};</highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>I&apos;m<sp/>not<sp/>sure<sp/>what<sp/>the<sp/>portable<sp/>way<sp/>to<sp/>do<sp/>this<sp/>is.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="74"><highlight class="normal">file_exists(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path)</highlight></codeline>
<codeline lineno="75"><highlight class="normal">{</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>FILE<sp/>*tmp;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>fopen(path,<sp/></highlight><highlight class="stringliteral">&quot;rb&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp)<sp/>fclose(tmp);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(tmp<sp/>!=<sp/>NULL);</highlight></codeline>
<codeline lineno="81"><highlight class="normal">}</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MODELDIR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal">hmmdir_exists(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path)</highlight></codeline>
<codeline lineno="86"><highlight class="normal">{</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/>FILE<sp/>*tmp;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*mdef<sp/>=<sp/>string_join(path,<sp/></highlight><highlight class="stringliteral">&quot;/mdef&quot;</highlight><highlight class="normal">,<sp/>NULL);</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>fopen(mdef,<sp/></highlight><highlight class="stringliteral">&quot;rb&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(tmp)<sp/>fclose(tmp);</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(mdef);</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(tmp<sp/>!=<sp/>NULL);</highlight></codeline>
<codeline lineno="94"><highlight class="normal">}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal">ps_add_file(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*arg,</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*hmmdir,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*file)</highlight></codeline>
<codeline lineno="100"><highlight class="normal">{</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmp<sp/>=<sp/>string_join(hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">,<sp/>file,<sp/>NULL);</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>arg)<sp/>==<sp/>NULL<sp/>&amp;&amp;<sp/>file_exists(tmp))</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>arg,<sp/>tmp);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(tmp);</highlight></codeline>
<codeline lineno="106"><highlight class="normal">}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Feature<sp/>and<sp/>front-end<sp/>parameters<sp/>that<sp/>may<sp/>be<sp/>in<sp/>feat.params<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>arg_t<sp/>feat_defn[]<sp/>=<sp/>{</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>waveform_to_cepstral_command_line_macro(),</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>cepstral_to_feature_command_line_macro(),</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/>CMDLN_EMPTY_OPTION</highlight></codeline>
<codeline lineno="113"><highlight class="normal">};</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal">ps_expand_model_config(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="117"><highlight class="normal">{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*hmmdir,<sp/>*featparams;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Disable<sp/>memory<sp/>mapping<sp/>on<sp/>Blackfin<sp/>(FIXME:<sp/>should<sp/>be<sp/>uClinux<sp/>in<sp/>general).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>__ADSPBLACKFIN__</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;Will<sp/>not<sp/>use<sp/>mmap()<sp/>on<sp/>uClinux/Blackfin.&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_set_boolean_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-mmap&quot;</highlight><highlight class="normal">,<sp/>FALSE);</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>acoustic<sp/>model<sp/>filenames<sp/>and<sp/>add<sp/>them<sp/>to<sp/>the<sp/>command-line<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((hmmdir<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-hmm&quot;</highlight><highlight class="normal">))<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-mdef&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;mdef&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-mean&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;means&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-var&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;variances&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-tmat&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;transition_matrices&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-mixw&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;mixture_weights&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-sendump&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;sendump&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-fdict&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;noisedict&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-lda&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;feature_transform&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-featparams&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;feat.params&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_add_file(ps,<sp/></highlight><highlight class="stringliteral">&quot;-senmgau&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/></highlight><highlight class="stringliteral">&quot;senmgau&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Look<sp/>for<sp/>feat.params<sp/>in<sp/>acoustic<sp/>model<sp/>dir.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((featparams<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-featparams&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(NULL<sp/>!=</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_parse_file_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>feat_defn,<sp/>featparams,<sp/>FALSE))</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;Parsed<sp/>model-specific<sp/>feature<sp/>parameters<sp/>from<sp/>%s\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>featparams);</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Print<sp/>here<sp/>because<sp/>acmod_init<sp/>might<sp/>load<sp/>feat.params<sp/>file<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(err_get_logfp()<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_print_values_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>err_get_logfp(),<sp/><ref refid="pocketsphinx_8h_1ad873ea6e20f91a3284963d5c34331c58" kindref="member">ps_args</ref>());</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="152"><highlight class="normal">}</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal">ps_free_searches(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="156"><highlight class="normal">{</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>)<sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hash_iter_t<sp/>*search_it;</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(search_it<sp/>=<sp/>hash_table_iter(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>);<sp/>search_it;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search_it<sp/>=<sp/>hash_table_iter_next(search_it))<sp/>{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_search_free(hash_entry_val(search_it-&gt;ent));</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hash_table_free(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>);</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="168"><highlight class="normal">}</highlight></codeline>
<codeline lineno="169"><highlight class="normal"></highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*</highlight></codeline>
<codeline lineno="171"><highlight class="normal">ps_find_search(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*name)</highlight></codeline>
<codeline lineno="172"><highlight class="normal">{</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*search<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>hash_table_lookup(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>,<sp/>name,<sp/>&amp;search);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*)<sp/>search;</highlight></codeline>
<codeline lineno="177"><highlight class="normal">}</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180" refid="pocketsphinx_8h_1a887e4cdcbef98d5594458c5934cc9471" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a887e4cdcbef98d5594458c5934cc9471" kindref="member">ps_default_search_args</ref>(cmd_ln_t<sp/>*config)</highlight></codeline>
<codeline lineno="181"><highlight class="normal">{</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>MODELDIR</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>default<sp/>acoustic<sp/>and<sp/>language<sp/>models.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*hmmdir<sp/>=<sp/>cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-hmm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hmmdir<sp/>==<sp/>NULL<sp/>&amp;&amp;<sp/>hmmdir_exists(MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/en-us/en-us&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hmmdir<sp/>=<sp/>MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/en-us/en-us&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-hmm&quot;</highlight><highlight class="normal">,<sp/>hmmdir);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="189"><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*lmfile<sp/>=<sp/>cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-lm&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lmfile<sp/>==<sp/>NULL<sp/>&amp;&amp;<sp/>!cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-fsg&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-jsgf&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-lmctl&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-kws&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>!cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-keyphrase&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;&amp;<sp/>file_exists(MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/en-us/en-us.lm.bin&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lmfile<sp/>=<sp/>MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/en-us/en-us.lm.bin&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-lm&quot;</highlight><highlight class="normal">,<sp/>lmfile);</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*dictfile<sp/>=<sp/>cmd_ln_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-dict&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dictfile<sp/>==<sp/>NULL<sp/>&amp;&amp;<sp/>file_exists(MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/en-us/cmudict-en-us.dict&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dictfile<sp/>=<sp/>MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/en-us/cmudict-en-us.dict&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-dict&quot;</highlight><highlight class="normal">,<sp/>dictfile);</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Expand<sp/>acoustic<sp/>and<sp/>language<sp/>model<sp/>filenames<sp/>relative<sp/>to<sp/>installation</highlight></codeline>
<codeline lineno="209"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>path.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hmmdir<sp/>&amp;&amp;<sp/>!path_is_absolute(hmmdir)<sp/>&amp;&amp;<sp/>!hmmdir_exists(hmmdir))<sp/>{</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmphmm<sp/>=<sp/>string_join(MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/hmm/&quot;</highlight><highlight class="normal">,<sp/>hmmdir,<sp/>NULL);</highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hmmdir_exists(tmphmm))<sp/>{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-hmm&quot;</highlight><highlight class="normal">,<sp/>tmphmm);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>find<sp/>mdef<sp/>file<sp/>inside<sp/>the<sp/>model<sp/>folder<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;specified<sp/>with<sp/>-hmm<sp/>`%s&apos;\n&quot;</highlight><highlight class="normal">,<sp/>hmmdir);</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(tmphmm);</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lmfile<sp/>&amp;&amp;<sp/>!path_is_absolute(lmfile)<sp/>&amp;&amp;<sp/>!file_exists(lmfile))<sp/>{</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmplm<sp/>=<sp/>string_join(MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/lm/&quot;</highlight><highlight class="normal">,<sp/>lmfile,<sp/>NULL);</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-lm&quot;</highlight><highlight class="normal">,<sp/>tmplm);</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(tmplm);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dictfile<sp/>&amp;&amp;<sp/>!path_is_absolute(dictfile)<sp/>&amp;&amp;<sp/>!file_exists(dictfile))<sp/>{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*tmpdict<sp/>=<sp/>string_join(MODELDIR<sp/></highlight><highlight class="stringliteral">&quot;/lm/&quot;</highlight><highlight class="normal">,<sp/>dictfile,<sp/>NULL);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(config,<sp/></highlight><highlight class="stringliteral">&quot;-dict&quot;</highlight><highlight class="normal">,<sp/>tmpdict);</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(tmpdict);</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal">}</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234" refid="pocketsphinx_8h_1a391679e7edb0de1e324aa302ee820287" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a391679e7edb0de1e324aa302ee820287" kindref="member">ps_reinit</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>cmd_ln_t<sp/>*config)</highlight></codeline>
<codeline lineno="235"><highlight class="normal">{</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*keyphrase;</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>lw;</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config<sp/>&amp;&amp;<sp/>config<sp/>!=<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>)<sp/>{</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_free_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>);</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref><sp/>=<sp/>cmd_ln_retain(config);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="244"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/>err_set_debug_level(cmd_ln_int32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-debug&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>up<sp/>logging.<sp/>We<sp/>need<sp/>to<sp/>do<sp/>this<sp/>earlier<sp/>because<sp/>we<sp/>want<sp/>to<sp/>dump</highlight></codeline>
<codeline lineno="247"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>the<sp/>information<sp/>to<sp/>the<sp/>configured<sp/>log,<sp/>not<sp/>to<sp/>the<sp/>stderr.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(config<sp/>&amp;&amp;<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-logfn&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(err_set_logfile(cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-logfn&quot;</highlight><highlight class="normal">))<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Cannot<sp/>redirect<sp/>log<sp/>output\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a8bb5ef8791798b8dd9bc82b1ec016663" kindref="member">mfclogdir</ref><sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-mfclogdir&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1aa2610c52a9267ee18ca095169bf34bfd" kindref="member">rawlogdir</ref><sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-rawlogdir&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a0ed3476113fe3d63b13ac5e8da3f3b4f" kindref="member">senlogdir</ref><sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-senlogdir&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>in<sp/>some<sp/>default<sp/>arguments.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>ps_expand_model_config(ps);</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Free<sp/>old<sp/>searches<sp/>(do<sp/>this<sp/>before<sp/>other<sp/>reinit)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/>ps_free_searches(ps);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref><sp/>=<sp/>hash_table_new(3,<sp/>HASH_CASE_YES);</highlight></codeline>
<codeline lineno="265"><highlight class="normal"></highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Free<sp/>old<sp/>acmod.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a1e3345e8ef8b060fc04e88f86e6afa4a" kindref="member">acmod_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>);</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="269"><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Free<sp/>old<sp/>dictionary<sp/>(must<sp/>be<sp/>done<sp/>after<sp/>the<sp/>two<sp/>things<sp/>above)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" kindref="member">dict_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>);</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="273"><highlight class="normal"></highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Free<sp/>d2p<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" kindref="member">dict2pid_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Logmath<sp/>computation<sp/>(used<sp/>in<sp/>acmod<sp/>and<sp/>search)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref><sp/>==<sp/>NULL</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/>(logmath_get_base(ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>)<sp/>!=</highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(float64)cmd_ln_float32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-logbase&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>)</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>logmath_free(ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>);</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref><sp/>=<sp/>logmath_init</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>((float64)cmd_ln_float32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-logbase&quot;</highlight><highlight class="normal">),<sp/>0,</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_boolean_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-bestpath&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="288"><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Acoustic<sp/>model<sp/>(this<sp/>is<sp/>basically<sp/>everything<sp/>that</highlight></codeline>
<codeline lineno="290"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>uttproc.c,<sp/>senscr.c,<sp/>and<sp/>others<sp/>used<sp/>to<sp/>do)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref><sp/>=<sp/><ref refid="acmod_8c_1a6f32b623cbc3d15a1e3c5d09aba7dabf" kindref="member">acmod_init</ref>(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>,<sp/>NULL,<sp/>NULL))<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"></highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd_ln_int32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-pl_window&quot;</highlight><highlight class="normal">)<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>an<sp/>auxiliary<sp/>phone<sp/>loop<sp/>search,<sp/>which<sp/>will<sp/>run<sp/>in</highlight></codeline>
<codeline lineno="298"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>*<sp/>&quot;parallel&quot;<sp/>with<sp/>FSG<sp/>or<sp/>N-Gram<sp/>search.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref><sp/>=</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>phone_loop_search_init(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>))<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hash_table_enter(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>,</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_search_name(ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>),</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>);</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Dictionary<sp/>and<sp/>triphone<sp/>mappings<sp/>(depends<sp/>on<sp/>acmod).<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME:<sp/>pass<sp/>config,<sp/>change<sp/>arguments,<sp/>implement<sp/>LTS,<sp/>etc.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref><sp/>=<sp/><ref refid="dict_8h_1a05d8dac3e5fe5399ccb8bf7776e203e2" kindref="member">dict_init</ref>(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" kindref="member">mdef</ref>))<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref><sp/>=<sp/><ref refid="dict2pid_8c_1addd541f2275b79e284575fb11b7986e1" kindref="member">dict2pid_build</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" kindref="member">mdef</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>))<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"></highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/>lw<sp/>=<sp/>cmd_ln_float32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-lw&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="315"><highlight class="normal"></highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Determine<sp/>whether<sp/>we<sp/>are<sp/>starting<sp/>out<sp/>in<sp/>FSG<sp/>or<sp/>N-Gram<sp/>search<sp/>mode.</highlight></codeline>
<codeline lineno="317"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>If<sp/>neither<sp/>is<sp/>used<sp/>skip<sp/>search<sp/>initialization.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Load<sp/>KWS<sp/>if<sp/>one<sp/>was<sp/>specified<sp/>in<sp/>config<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="320"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((keyphrase<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-keyphrase&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1a7965534ad5e48f0b46f326d7da186a2a" kindref="member">ps_set_keyphrase</ref>(ps,<sp/>PS_DEFAULT_SEARCH,<sp/>keyphrase))</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>PS_DEFAULT_SEARCH);</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((path<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-kws&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1a0780564ad3f12179b0291ac87774cea1" kindref="member">ps_set_kws</ref>(ps,<sp/>PS_DEFAULT_SEARCH,<sp/>path))</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>PS_DEFAULT_SEARCH);</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="331"><highlight class="normal"></highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Load<sp/>an<sp/>FSG<sp/>if<sp/>one<sp/>was<sp/>specified<sp/>in<sp/>config<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((path<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-fsg&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsg_model_t<sp/>*fsg<sp/>=<sp/>fsg_model_readfile(path,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>,<sp/>lw);</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!fsg)</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref>(ps,<sp/>PS_DEFAULT_SEARCH,<sp/>fsg))<sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsg_model_free(fsg);</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fsg_model_free(fsg);</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>PS_DEFAULT_SEARCH);</highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Or<sp/>load<sp/>a<sp/>JSGF<sp/>grammar<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((path<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-jsgf&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1ae845bbf6a3e5b859e833f6cc0d1ba55f" kindref="member">ps_set_jsgf_file</ref>(ps,<sp/>PS_DEFAULT_SEARCH,<sp/>path)</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>PS_DEFAULT_SEARCH))</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((path<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-allphone&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1a66bebfccb8ece9e7bff411329f25ee5e" kindref="member">ps_set_allphone_file</ref>(ps,<sp/>PS_DEFAULT_SEARCH,<sp/>path)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>PS_DEFAULT_SEARCH))</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((path<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-lm&quot;</highlight><highlight class="normal">))<sp/>&amp;&amp;<sp/></highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>!cmd_ln_boolean_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-allphone&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1a78372effd2aa6bddf7b71d6e2e9c3776" kindref="member">ps_set_lm_file</ref>(ps,<sp/>PS_DEFAULT_SEARCH,<sp/>path)</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>||<sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>PS_DEFAULT_SEARCH))</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((path<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-lmctl&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name;</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_t<sp/>*lmset;</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_set_iter_t<sp/>*lmset_it;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!(lmset<sp/>=<sp/>ngram_model_set_read(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>path,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>)))<sp/>{</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>read<sp/>language<sp/>model<sp/>control<sp/>file:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>path);</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="374"><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal">(lmset_it<sp/>=<sp/>ngram_model_set_iter(lmset);</highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lmset_it;<sp/>lmset_it<sp/>=<sp/>ngram_model_set_iter_next(lmset_it))<sp/>{<sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_t<sp/>*lm<sp/>=<sp/>ngram_model_set_iter_model(lmset_it,<sp/>&amp;name);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;adding<sp/>search<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>name);</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm</ref>(ps,<sp/>name,<sp/>lm))<sp/>{</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_set_iter_free(lmset_it);</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_free(lmset);</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_free(lmset);</highlight></codeline>
<codeline lineno="386"><highlight class="normal"></highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-lmname&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(name)</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(ps,<sp/>name);</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;No<sp/>default<sp/>LM<sp/>name<sp/>(-lmname)<sp/>for<sp/>`-lmctl&apos;\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Initialize<sp/>performance<sp/>timer.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>.name<sp/>=<sp/></highlight><highlight class="stringliteral">&quot;decode&quot;</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_init(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="401"><highlight class="normal">}</highlight></codeline>
<codeline lineno="402"><highlight class="normal"></highlight></codeline>
<codeline lineno="403"><highlight class="normal"><ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*</highlight></codeline>
<codeline lineno="404" refid="pocketsphinx_8h_1ad033da98d0f7785d6ab89a41dac3cc7c" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ad033da98d0f7785d6ab89a41dac3cc7c" kindref="member">ps_init</ref>(cmd_ln_t<sp/>*config)</highlight></codeline>
<codeline lineno="405"><highlight class="normal">{</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps;</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!config)<sp/>{</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;No<sp/>configuration<sp/>specified&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="412"><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/>ps<sp/>=<sp/>ckd_calloc(1,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*ps));</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" kindref="member">refcount</ref><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="pocketsphinx_8h_1a391679e7edb0de1e324aa302ee820287" kindref="member">ps_reinit</ref>(ps,<sp/>config)<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1ad8fd9b79ae9f87703af3f4755b3ab567" kindref="member">ps_free</ref>(ps);</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps;</highlight></codeline>
<codeline lineno="420"><highlight class="normal">}</highlight></codeline>
<codeline lineno="421"><highlight class="normal"></highlight></codeline>
<codeline lineno="422"><highlight class="normal">arg_t<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="423" refid="pocketsphinx_8h_1ad873ea6e20f91a3284963d5c34331c58" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ad873ea6e20f91a3284963d5c34331c58" kindref="member">ps_args</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="424"><highlight class="normal">{</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps_args_def;</highlight></codeline>
<codeline lineno="426"><highlight class="normal">}</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*</highlight></codeline>
<codeline lineno="429" refid="pocketsphinx_8h_1a8d912ce9a5fea61b7b10db1750531c34" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a8d912ce9a5fea61b7b10db1750531c34" kindref="member">ps_retain</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="430"><highlight class="normal">{</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/>++ps-&gt;<ref refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" kindref="member">refcount</ref>;</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps;</highlight></codeline>
<codeline lineno="433"><highlight class="normal">}</highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="436" refid="pocketsphinx_8h_1ad8fd9b79ae9f87703af3f4755b3ab567" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ad8fd9b79ae9f87703af3f4755b3ab567" kindref="member">ps_free</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="437"><highlight class="normal">{</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(--ps-&gt;<ref refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" kindref="member">refcount</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps-&gt;<ref refid="structps__decoder__s_1aa5ab90180288b6c9039eb86b496f76aa" kindref="member">refcount</ref>;</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/>ps_free_searches(ps);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" kindref="member">dict_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>);</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" kindref="member">dict2pid_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a1e3345e8ef8b060fc04e88f86e6afa4a" kindref="member">acmod_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>);</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/>logmath_free(ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>);</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_free_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>);</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(ps);</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="450"><highlight class="normal">}</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal">cmd_ln_t<sp/>*</highlight></codeline>
<codeline lineno="453" refid="pocketsphinx_8h_1abb9256d8f7217a1e929509090df1f35b" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1abb9256d8f7217a1e929509090df1f35b" kindref="member">ps_get_config</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="454"><highlight class="normal">{</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>;</highlight></codeline>
<codeline lineno="456"><highlight class="normal">}</highlight></codeline>
<codeline lineno="457"><highlight class="normal"></highlight></codeline>
<codeline lineno="458"><highlight class="normal">logmath_t<sp/>*</highlight></codeline>
<codeline lineno="459" refid="pocketsphinx_8h_1a249cfc383b7d9111a28b550945a606b5" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a249cfc383b7d9111a28b550945a606b5" kindref="member">ps_get_logmath</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="460"><highlight class="normal">{</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>;</highlight></codeline>
<codeline lineno="462"><highlight class="normal">}</highlight></codeline>
<codeline lineno="463"><highlight class="normal"></highlight></codeline>
<codeline lineno="464"><highlight class="normal">fe_t<sp/>*</highlight></codeline>
<codeline lineno="465" refid="pocketsphinx_8h_1a6237e2822756f230b88019b533a28724" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a6237e2822756f230b88019b533a28724" kindref="member">ps_get_fe</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="466"><highlight class="normal">{</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a56eaceb9b6a1cbcccd09cf42cfa87231" kindref="member">fe</ref>;</highlight></codeline>
<codeline lineno="468"><highlight class="normal">}</highlight></codeline>
<codeline lineno="469"><highlight class="normal"></highlight></codeline>
<codeline lineno="470"><highlight class="normal">feat_t<sp/>*</highlight></codeline>
<codeline lineno="471" refid="pocketsphinx_8h_1a0d74d90f0db0782386487cc061a09218" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a0d74d90f0db0782386487cc061a09218" kindref="member">ps_get_feat</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="472"><highlight class="normal">{</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a37ec6c2b1f3ada764842e08481239b34" kindref="member">fcb</ref>;</highlight></codeline>
<codeline lineno="474"><highlight class="normal">}</highlight></codeline>
<codeline lineno="475"><highlight class="normal"></highlight></codeline>
<codeline lineno="476"><highlight class="normal"><ref refid="structps__mllr__s" kindref="compound">ps_mllr_t</ref><sp/>*</highlight></codeline>
<codeline lineno="477" refid="pocketsphinx_8h_1a85e04bcbf5366f1bdad555dbb4d73d5d" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a85e04bcbf5366f1bdad555dbb4d73d5d" kindref="member">ps_update_mllr</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/><ref refid="structps__mllr__s" kindref="compound">ps_mllr_t</ref><sp/>*mllr)</highlight></codeline>
<codeline lineno="478"><highlight class="normal">{</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="acmod_8c_1a4205b92d38db562577eafc3c432593ab" kindref="member">acmod_update_mllr</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>mllr);</highlight></codeline>
<codeline lineno="480"><highlight class="normal">}</highlight></codeline>
<codeline lineno="481"><highlight class="normal"></highlight></codeline>
<codeline lineno="482"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="483" refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a4072a93e8ce9a4229d17c9bce6ad1083" kindref="member">ps_set_search</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name)</highlight></codeline>
<codeline lineno="484"><highlight class="normal">{</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search<sp/>=<sp/>ps_find_search(ps,<sp/>name);</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!search)</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref><sp/>=<sp/>search;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Set<sp/>pl<sp/>window<sp/>depending<sp/>on<sp/>the<sp/>search<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!strcmp(PS_SEARCH_TYPE_NGRAM,<sp/>ps_search_type(search)))<sp/>{</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref><sp/>=<sp/>cmd_ln_int32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-pl_window&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="498"><highlight class="normal">}</highlight></codeline>
<codeline lineno="499"><highlight class="normal"></highlight></codeline>
<codeline lineno="500"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*</highlight></codeline>
<codeline lineno="501" refid="ps__search_8h_1ae2b728c9b05e733605d33fa19472ef8e" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1ae2b728c9b05e733605d33fa19472ef8e" kindref="member">ps_get_search</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="502"><highlight class="normal">{</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/>hash_iter_t<sp/>*search_it;</highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>name<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(search_it<sp/>=<sp/>hash_table_iter(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>);<sp/>search_it;</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search_it<sp/>=<sp/>hash_table_iter_next(search_it))<sp/>{</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hash_entry_val(search_it-&gt;ent)<sp/>==<sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>)<sp/>{</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>name<sp/>=<sp/>hash_entry_key(search_it-&gt;ent);</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="510"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="511"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="512"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>name;</highlight></codeline>
<codeline lineno="513"><highlight class="normal">}</highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="516" refid="ps__search_8h_1a300fd82f4b1621663a0d870da61497b0" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a300fd82f4b1621663a0d870da61497b0" kindref="member">ps_unset_search</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name)</highlight></codeline>
<codeline lineno="517"><highlight class="normal">{</highlight></codeline>
<codeline lineno="518"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search<sp/>=<sp/>hash_table_delete(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>,<sp/>name);</highlight></codeline>
<codeline lineno="519"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!search)</highlight></codeline>
<codeline lineno="520"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="521"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref><sp/>==<sp/>search)</highlight></codeline>
<codeline lineno="522"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="523"><highlight class="normal"><sp/><sp/><sp/><sp/>ps_search_free(search);</highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="525"><highlight class="normal">}</highlight></codeline>
<codeline lineno="526"><highlight class="normal"></highlight></codeline>
<codeline lineno="527"><highlight class="normal"><ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*</highlight></codeline>
<codeline lineno="528" refid="ps__search_8h_1a661c72707484ec2528319c9f6976fb7c" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a661c72707484ec2528319c9f6976fb7c" kindref="member">ps_search_iter</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="529"><highlight class="normal">{</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*)hash_table_iter(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>);</highlight></codeline>
<codeline lineno="531"><highlight class="normal">}</highlight></codeline>
<codeline lineno="532"><highlight class="normal"></highlight></codeline>
<codeline lineno="533"><highlight class="normal"><ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*</highlight></codeline>
<codeline lineno="534" refid="ps__search_8h_1a4bd6d4f2b19be2351987c11694eaec9a" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a4bd6d4f2b19be2351987c11694eaec9a" kindref="member">ps_search_iter_next</ref>(<ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*itor)</highlight></codeline>
<codeline lineno="535"><highlight class="normal">{</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*)hash_table_iter_next((hash_iter_t<sp/>*)itor);</highlight></codeline>
<codeline lineno="537"><highlight class="normal">}</highlight></codeline>
<codeline lineno="538"><highlight class="normal"></highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/></highlight></codeline>
<codeline lineno="540" refid="ps__search_8h_1a86d9b5968b9fe317a6335345fb9a2dd0" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a86d9b5968b9fe317a6335345fb9a2dd0" kindref="member">ps_search_iter_val</ref>(<ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*itor)</highlight></codeline>
<codeline lineno="541"><highlight class="normal">{</highlight></codeline>
<codeline lineno="542"><highlight class="normal"><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*)(((hash_iter_t<sp/>*)itor)-&gt;ent-&gt;key);</highlight></codeline>
<codeline lineno="543"><highlight class="normal">}</highlight></codeline>
<codeline lineno="544"><highlight class="normal"></highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="546" refid="ps__search_8h_1a41e404de59cbd7bfc32f2da3ec7e6137" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a41e404de59cbd7bfc32f2da3ec7e6137" kindref="member">ps_search_iter_free</ref>(<ref refid="structps__search__iter__s" kindref="compound">ps_search_iter_t</ref><sp/>*itor)</highlight></codeline>
<codeline lineno="547"><highlight class="normal">{</highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/><sp/><sp/>hash_table_iter_free((hash_iter_t<sp/>*)itor);</highlight></codeline>
<codeline lineno="549"><highlight class="normal">}</highlight></codeline>
<codeline lineno="550"><highlight class="normal"></highlight></codeline>
<codeline lineno="551"><highlight class="normal">ngram_model_t<sp/>*</highlight></codeline>
<codeline lineno="552" refid="ps__search_8h_1af55ad6ec21a7e67845f3c74149a34b1a" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1af55ad6ec21a7e67845f3c74149a34b1a" kindref="member">ps_get_lm</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name)</highlight></codeline>
<codeline lineno="553"><highlight class="normal">{</highlight></codeline>
<codeline lineno="554"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search<sp/>=<sp/><sp/>ps_find_search(ps,<sp/>name);</highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(search<sp/>&amp;&amp;<sp/>strcmp(PS_SEARCH_TYPE_NGRAM,<sp/>ps_search_type(search)))</highlight></codeline>
<codeline lineno="556"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>search<sp/>?<sp/>((<ref refid="structngram__search__s" kindref="compound">ngram_search_t</ref><sp/>*)<sp/>search)-&gt;lmset<sp/>:<sp/>NULL;</highlight></codeline>
<codeline lineno="558"><highlight class="normal">}</highlight></codeline>
<codeline lineno="559"><highlight class="normal"></highlight></codeline>
<codeline lineno="560"><highlight class="normal">fsg_model_t<sp/>*</highlight></codeline>
<codeline lineno="561" refid="ps__search_8h_1a3a15f664d2d004d610e999adb4339dbe" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a3a15f664d2d004d610e999adb4339dbe" kindref="member">ps_get_fsg</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name)</highlight></codeline>
<codeline lineno="562"><highlight class="normal">{</highlight></codeline>
<codeline lineno="563"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search<sp/>=<sp/>ps_find_search(ps,<sp/>name);</highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(search<sp/>&amp;&amp;<sp/>strcmp(PS_SEARCH_TYPE_FSG,<sp/>ps_search_type(search)))</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>search<sp/>?<sp/>((<ref refid="structfsg__search__s" kindref="compound">fsg_search_t</ref><sp/>*)<sp/>search)-&gt;fsg<sp/>:<sp/>NULL;</highlight></codeline>
<codeline lineno="567"><highlight class="normal">}</highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*</highlight></codeline>
<codeline lineno="570" refid="ps__search_8h_1a8e2e66391b7c1e6cd1aac24d635ed3ea" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a8e2e66391b7c1e6cd1aac24d635ed3ea" kindref="member">ps_get_kws</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>name)</highlight></codeline>
<codeline lineno="571"><highlight class="normal">{</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search<sp/>=<sp/>ps_find_search(ps,<sp/>name);</highlight></codeline>
<codeline lineno="573"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(search<sp/>&amp;&amp;<sp/>strcmp(PS_SEARCH_TYPE_KWS,<sp/>ps_search_type(search)))</highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="575"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>search<sp/>?<sp/>kws_search_get_keywords(search)<sp/>:<sp/>NULL;</highlight></codeline>
<codeline lineno="576"><highlight class="normal">}</highlight></codeline>
<codeline lineno="577"><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="579"><highlight class="normal">set_search_internal(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search)</highlight></codeline>
<codeline lineno="580"><highlight class="normal">{</highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*old_search;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!search)</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a2a33b7698fb237b42e007788f65cd46c" kindref="member">pls</ref><sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>;</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/><sp/><sp/>old_search<sp/>=<sp/>(<ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*)<sp/>hash_table_replace(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>,<sp/>ps_search_name(search),<sp/>search);</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(old_search<sp/>!=<sp/>search)</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_search_free(old_search);</highlight></codeline>
<codeline lineno="590"><highlight class="normal"></highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="592"><highlight class="normal">}</highlight></codeline>
<codeline lineno="593"><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="595" refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/>ngram_model_t<sp/>*lm)</highlight></codeline>
<codeline lineno="596"><highlight class="normal">{</highlight></codeline>
<codeline lineno="597"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search;</highlight></codeline>
<codeline lineno="598"><highlight class="normal"><sp/><sp/><sp/><sp/>search<sp/>=<sp/><ref refid="ngram__search_8c_1a04f80b377c847026254fb85596e2f43c" kindref="member">ngram_search_init</ref>(name,<sp/>lm,<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="599"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_search_internal(ps,<sp/>search);</highlight></codeline>
<codeline lineno="600"><highlight class="normal">}</highlight></codeline>
<codeline lineno="601"><highlight class="normal"></highlight></codeline>
<codeline lineno="602"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="603" refid="ps__search_8h_1a78372effd2aa6bddf7b71d6e2e9c3776" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a78372effd2aa6bddf7b71d6e2e9c3776" kindref="member">ps_set_lm_file</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path)</highlight></codeline>
<codeline lineno="604"><highlight class="normal">{</highlight></codeline>
<codeline lineno="605"><highlight class="normal"><sp/><sp/>ngram_model_t<sp/>*lm;</highlight></codeline>
<codeline lineno="606"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="607"><highlight class="normal"></highlight></codeline>
<codeline lineno="608"><highlight class="normal"><sp/><sp/>lm<sp/>=<sp/>ngram_model_read(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>path,<sp/>NGRAM_AUTO,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>);</highlight></codeline>
<codeline lineno="609"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!lm)</highlight></codeline>
<codeline lineno="610"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="611"><highlight class="normal"></highlight></codeline>
<codeline lineno="612"><highlight class="normal"><sp/><sp/>result<sp/>=<sp/><ref refid="ps__search_8h_1aa76b495c63c665a21a49d7cb51c66d74" kindref="member">ps_set_lm</ref>(ps,<sp/>name,<sp/>lm);</highlight></codeline>
<codeline lineno="613"><highlight class="normal"><sp/><sp/>ngram_model_free(lm);</highlight></codeline>
<codeline lineno="614"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="615"><highlight class="normal">}</highlight></codeline>
<codeline lineno="616"><highlight class="normal"></highlight></codeline>
<codeline lineno="617"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="618" refid="ps__search_8h_1aa38c96913dd3a06cbab54ce834af5141" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1aa38c96913dd3a06cbab54ce834af5141" kindref="member">ps_set_allphone</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/>ngram_model_t<sp/>*lm)</highlight></codeline>
<codeline lineno="619"><highlight class="normal">{</highlight></codeline>
<codeline lineno="620"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search;</highlight></codeline>
<codeline lineno="621"><highlight class="normal"><sp/><sp/><sp/><sp/>search<sp/>=<sp/>allphone_search_init(name,<sp/>lm,<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="622"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_search_internal(ps,<sp/>search);</highlight></codeline>
<codeline lineno="623"><highlight class="normal">}</highlight></codeline>
<codeline lineno="624"><highlight class="normal"></highlight></codeline>
<codeline lineno="625"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="626" refid="ps__search_8h_1a66bebfccb8ece9e7bff411329f25ee5e" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a66bebfccb8ece9e7bff411329f25ee5e" kindref="member">ps_set_allphone_file</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path)</highlight></codeline>
<codeline lineno="627"><highlight class="normal">{</highlight></codeline>
<codeline lineno="628"><highlight class="normal"><sp/><sp/>ngram_model_t<sp/>*lm;</highlight></codeline>
<codeline lineno="629"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="630"><highlight class="normal"></highlight></codeline>
<codeline lineno="631"><highlight class="normal"><sp/><sp/>lm<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="632"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(path)</highlight></codeline>
<codeline lineno="633"><highlight class="normal"><sp/><sp/><sp/><sp/>lm<sp/>=<sp/>ngram_model_read(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>path,<sp/>NGRAM_AUTO,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>);</highlight></codeline>
<codeline lineno="634"><highlight class="normal"><sp/><sp/>result<sp/>=<sp/><ref refid="ps__search_8h_1aa38c96913dd3a06cbab54ce834af5141" kindref="member">ps_set_allphone</ref>(ps,<sp/>name,<sp/>lm);</highlight></codeline>
<codeline lineno="635"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lm)</highlight></codeline>
<codeline lineno="636"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_free(lm);</highlight></codeline>
<codeline lineno="637"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="638"><highlight class="normal">}</highlight></codeline>
<codeline lineno="639"><highlight class="normal"></highlight></codeline>
<codeline lineno="640"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="641" refid="ps__search_8h_1a0780564ad3f12179b0291ac87774cea1" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a0780564ad3f12179b0291ac87774cea1" kindref="member">ps_set_kws</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*keyfile)</highlight></codeline>
<codeline lineno="642"><highlight class="normal">{</highlight></codeline>
<codeline lineno="643"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search;</highlight></codeline>
<codeline lineno="644"><highlight class="normal"><sp/><sp/><sp/><sp/>search<sp/>=<sp/>kws_search_init(name,<sp/>NULL,<sp/>keyfile,<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="645"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_search_internal(ps,<sp/>search);</highlight></codeline>
<codeline lineno="646"><highlight class="normal">}</highlight></codeline>
<codeline lineno="647"><highlight class="normal"></highlight></codeline>
<codeline lineno="648"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="649" refid="ps__search_8h_1a7965534ad5e48f0b46f326d7da186a2a" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a7965534ad5e48f0b46f326d7da186a2a" kindref="member">ps_set_keyphrase</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*keyphrase)</highlight></codeline>
<codeline lineno="650"><highlight class="normal">{</highlight></codeline>
<codeline lineno="651"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search;</highlight></codeline>
<codeline lineno="652"><highlight class="normal"><sp/><sp/><sp/><sp/>search<sp/>=<sp/>kws_search_init(name,<sp/>keyphrase,<sp/>NULL,<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="653"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_search_internal(ps,<sp/>search);</highlight></codeline>
<codeline lineno="654"><highlight class="normal">}</highlight></codeline>
<codeline lineno="655"><highlight class="normal"></highlight></codeline>
<codeline lineno="656"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="657" refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/>fsg_model_t<sp/>*fsg)</highlight></codeline>
<codeline lineno="658"><highlight class="normal">{</highlight></codeline>
<codeline lineno="659"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search;</highlight></codeline>
<codeline lineno="660"><highlight class="normal"><sp/><sp/><sp/><sp/>search<sp/>=<sp/>fsg_search_init(name,<sp/>fsg,<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="661"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>set_search_internal(ps,<sp/>search);</highlight></codeline>
<codeline lineno="662"><highlight class="normal">}</highlight></codeline>
<codeline lineno="663"><highlight class="normal"></highlight></codeline>
<codeline lineno="664"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="665" refid="ps__search_8h_1ae845bbf6a3e5b859e833f6cc0d1ba55f" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1ae845bbf6a3e5b859e833f6cc0d1ba55f" kindref="member">ps_set_jsgf_file</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*path)</highlight></codeline>
<codeline lineno="666"><highlight class="normal">{</highlight></codeline>
<codeline lineno="667"><highlight class="normal"><sp/><sp/>fsg_model_t<sp/>*fsg;</highlight></codeline>
<codeline lineno="668"><highlight class="normal"><sp/><sp/>jsgf_rule_t<sp/>*rule;</highlight></codeline>
<codeline lineno="669"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*toprule;</highlight></codeline>
<codeline lineno="670"><highlight class="normal"><sp/><sp/>jsgf_t<sp/>*jsgf<sp/>=<sp/>jsgf_parse_file(path,<sp/>NULL);</highlight></codeline>
<codeline lineno="671"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>lw;</highlight></codeline>
<codeline lineno="672"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="673"><highlight class="normal"></highlight></codeline>
<codeline lineno="674"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!jsgf)</highlight></codeline>
<codeline lineno="675"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="676"><highlight class="normal"></highlight></codeline>
<codeline lineno="677"><highlight class="normal"><sp/><sp/>rule<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="678"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Take<sp/>the<sp/>-toprule<sp/>if<sp/>specified.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="679"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((toprule<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-toprule&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="680"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rule<sp/>=<sp/>jsgf_get_rule(jsgf,<sp/>toprule);</highlight></codeline>
<codeline lineno="681"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rule<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="682"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Start<sp/>rule<sp/>%s<sp/>not<sp/>found\n&quot;</highlight><highlight class="normal">,<sp/>toprule);</highlight></codeline>
<codeline lineno="683"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jsgf_grammar_free(jsgf);</highlight></codeline>
<codeline lineno="684"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="685"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="686"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="687"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rule<sp/>=<sp/>jsgf_get_public_rule(jsgf);</highlight></codeline>
<codeline lineno="688"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rule<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="689"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;No<sp/>public<sp/>rules<sp/>found<sp/>in<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>path);</highlight></codeline>
<codeline lineno="690"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>jsgf_grammar_free(jsgf);</highlight></codeline>
<codeline lineno="691"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="692"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="693"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="694"><highlight class="normal"></highlight></codeline>
<codeline lineno="695"><highlight class="normal"><sp/><sp/>lw<sp/>=<sp/>cmd_ln_float32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-lw&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="696"><highlight class="normal"><sp/><sp/>fsg<sp/>=<sp/>jsgf_build_fsg(jsgf,<sp/>rule,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>,<sp/>lw);</highlight></codeline>
<codeline lineno="697"><highlight class="normal"><sp/><sp/>result<sp/>=<sp/><ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref>(ps,<sp/>name,<sp/>fsg);</highlight></codeline>
<codeline lineno="698"><highlight class="normal"><sp/><sp/>fsg_model_free(fsg);</highlight></codeline>
<codeline lineno="699"><highlight class="normal"><sp/><sp/>jsgf_grammar_free(jsgf);</highlight></codeline>
<codeline lineno="700"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="701"><highlight class="normal">}</highlight></codeline>
<codeline lineno="702"><highlight class="normal"></highlight></codeline>
<codeline lineno="703"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/></highlight></codeline>
<codeline lineno="704" refid="ps__search_8h_1a3c51b0eab27ac9df20ee54e1d87b3ca3" refkind="member"><highlight class="normal"><ref refid="ps__search_8h_1a3c51b0eab27ac9df20ee54e1d87b3ca3" kindref="member">ps_set_jsgf_string</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*jsgf_string)</highlight></codeline>
<codeline lineno="705"><highlight class="normal">{</highlight></codeline>
<codeline lineno="706"><highlight class="normal"><sp/><sp/>fsg_model_t<sp/>*fsg;</highlight></codeline>
<codeline lineno="707"><highlight class="normal"><sp/><sp/>jsgf_rule_t<sp/>*rule;</highlight></codeline>
<codeline lineno="708"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*toprule;</highlight></codeline>
<codeline lineno="709"><highlight class="normal"><sp/><sp/>jsgf_t<sp/>*jsgf<sp/>=<sp/>jsgf_parse_string(jsgf_string,<sp/>NULL);</highlight></codeline>
<codeline lineno="710"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>lw;</highlight></codeline>
<codeline lineno="711"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="712"><highlight class="normal"></highlight></codeline>
<codeline lineno="713"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!jsgf)</highlight></codeline>
<codeline lineno="714"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="715"><highlight class="normal"></highlight></codeline>
<codeline lineno="716"><highlight class="normal"><sp/><sp/>rule<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="717"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Take<sp/>the<sp/>-toprule<sp/>if<sp/>specified.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="718"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((toprule<sp/>=<sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-toprule&quot;</highlight><highlight class="normal">)))<sp/>{</highlight></codeline>
<codeline lineno="719"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rule<sp/>=<sp/>jsgf_get_rule(jsgf,<sp/>toprule);</highlight></codeline>
<codeline lineno="720"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rule<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="721"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Start<sp/>rule<sp/>%s<sp/>not<sp/>found\n&quot;</highlight><highlight class="normal">,<sp/>toprule);</highlight></codeline>
<codeline lineno="722"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="723"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="724"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="725"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>rule<sp/>=<sp/>jsgf_get_public_rule(jsgf);</highlight></codeline>
<codeline lineno="726"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rule<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="727"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;No<sp/>public<sp/>rules<sp/>found<sp/>in<sp/>input<sp/>string\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="728"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="729"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="730"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="731"><highlight class="normal"></highlight></codeline>
<codeline lineno="732"><highlight class="normal"><sp/><sp/>lw<sp/>=<sp/>cmd_ln_float32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-lw&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="733"><highlight class="normal"><sp/><sp/>fsg<sp/>=<sp/>jsgf_build_fsg(jsgf,<sp/>rule,<sp/>ps-&gt;<ref refid="structps__decoder__s_1abd17fe329f2fb219c5a534f3217c5b95" kindref="member">lmath</ref>,<sp/>lw);</highlight></codeline>
<codeline lineno="734"><highlight class="normal"><sp/><sp/>result<sp/>=<sp/><ref refid="ps__search_8h_1afde3539cbbf8c67cb98a02ca779055af" kindref="member">ps_set_fsg</ref>(ps,<sp/>name,<sp/>fsg);</highlight></codeline>
<codeline lineno="735"><highlight class="normal"><sp/><sp/>fsg_model_free(fsg);</highlight></codeline>
<codeline lineno="736"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>result;</highlight></codeline>
<codeline lineno="737"><highlight class="normal">}</highlight></codeline>
<codeline lineno="738"><highlight class="normal"></highlight></codeline>
<codeline lineno="739"><highlight class="normal"></highlight></codeline>
<codeline lineno="740"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="741" refid="pocketsphinx_8h_1a824f46e51681d931b7e2706a86c3d86f" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a824f46e51681d931b7e2706a86c3d86f" kindref="member">ps_load_dict</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*dictfile,</highlight></codeline>
<codeline lineno="742"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*fdictfile,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*format)</highlight></codeline>
<codeline lineno="743"><highlight class="normal">{</highlight></codeline>
<codeline lineno="744"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_t<sp/>*newconfig;</highlight></codeline>
<codeline lineno="745"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structdict2pid__t" kindref="compound">dict2pid_t</ref><sp/>*d2p;</highlight></codeline>
<codeline lineno="746"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structdict__t" kindref="compound">dict_t</ref><sp/>*dict;</highlight></codeline>
<codeline lineno="747"><highlight class="normal"><sp/><sp/><sp/><sp/>hash_iter_t<sp/>*search_it;</highlight></codeline>
<codeline lineno="748"><highlight class="normal"></highlight></codeline>
<codeline lineno="749"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>a<sp/>new<sp/>scratch<sp/>config<sp/>to<sp/>load<sp/>this<sp/>dict<sp/>(so<sp/>existing<sp/>one</highlight></codeline>
<codeline lineno="750"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>won&apos;t<sp/>be<sp/>affected<sp/>if<sp/>it<sp/>fails)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="751"><highlight class="normal"><sp/><sp/><sp/><sp/>newconfig<sp/>=<sp/>cmd_ln_init(NULL,<sp/><ref refid="pocketsphinx_8h_1ad873ea6e20f91a3284963d5c34331c58" kindref="member">ps_args</ref>(),<sp/>TRUE,<sp/>NULL);</highlight></codeline>
<codeline lineno="752"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_set_boolean_r(newconfig,<sp/></highlight><highlight class="stringliteral">&quot;-dictcase&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="753"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_boolean_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-dictcase&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="754"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(newconfig,<sp/></highlight><highlight class="stringliteral">&quot;-dict&quot;</highlight><highlight class="normal">,<sp/>dictfile);</highlight></codeline>
<codeline lineno="755"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fdictfile)</highlight></codeline>
<codeline lineno="756"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(newconfig,<sp/></highlight><highlight class="stringliteral">&quot;-fdict&quot;</highlight><highlight class="normal">,<sp/>fdictfile);</highlight></codeline>
<codeline lineno="757"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="758"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(newconfig,<sp/></highlight><highlight class="stringliteral">&quot;-fdict&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="759"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-fdict&quot;</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="760"><highlight class="normal"></highlight></codeline>
<codeline lineno="761"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Try<sp/>to<sp/>load<sp/>it.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="762"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((dict<sp/>=<sp/><ref refid="dict_8h_1a05d8dac3e5fe5399ccb8bf7776e203e2" kindref="member">dict_init</ref>(newconfig,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" kindref="member">mdef</ref>))<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="763"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_free_r(newconfig);</highlight></codeline>
<codeline lineno="764"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="765"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="766"><highlight class="normal"></highlight></codeline>
<codeline lineno="767"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Reinit<sp/>the<sp/>dict2pid.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="768"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((d2p<sp/>=<sp/><ref refid="dict2pid_8c_1addd541f2275b79e284575fb11b7986e1" kindref="member">dict2pid_build</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" kindref="member">mdef</ref>,<sp/>dict))<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="769"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_free_r(newconfig);</highlight></codeline>
<codeline lineno="770"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="771"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="772"><highlight class="normal"></highlight></codeline>
<codeline lineno="773"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Success!<sp/><sp/>Update<sp/>the<sp/>existing<sp/>config<sp/>to<sp/>reflect<sp/>new<sp/>dicts<sp/>and</highlight></codeline>
<codeline lineno="774"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>drop<sp/>everything<sp/>into<sp/>place.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="775"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_free_r(newconfig);</highlight></codeline>
<codeline lineno="776"><highlight class="normal"><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-dict&quot;</highlight><highlight class="normal">,<sp/>dictfile);</highlight></codeline>
<codeline lineno="777"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fdictfile)</highlight></codeline>
<codeline lineno="778"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_set_str_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-fdict&quot;</highlight><highlight class="normal">,<sp/>fdictfile);</highlight></codeline>
<codeline lineno="779"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" kindref="member">dict_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>);</highlight></codeline>
<codeline lineno="780"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref><sp/>=<sp/>dict;</highlight></codeline>
<codeline lineno="781"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" kindref="member">dict2pid_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="782"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref><sp/>=<sp/>d2p;</highlight></codeline>
<codeline lineno="783"><highlight class="normal"></highlight></codeline>
<codeline lineno="784"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>And<sp/>tell<sp/>all<sp/>searches<sp/>to<sp/>reconfigure<sp/>themselves.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="785"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(search_it<sp/>=<sp/>hash_table_iter(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>);<sp/>search_it;</highlight></codeline>
<codeline lineno="786"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search_it<sp/>=<sp/>hash_table_iter_next(search_it))<sp/>{</highlight></codeline>
<codeline lineno="787"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps_search_reinit(hash_entry_val(search_it-&gt;ent),<sp/>dict,<sp/>d2p)<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="788"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hash_table_iter_free(search_it);</highlight></codeline>
<codeline lineno="789"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="790"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="791"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="792"><highlight class="normal"></highlight></codeline>
<codeline lineno="793"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="794"><highlight class="normal">}</highlight></codeline>
<codeline lineno="795"><highlight class="normal"></highlight></codeline>
<codeline lineno="796"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="797" refid="pocketsphinx_8h_1a5e278377cc57d921591ce95b980760d5" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a5e278377cc57d921591ce95b980760d5" kindref="member">ps_save_dict</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*dictfile,</highlight></codeline>
<codeline lineno="798"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*format)</highlight></codeline>
<codeline lineno="799"><highlight class="normal">{</highlight></codeline>
<codeline lineno="800"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="dict_8h_1a4bfa8e3b7b9ff30165375d1c97bb04b8" kindref="member">dict_write</ref>(ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>dictfile,<sp/>format);</highlight></codeline>
<codeline lineno="801"><highlight class="normal">}</highlight></codeline>
<codeline lineno="802"><highlight class="normal"></highlight></codeline>
<codeline lineno="803"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="804" refid="pocketsphinx_8h_1a5f3c4fcdbef34915c4e785ac9a1c6005" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a5f3c4fcdbef34915c4e785ac9a1c6005" kindref="member">ps_add_word</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,</highlight></codeline>
<codeline lineno="805"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*word,</highlight></codeline>
<codeline lineno="806"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*phones,</highlight></codeline>
<codeline lineno="807"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>update)</highlight></codeline>
<codeline lineno="808"><highlight class="normal">{</highlight></codeline>
<codeline lineno="809"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>wid;</highlight></codeline>
<codeline lineno="810"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="s3types_8h_1ae5f70241ce62a79747f0611029a6409d" kindref="member">s3cipid_t</ref><sp/>*pron;</highlight></codeline>
<codeline lineno="811"><highlight class="normal"><sp/><sp/><sp/><sp/>hash_iter_t<sp/>*search_it;</highlight></codeline>
<codeline lineno="812"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>**phonestr,<sp/>*tmp;</highlight></codeline>
<codeline lineno="813"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>np,<sp/>i,<sp/>rv;</highlight></codeline>
<codeline lineno="814"><highlight class="normal"></highlight></codeline>
<codeline lineno="815"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Parse<sp/>phones<sp/>into<sp/>an<sp/>array<sp/>of<sp/>phone<sp/>IDs.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="816"><highlight class="normal"><sp/><sp/><sp/><sp/>tmp<sp/>=<sp/>ckd_salloc(phones);</highlight></codeline>
<codeline lineno="817"><highlight class="normal"><sp/><sp/><sp/><sp/>np<sp/>=<sp/>str2words(tmp,<sp/>NULL,<sp/>0);</highlight></codeline>
<codeline lineno="818"><highlight class="normal"><sp/><sp/><sp/><sp/>phonestr<sp/>=<sp/>ckd_calloc(np,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*phonestr));</highlight></codeline>
<codeline lineno="819"><highlight class="normal"><sp/><sp/><sp/><sp/>str2words(tmp,<sp/>phonestr,<sp/>np);</highlight></codeline>
<codeline lineno="820"><highlight class="normal"><sp/><sp/><sp/><sp/>pron<sp/>=<sp/>ckd_calloc(np,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*pron));</highlight></codeline>
<codeline lineno="821"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>0;<sp/>i<sp/>&lt;<sp/>np;<sp/>++i)<sp/>{</highlight></codeline>
<codeline lineno="822"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pron[i]<sp/>=<sp/><ref refid="bin__mdef_8h_1af592f710731474b77166a29530716672" kindref="member">bin_mdef_ciphone_id</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a351548ff5547c29b4a684e10434a51dd" kindref="member">mdef</ref>,<sp/>phonestr[i]);</highlight></codeline>
<codeline lineno="823"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pron[i]<sp/>==<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="824"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Unknown<sp/>phone<sp/>%s<sp/>in<sp/>phone<sp/>string<sp/>%s\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="825"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>phonestr[i],<sp/>tmp);</highlight></codeline>
<codeline lineno="826"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(phonestr);</highlight></codeline>
<codeline lineno="827"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(tmp);</highlight></codeline>
<codeline lineno="828"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(pron);</highlight></codeline>
<codeline lineno="829"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="830"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="831"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="832"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>longer<sp/>needed.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="833"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(phonestr);</highlight></codeline>
<codeline lineno="834"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(tmp);</highlight></codeline>
<codeline lineno="835"><highlight class="normal"></highlight></codeline>
<codeline lineno="836"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Add<sp/>it<sp/>to<sp/>the<sp/>dictionary.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="837"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((wid<sp/>=<sp/><ref refid="dict_8h_1a24888ac8e24259e553c43c4655b38432" kindref="member">dict_add_word</ref>(ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>word,<sp/>pron,<sp/>np))<sp/>==<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="838"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(pron);</highlight></codeline>
<codeline lineno="839"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="840"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="841"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>No<sp/>longer<sp/>needed.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="842"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(pron);</highlight></codeline>
<codeline lineno="843"><highlight class="normal"></highlight></codeline>
<codeline lineno="844"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Now<sp/>we<sp/>also<sp/>have<sp/>to<sp/>add<sp/>it<sp/>to<sp/>dict2pid.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="845"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict2pid_8c_1aa94120dcea4b17807576e29484b8a008" kindref="member">dict2pid_add_word</ref>(ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>,<sp/>wid);</highlight></codeline>
<codeline lineno="846"><highlight class="normal"></highlight></codeline>
<codeline lineno="847"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>TODO:<sp/>we<sp/>definitely<sp/>need<sp/>to<sp/>refactor<sp/>this<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="848"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(search_it<sp/>=<sp/>hash_table_iter(ps-&gt;<ref refid="structps__decoder__s_1a43bca42790684eefb8d01a0aef6fa530" kindref="member">searches</ref>);<sp/>search_it;</highlight></codeline>
<codeline lineno="849"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search_it<sp/>=<sp/>hash_table_iter_next(search_it))<sp/>{</highlight></codeline>
<codeline lineno="850"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search<sp/>=<sp/>hash_entry_val(search_it-&gt;ent);</highlight></codeline>
<codeline lineno="851"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!strcmp(PS_SEARCH_TYPE_NGRAM,<sp/>ps_search_type(search)))<sp/>{</highlight></codeline>
<codeline lineno="852"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ngram_model_t<sp/>*lmset<sp/>=<sp/>((<ref refid="structngram__search__s" kindref="compound">ngram_search_t</ref><sp/>*)<sp/>search)-&gt;lmset;</highlight></codeline>
<codeline lineno="853"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ngram_model_add_word(lmset,<sp/>word,<sp/>1.0)<sp/>==<sp/>NGRAM_INVALID_WID)<sp/>{</highlight></codeline>
<codeline lineno="854"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hash_table_iter_free(search_it);</highlight></codeline>
<codeline lineno="855"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="856"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="857"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="858"><highlight class="normal"></highlight></codeline>
<codeline lineno="859"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(update)<sp/>{</highlight></codeline>
<codeline lineno="860"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((rv<sp/>=<sp/>ps_search_reinit(search,<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1ae6515cbc261686f3f3bbd95719f79793" kindref="member">d2p</ref>)<sp/>&lt;<sp/>0))<sp/>{</highlight></codeline>
<codeline lineno="861"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hash_table_iter_free(search_it);</highlight></codeline>
<codeline lineno="862"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="863"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="864"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="865"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="866"><highlight class="normal"></highlight></codeline>
<codeline lineno="867"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Rebuild<sp/>the<sp/>widmap<sp/>and<sp/>search<sp/>tree<sp/>if<sp/>requested.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="868"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>wid;</highlight></codeline>
<codeline lineno="869"><highlight class="normal">}</highlight></codeline>
<codeline lineno="870"><highlight class="normal"></highlight></codeline>
<codeline lineno="871"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="872" refid="pocketsphinx_8h_1ab0a242c645a68a553c2e7c62c96e4ce2" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ab0a242c645a68a553c2e7c62c96e4ce2" kindref="member">ps_lookup_word</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*word)</highlight></codeline>
<codeline lineno="873"><highlight class="normal">{</highlight></codeline>
<codeline lineno="874"><highlight class="normal"><sp/><sp/><sp/><sp/>s3wid_t<sp/>wid;</highlight></codeline>
<codeline lineno="875"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>phlen,<sp/>j;</highlight></codeline>
<codeline lineno="876"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*phones;</highlight></codeline>
<codeline lineno="877"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structdict__t" kindref="compound">dict_t</ref><sp/>*dict<sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1aef6228c17907cc1d0cef835b238b5d91" kindref="member">dict</ref>;</highlight></codeline>
<codeline lineno="878"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="879"><highlight class="normal"><sp/><sp/><sp/><sp/>wid<sp/>=<sp/><ref refid="dict_8h_1ad3729eb1a02a9a321e17933f7e90c80e" kindref="member">dict_wordid</ref>(dict,<sp/>word);</highlight></codeline>
<codeline lineno="880"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(wid<sp/>==<sp/><ref refid="s3types_8h_1a5c42410b7125da611210c5a4be29898b" kindref="member">BAD_S3WID</ref>)</highlight></codeline>
<codeline lineno="881"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="882"><highlight class="normal"></highlight></codeline>
<codeline lineno="883"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(phlen<sp/>=<sp/>j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>dict_pronlen(dict,<sp/>wid);<sp/>++j)</highlight></codeline>
<codeline lineno="884"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>phlen<sp/>+=<sp/>strlen(<ref refid="dict_8h_1a8587d077f5303554df0e26a181bfb0bf" kindref="member">dict_ciphone_str</ref>(dict,<sp/>wid,<sp/>j))<sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="885"><highlight class="normal"><sp/><sp/><sp/><sp/>phones<sp/>=<sp/>ckd_calloc(1,<sp/>phlen);</highlight></codeline>
<codeline lineno="886"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(j<sp/>=<sp/>0;<sp/>j<sp/>&lt;<sp/>dict_pronlen(dict,<sp/>wid);<sp/>++j)<sp/>{</highlight></codeline>
<codeline lineno="887"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strcat(phones,<sp/><ref refid="dict_8h_1a8587d077f5303554df0e26a181bfb0bf" kindref="member">dict_ciphone_str</ref>(dict,<sp/>wid,<sp/>j));</highlight></codeline>
<codeline lineno="888"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(j<sp/>!=<sp/>dict_pronlen(dict,<sp/>wid)<sp/>-<sp/>1)</highlight></codeline>
<codeline lineno="889"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>strcat(phones,<sp/></highlight><highlight class="stringliteral">&quot;<sp/>&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="890"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="891"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>phones;</highlight></codeline>
<codeline lineno="892"><highlight class="normal">}</highlight></codeline>
<codeline lineno="893"><highlight class="normal"></highlight></codeline>
<codeline lineno="894"><highlight class="normal"></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="895" refid="pocketsphinx_8h_1a43b378f9c42bcb19fdff0ebe71c25adb" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a43b378f9c42bcb19fdff0ebe71c25adb" kindref="member">ps_decode_raw</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>FILE<sp/>*rawfh,</highlight></codeline>
<codeline lineno="896"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>maxsamps)</highlight></codeline>
<codeline lineno="897"><highlight class="normal">{</highlight></codeline>
<codeline lineno="898"><highlight class="normal"><sp/><sp/><sp/><sp/>int16<sp/>*data;</highlight></codeline>
<codeline lineno="899"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>total,<sp/>pos,<sp/>endpos;</highlight></codeline>
<codeline lineno="900"><highlight class="normal"></highlight></codeline>
<codeline lineno="901"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1a89be3b2a8f83291a225db0bcd9ee65b2" kindref="member">ps_start_stream</ref>(ps);</highlight></codeline>
<codeline lineno="902"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1ade3909b1c12c1b70afe284639e70cbff" kindref="member">ps_start_utt</ref>(ps);</highlight></codeline>
<codeline lineno="903"><highlight class="normal"></highlight></codeline>
<codeline lineno="904"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>this<sp/>file<sp/>is<sp/>seekable<sp/>or<sp/>maxsamps<sp/>is<sp/>specified,<sp/>then<sp/>decode</highlight></codeline>
<codeline lineno="905"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>the<sp/>whole<sp/>thing<sp/>at<sp/>once.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="906"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(maxsamps<sp/>!=<sp/>-1)<sp/>{</highlight></codeline>
<codeline lineno="907"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>ckd_calloc(maxsamps,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*data));</highlight></codeline>
<codeline lineno="908"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total<sp/>=<sp/>fread(data,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*data),<sp/>maxsamps,<sp/>rawfh);</highlight></codeline>
<codeline lineno="909"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1a572ad08651b4caae820d178a12c8f95f" kindref="member">ps_process_raw</ref>(ps,<sp/>data,<sp/>total,<sp/>FALSE,<sp/>TRUE);</highlight></codeline>
<codeline lineno="910"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(data);</highlight></codeline>
<codeline lineno="911"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((pos<sp/>=<sp/>ftell(rawfh))<sp/>&gt;=<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="912"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fseek(rawfh,<sp/>0,<sp/>SEEK_END);</highlight></codeline>
<codeline lineno="913"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>endpos<sp/>=<sp/>ftell(rawfh);</highlight></codeline>
<codeline lineno="914"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>fseek(rawfh,<sp/>pos,<sp/>SEEK_SET);</highlight></codeline>
<codeline lineno="915"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>maxsamps<sp/>=<sp/>endpos<sp/>-<sp/>pos;</highlight></codeline>
<codeline lineno="916"><highlight class="normal"></highlight></codeline>
<codeline lineno="917"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>ckd_calloc(maxsamps,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*data));</highlight></codeline>
<codeline lineno="918"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total<sp/>=<sp/>fread(data,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*data),<sp/>maxsamps,<sp/>rawfh);</highlight></codeline>
<codeline lineno="919"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1a572ad08651b4caae820d178a12c8f95f" kindref="member">ps_process_raw</ref>(ps,<sp/>data,<sp/>total,<sp/>FALSE,<sp/>TRUE);</highlight></codeline>
<codeline lineno="920"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(data);</highlight></codeline>
<codeline lineno="921"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="922"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Otherwise<sp/>decode<sp/>it<sp/>in<sp/>a<sp/>stream.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="923"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="924"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(!feof(rawfh))<sp/>{</highlight></codeline>
<codeline lineno="925"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int16<sp/>data[256];</highlight></codeline>
<codeline lineno="926"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>nread;</highlight></codeline>
<codeline lineno="927"><highlight class="normal"></highlight></codeline>
<codeline lineno="928"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nread<sp/>=<sp/>fread(data,<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*data),<sp/></highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(data)/</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(*data),<sp/>rawfh);</highlight></codeline>
<codeline lineno="929"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1a572ad08651b4caae820d178a12c8f95f" kindref="member">ps_process_raw</ref>(ps,<sp/>data,<sp/>nread,<sp/>FALSE,<sp/>FALSE);</highlight></codeline>
<codeline lineno="930"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>total<sp/>+=<sp/>nread;</highlight></codeline>
<codeline lineno="931"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="932"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="933"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" kindref="member">ps_end_utt</ref>(ps);</highlight></codeline>
<codeline lineno="934"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>total;</highlight></codeline>
<codeline lineno="935"><highlight class="normal">}</highlight></codeline>
<codeline lineno="936"><highlight class="normal"></highlight></codeline>
<codeline lineno="937"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="938" refid="pocketsphinx_8h_1a89be3b2a8f83291a225db0bcd9ee65b2" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a89be3b2a8f83291a225db0bcd9ee65b2" kindref="member">ps_start_stream</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="939"><highlight class="normal">{</highlight></codeline>
<codeline lineno="940"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1ae065d2fafc704177e7537988c9d3b5c1" kindref="member">acmod_start_stream</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>);</highlight></codeline>
<codeline lineno="941"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="942"><highlight class="normal">}</highlight></codeline>
<codeline lineno="943"><highlight class="normal"></highlight></codeline>
<codeline lineno="944"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="945" refid="pocketsphinx_8h_1ade3909b1c12c1b70afe284639e70cbff" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ade3909b1c12c1b70afe284639e70cbff" kindref="member">ps_start_utt</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="946"><highlight class="normal">{</highlight></codeline>
<codeline lineno="947"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="948"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>uttid[16];</highlight></codeline>
<codeline lineno="949"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="950"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" kindref="member">state</ref><sp/>==<sp/><ref refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba71f39dbe81403dbb045f4312d1bbaae3" kindref="member">ACMOD_STARTED</ref><sp/>||<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" kindref="member">state</ref><sp/>==<sp/><ref refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba1ed8df720ee7006ebaada8c75371d94c" kindref="member">ACMOD_PROCESSING</ref>)<sp/>{</highlight></codeline>
<codeline lineno="951"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Utterance<sp/>already<sp/>started\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="952"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="953"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="954"><highlight class="normal"></highlight></codeline>
<codeline lineno="955"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref><sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="956"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;No<sp/>search<sp/>module<sp/>is<sp/>selected,<sp/>did<sp/>you<sp/>forget<sp/>to<sp/>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="957"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;specify<sp/>a<sp/>language<sp/>model<sp/>or<sp/>grammar?\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="958"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="959"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="960"><highlight class="normal"></highlight></codeline>
<codeline lineno="961"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_reset(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="962"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_start(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="963"><highlight class="normal"></highlight></codeline>
<codeline lineno="964"><highlight class="normal"><sp/><sp/><sp/><sp/>sprintf(uttid,<sp/></highlight><highlight class="stringliteral">&quot;%09u&quot;</highlight><highlight class="normal">,<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f597370dd162c2799efe216c9b991fc" kindref="member">uttno</ref>);</highlight></codeline>
<codeline lineno="965"><highlight class="normal"><sp/><sp/><sp/><sp/>++ps-&gt;<ref refid="structps__decoder__s_1a0f597370dd162c2799efe216c9b991fc" kindref="member">uttno</ref>;</highlight></codeline>
<codeline lineno="966"><highlight class="normal"></highlight></codeline>
<codeline lineno="967"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Remove<sp/>any<sp/>residual<sp/>word<sp/>lattice<sp/>and<sp/>hypothesis.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="968"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ps__lattice_8h_1a3f90e846bde47cd1acdff165b92f5c22" kindref="member">ps_lattice_free</ref>(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1a897f46c55d17e817ff1364f555b31463" kindref="member">dag</ref>);</highlight></codeline>
<codeline lineno="969"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1a897f46c55d17e817ff1364f555b31463" kindref="member">dag</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="970"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1aa3020ef7bd4e56713dfe2fbad52e6e4f" kindref="member">last_link</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="971"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1a721a656d0e34f7604ea8c52a1bdf14ff" kindref="member">post</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="972"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1aa398c736a887af97e42b2a562359adc3" kindref="member">hyp_str</ref>);</highlight></codeline>
<codeline lineno="973"><highlight class="normal"><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1aa398c736a887af97e42b2a562359adc3" kindref="member">hyp_str</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="974"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((rv<sp/>=<sp/><ref refid="acmod_8c_1aa3a5a89f76338e3e1bcfa7a2cecc5845" kindref="member">acmod_start_utt</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="975"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="976"><highlight class="normal"></highlight></codeline>
<codeline lineno="977"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>logging<sp/>features<sp/>and<sp/>audio<sp/>if<sp/>requested.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="978"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1a8bb5ef8791798b8dd9bc82b1ec016663" kindref="member">mfclogdir</ref>)<sp/>{</highlight></codeline>
<codeline lineno="979"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*logfn<sp/>=<sp/>string_join(ps-&gt;<ref refid="structps__decoder__s_1a8bb5ef8791798b8dd9bc82b1ec016663" kindref="member">mfclogdir</ref>,<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="980"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uttid,<sp/></highlight><highlight class="stringliteral">&quot;.mfc&quot;</highlight><highlight class="normal">,<sp/>NULL);</highlight></codeline>
<codeline lineno="981"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FILE<sp/>*mfcfh;</highlight></codeline>
<codeline lineno="982"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;Writing<sp/>MFCC<sp/>log<sp/>file:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>logfn);</highlight></codeline>
<codeline lineno="983"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((mfcfh<sp/>=<sp/>fopen(logfn,<sp/></highlight><highlight class="stringliteral">&quot;wb&quot;</highlight><highlight class="normal">))<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="984"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR_SYSTEM(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>open<sp/>MFCC<sp/>log<sp/>file<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>logfn);</highlight></codeline>
<codeline lineno="985"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(logfn);</highlight></codeline>
<codeline lineno="986"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="987"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="988"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(logfn);</highlight></codeline>
<codeline lineno="989"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a5753caa516c75bdc74b385d7aa66a97c" kindref="member">acmod_set_mfcfh</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>mfcfh);</highlight></codeline>
<codeline lineno="990"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="991"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1aa2610c52a9267ee18ca095169bf34bfd" kindref="member">rawlogdir</ref>)<sp/>{</highlight></codeline>
<codeline lineno="992"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*logfn<sp/>=<sp/>string_join(ps-&gt;<ref refid="structps__decoder__s_1aa2610c52a9267ee18ca095169bf34bfd" kindref="member">rawlogdir</ref>,<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="993"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uttid,<sp/></highlight><highlight class="stringliteral">&quot;.raw&quot;</highlight><highlight class="normal">,<sp/>NULL);</highlight></codeline>
<codeline lineno="994"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FILE<sp/>*rawfh;</highlight></codeline>
<codeline lineno="995"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;Writing<sp/>raw<sp/>audio<sp/>log<sp/>file:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>logfn);</highlight></codeline>
<codeline lineno="996"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((rawfh<sp/>=<sp/>fopen(logfn,<sp/></highlight><highlight class="stringliteral">&quot;wb&quot;</highlight><highlight class="normal">))<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="997"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR_SYSTEM(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>open<sp/>raw<sp/>audio<sp/>log<sp/>file<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>logfn);</highlight></codeline>
<codeline lineno="998"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(logfn);</highlight></codeline>
<codeline lineno="999"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1000"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1001"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(logfn);</highlight></codeline>
<codeline lineno="1002"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a6979441ae866ea846ef41f8471b105a0" kindref="member">acmod_set_rawfh</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>rawfh);</highlight></codeline>
<codeline lineno="1003"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1004"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1a0ed3476113fe3d63b13ac5e8da3f3b4f" kindref="member">senlogdir</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1005"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*logfn<sp/>=<sp/>string_join(ps-&gt;<ref refid="structps__decoder__s_1a0ed3476113fe3d63b13ac5e8da3f3b4f" kindref="member">senlogdir</ref>,<sp/></highlight><highlight class="stringliteral">&quot;/&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1006"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>uttid,<sp/></highlight><highlight class="stringliteral">&quot;.sen&quot;</highlight><highlight class="normal">,<sp/>NULL);</highlight></codeline>
<codeline lineno="1007"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>FILE<sp/>*senfh;</highlight></codeline>
<codeline lineno="1008"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;Writing<sp/>senone<sp/>score<sp/>log<sp/>file:<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>logfn);</highlight></codeline>
<codeline lineno="1009"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((senfh<sp/>=<sp/>fopen(logfn,<sp/></highlight><highlight class="stringliteral">&quot;wb&quot;</highlight><highlight class="normal">))<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="1010"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR_SYSTEM(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>open<sp/>senone<sp/>score<sp/>log<sp/>file<sp/>%s&quot;</highlight><highlight class="normal">,<sp/>logfn);</highlight></codeline>
<codeline lineno="1011"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(logfn);</highlight></codeline>
<codeline lineno="1012"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1013"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1014"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ckd_free(logfn);</highlight></codeline>
<codeline lineno="1015"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1ab35cb48cdf326a3fb5223589d73ae0ce" kindref="member">acmod_set_senfh</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>senfh);</highlight></codeline>
<codeline lineno="1016"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1017"><highlight class="normal"></highlight></codeline>
<codeline lineno="1018"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Start<sp/>auxiliary<sp/>phone<sp/>loop<sp/>search.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1019"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>)</highlight></codeline>
<codeline lineno="1020"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_search_start(ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>);</highlight></codeline>
<codeline lineno="1021"><highlight class="normal"></highlight></codeline>
<codeline lineno="1022"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps_search_start(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>);</highlight></codeline>
<codeline lineno="1023"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1024"><highlight class="normal"></highlight></codeline>
<codeline lineno="1025"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1026"><highlight class="normal">ps_search_forward(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="1027"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1028"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1029"><highlight class="normal"></highlight></codeline>
<codeline lineno="1030"><highlight class="normal"><sp/><sp/><sp/><sp/>nfr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1031"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a861cc097befe7e81473f0ae0972186e0" kindref="member">n_feat_frame</ref><sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1032"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>k;</highlight></codeline>
<codeline lineno="1033"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref><sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="1034"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((k<sp/>=<sp/>ps_search_step(ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>,<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref>))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1035"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>k;</highlight></codeline>
<codeline lineno="1036"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref><sp/>&gt;=<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref>)</highlight></codeline>
<codeline lineno="1037"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((k<sp/>=<sp/>ps_search_step(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>,</highlight></codeline>
<codeline lineno="1038"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref><sp/>-<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref>))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1039"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>k;</highlight></codeline>
<codeline lineno="1040"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a338971ea0aa27fb4796d224e4767642b" kindref="member">acmod_advance</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>);</highlight></codeline>
<codeline lineno="1041"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++ps-&gt;<ref refid="structps__decoder__s_1a2886b321c576c7def449ebb2f37899fd" kindref="member">n_frame</ref>;</highlight></codeline>
<codeline lineno="1042"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>++nfr;</highlight></codeline>
<codeline lineno="1043"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1044"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1045"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1046"><highlight class="normal"></highlight></codeline>
<codeline lineno="1047"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1048" refid="pocketsphinx_8h_1a466d1d718873e7b1cf0881e4f552a4a2" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a466d1d718873e7b1cf0881e4f552a4a2" kindref="member">ps_decode_senscr</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>FILE<sp/>*senfh)</highlight></codeline>
<codeline lineno="1049"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1050"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nfr,<sp/>n_searchfr;</highlight></codeline>
<codeline lineno="1051"><highlight class="normal"></highlight></codeline>
<codeline lineno="1052"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1ade3909b1c12c1b70afe284639e70cbff" kindref="member">ps_start_utt</ref>(ps);</highlight></codeline>
<codeline lineno="1053"><highlight class="normal"><sp/><sp/><sp/><sp/>n_searchfr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1054"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a58bd6038bec5d3901ac2057cacdd778a" kindref="member">acmod_set_insenfh</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>senfh);</highlight></codeline>
<codeline lineno="1055"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>((nfr<sp/>=<sp/><ref refid="acmod_8c_1a5c193164be78ad42944b7fb1be6299a2" kindref="member">acmod_read_scores</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>))<sp/>&gt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1056"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((nfr<sp/>=<sp/>ps_search_forward(ps))<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1057"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" kindref="member">ps_end_utt</ref>(ps);</highlight></codeline>
<codeline lineno="1058"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1059"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1060"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n_searchfr<sp/>+=<sp/>nfr;</highlight></codeline>
<codeline lineno="1061"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1062"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" kindref="member">ps_end_utt</ref>(ps);</highlight></codeline>
<codeline lineno="1063"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a58bd6038bec5d3901ac2057cacdd778a" kindref="member">acmod_set_insenfh</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>NULL);</highlight></codeline>
<codeline lineno="1064"><highlight class="normal"></highlight></codeline>
<codeline lineno="1065"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>n_searchfr;</highlight></codeline>
<codeline lineno="1066"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1067"><highlight class="normal"></highlight></codeline>
<codeline lineno="1068"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1069" refid="pocketsphinx_8h_1a572ad08651b4caae820d178a12c8f95f" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a572ad08651b4caae820d178a12c8f95f" kindref="member">ps_process_raw</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,</highlight></codeline>
<codeline lineno="1070"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int16<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*data,</highlight></codeline>
<codeline lineno="1071"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>n_samples,</highlight></codeline>
<codeline lineno="1072"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>no_search,</highlight></codeline>
<codeline lineno="1073"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>full_utt)</highlight></codeline>
<codeline lineno="1074"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1075"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n_searchfr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1076"><highlight class="normal"></highlight></codeline>
<codeline lineno="1077"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" kindref="member">state</ref><sp/>==<sp/><ref refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba09f7964816ae844c445acd4cf3e33253" kindref="member">ACMOD_IDLE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1078"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Failed<sp/>to<sp/>process<sp/>data,<sp/>utterance<sp/>is<sp/>not<sp/>started.<sp/>Use<sp/>start_utt<sp/>to<sp/>start<sp/>it\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1079"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="1080"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1081"><highlight class="normal"></highlight></codeline>
<codeline lineno="1082"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(no_search)</highlight></codeline>
<codeline lineno="1083"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a1555dac8fa27f644d709c5c89bbfa881" kindref="member">acmod_set_grow</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>TRUE);</highlight></codeline>
<codeline lineno="1084"><highlight class="normal"></highlight></codeline>
<codeline lineno="1085"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(n_samples)<sp/>{</highlight></codeline>
<codeline lineno="1086"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1087"><highlight class="normal"></highlight></codeline>
<codeline lineno="1088"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Process<sp/>some<sp/>data<sp/>into<sp/>features.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1089"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((nfr<sp/>=<sp/><ref refid="acmod_8c_1a23e63c8833e6128ae248e183d42f9b2b" kindref="member">acmod_process_raw</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>&amp;data,</highlight></codeline>
<codeline lineno="1090"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;n_samples,<sp/>full_utt))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1091"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1092"><highlight class="normal"></highlight></codeline>
<codeline lineno="1093"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Score<sp/>and<sp/>search<sp/>as<sp/>much<sp/>data<sp/>as<sp/>possible<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1094"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(no_search)</highlight></codeline>
<codeline lineno="1095"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1096"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((nfr<sp/>=<sp/>ps_search_forward(ps))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1097"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1098"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n_searchfr<sp/>+=<sp/>nfr;</highlight></codeline>
<codeline lineno="1099"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1100"><highlight class="normal"></highlight></codeline>
<codeline lineno="1101"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>n_searchfr;</highlight></codeline>
<codeline lineno="1102"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1103"><highlight class="normal"></highlight></codeline>
<codeline lineno="1104"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1105"><highlight class="normal"><ref refid="pocketsphinx_8h_1adc0ab735d6460142126bc31a9e9d2ba0" kindref="member">ps_process_cep</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,</highlight></codeline>
<codeline lineno="1106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>mfcc_t<sp/>**data,</highlight></codeline>
<codeline lineno="1107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>n_frames,</highlight></codeline>
<codeline lineno="1108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>no_search,</highlight></codeline>
<codeline lineno="1109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>full_utt)</highlight></codeline>
<codeline lineno="1110"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1111"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>n_searchfr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1112"><highlight class="normal"></highlight></codeline>
<codeline lineno="1113"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(no_search)</highlight></codeline>
<codeline lineno="1114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a1555dac8fa27f644d709c5c89bbfa881" kindref="member">acmod_set_grow</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>TRUE);</highlight></codeline>
<codeline lineno="1115"><highlight class="normal"></highlight></codeline>
<codeline lineno="1116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(n_frames)<sp/>{</highlight></codeline>
<codeline lineno="1117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1118"><highlight class="normal"></highlight></codeline>
<codeline lineno="1119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Process<sp/>some<sp/>data<sp/>into<sp/>features.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((nfr<sp/>=<sp/><ref refid="acmod_8c_1a9464f7708a361171469d613d401619fe" kindref="member">acmod_process_cep</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>&amp;data,</highlight></codeline>
<codeline lineno="1121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>&amp;n_frames,<sp/>full_utt))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1123"><highlight class="normal"></highlight></codeline>
<codeline lineno="1124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Score<sp/>and<sp/>search<sp/>as<sp/>much<sp/>data<sp/>as<sp/>possible<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(no_search)</highlight></codeline>
<codeline lineno="1126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">continue</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="1127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((nfr<sp/>=<sp/>ps_search_forward(ps))<sp/>&lt;<sp/>0)</highlight></codeline>
<codeline lineno="1128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nfr;</highlight></codeline>
<codeline lineno="1129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>n_searchfr<sp/>+=<sp/>nfr;</highlight></codeline>
<codeline lineno="1130"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1131"><highlight class="normal"></highlight></codeline>
<codeline lineno="1132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>n_searchfr;</highlight></codeline>
<codeline lineno="1133"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1134"><highlight class="normal"></highlight></codeline>
<codeline lineno="1135"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1136" refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ab9339de730713b68cbd68a7f36dc8730" kindref="member">ps_end_utt</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="1137"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>rv,<sp/>i;</highlight></codeline>
<codeline lineno="1139"><highlight class="normal"></highlight></codeline>
<codeline lineno="1140"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" kindref="member">state</ref><sp/>==<sp/><ref refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba3d936d27ce644db26a862830f3b6d188" kindref="member">ACMOD_ENDED</ref><sp/>||<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a06adf606c11e6f4b9869742510a5c23b" kindref="member">state</ref><sp/>==<sp/><ref refid="acmod_8h_1a6a74b084234e0e7d5e72161545c5040ba09f7964816ae844c445acd4cf3e33253" kindref="member">ACMOD_IDLE</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_ERROR(</highlight><highlight class="stringliteral">&quot;Utterance<sp/>is<sp/>not<sp/>started\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-1;</highlight></codeline>
<codeline lineno="1143"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1144"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a262372bdd6063f61e64b5417a449c1a9" kindref="member">acmod_end_utt</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>);</highlight></codeline>
<codeline lineno="1145"><highlight class="normal"></highlight></codeline>
<codeline lineno="1146"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Search<sp/>any<sp/>remaining<sp/>frames.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1147"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((rv<sp/>=<sp/>ps_search_forward(ps))<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="1150"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1151"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Finish<sp/>phone<sp/>loop<sp/>search.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((rv<sp/>=<sp/>ps_search_finish(ps-&gt;<ref refid="structps__decoder__s_1a0c6d141d7a71a1287be00a1ebcc7643d" kindref="member">phone_loop</ref>))<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="1156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1157"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1158"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Search<sp/>any<sp/>frames<sp/>remaining<sp/>in<sp/>the<sp/>lookahead<sp/>window.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1159"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref><sp/>&gt;=<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref>)<sp/>{</highlight></codeline>
<codeline lineno="1160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(i<sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref><sp/>-<sp/>ps-&gt;<ref refid="structps__decoder__s_1a0f0a6681ffd98af789f6bed556c814e4" kindref="member">pl_window</ref>;</highlight></codeline>
<codeline lineno="1161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>i<sp/>&lt;<sp/>ps-&gt;acmod-&gt;output_frame;<sp/>++i)</highlight></codeline>
<codeline lineno="1162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ps_search_step(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>,<sp/>i);</highlight></codeline>
<codeline lineno="1163"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1164"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Finish<sp/>main<sp/>search.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((rv<sp/>=<sp/>ps_search_finish(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>))<sp/>&lt;<sp/>0)<sp/>{</highlight></codeline>
<codeline lineno="1166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="1168"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1169"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1170"><highlight class="normal"></highlight></codeline>
<codeline lineno="1171"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Log<sp/>a<sp/>backtrace<sp/>if<sp/>requested.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1172"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cmd_ln_boolean_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-backtrace&quot;</highlight><highlight class="normal">))<sp/>{</highlight></codeline>
<codeline lineno="1173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal">*<sp/>hyp;</highlight></codeline>
<codeline lineno="1174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*seg;</highlight></codeline>
<codeline lineno="1175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>score;</highlight></codeline>
<codeline lineno="1176"><highlight class="normal"></highlight></codeline>
<codeline lineno="1177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>hyp<sp/>=<sp/><ref refid="pocketsphinx_8h_1ada74b12d71e9d4db5d959b94004ff812" kindref="member">ps_get_hyp</ref>(ps,<sp/>&amp;score);</highlight></codeline>
<codeline lineno="1178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="1179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hyp<sp/>!=<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="1180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO(</highlight><highlight class="stringliteral">&quot;%s<sp/>(%d)\n&quot;</highlight><highlight class="normal">,<sp/>hyp,<sp/>score);</highlight></codeline>
<codeline lineno="1181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO_NOFN(</highlight><highlight class="stringliteral">&quot;%-20s<sp/>%-5s<sp/>%-5s<sp/>%-5s<sp/>%-10s<sp/>%-10s<sp/>%-3s\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;word&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;start&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;end&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;pprob&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ascr&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;lscr&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;lback&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(seg<sp/>=<sp/><ref refid="pocketsphinx_8h_1a2216f6ff53f6bc9c78f285ee3fe0d665" kindref="member">ps_seg_iter</ref>(ps,<sp/>&amp;score);<sp/>seg;</highlight></codeline>
<codeline lineno="1184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>seg<sp/>=<sp/><ref refid="pocketsphinx_8h_1ae16ba181f654ffc9bfbbe861e9315f12" kindref="member">ps_seg_next</ref>(seg))<sp/>{</highlight></codeline>
<codeline lineno="1185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*word;</highlight></codeline>
<codeline lineno="1186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sf,<sp/>ef;</highlight></codeline>
<codeline lineno="1187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>int32<sp/>post,<sp/>lscr,<sp/>ascr,<sp/>lback;</highlight></codeline>
<codeline lineno="1188"><highlight class="normal"></highlight></codeline>
<codeline lineno="1189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>word<sp/>=<sp/><ref refid="pocketsphinx_8h_1a8a4fed34b58885627b53e99e90514169" kindref="member">ps_seg_word</ref>(seg);</highlight></codeline>
<codeline lineno="1190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1a045a044726b816678965514f2ee7d8c7" kindref="member">ps_seg_frames</ref>(seg,<sp/>&amp;sf,<sp/>&amp;ef);</highlight></codeline>
<codeline lineno="1191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>post<sp/>=<sp/><ref refid="pocketsphinx_8h_1adfd45d93c3fc9de6b7be89d5417f6abb" kindref="member">ps_seg_prob</ref>(seg,<sp/>&amp;ascr,<sp/>&amp;lscr,<sp/>&amp;lback);</highlight></codeline>
<codeline lineno="1192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>E_INFO_NOFN(</highlight><highlight class="stringliteral">&quot;%-20s<sp/>%-5d<sp/>%-5d<sp/>%-1.3f<sp/>%-10d<sp/>%-10d<sp/>%-3d\n&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="1193"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>word,<sp/>sf,<sp/>ef,<sp/>logmath_exp(<ref refid="pocketsphinx_8h_1a249cfc383b7d9111a28b550945a606b5" kindref="member">ps_get_logmath</ref>(ps),<sp/>post),</highlight></codeline>
<codeline lineno="1194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ascr,<sp/>lscr,<sp/>lback);</highlight></codeline>
<codeline lineno="1195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1197"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>rv;</highlight></codeline>
<codeline lineno="1199"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1200"><highlight class="normal"></highlight></codeline>
<codeline lineno="1201"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="1202" refid="pocketsphinx_8h_1ada74b12d71e9d4db5d959b94004ff812" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ada74b12d71e9d4db5d959b94004ff812" kindref="member">ps_get_hyp</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>int32<sp/>*out_best_score)</highlight></codeline>
<codeline lineno="1203"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1204"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*hyp;</highlight></codeline>
<codeline lineno="1205"><highlight class="normal"></highlight></codeline>
<codeline lineno="1206"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_start(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1207"><highlight class="normal"><sp/><sp/><sp/><sp/>hyp<sp/>=<sp/>ps_search_hyp(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>,<sp/>out_best_score,<sp/>NULL);</highlight></codeline>
<codeline lineno="1208"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1209"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hyp;</highlight></codeline>
<codeline lineno="1210"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1211"><highlight class="normal"></highlight></codeline>
<codeline lineno="1212"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="1213" refid="pocketsphinx_8h_1af3431cf96766564d6ab2a3cc8e056860" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1af3431cf96766564d6ab2a3cc8e056860" kindref="member">ps_get_hyp_final</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>int32<sp/>*out_is_final)</highlight></codeline>
<codeline lineno="1214"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1215"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*hyp;</highlight></codeline>
<codeline lineno="1216"><highlight class="normal"></highlight></codeline>
<codeline lineno="1217"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_start(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1218"><highlight class="normal"><sp/><sp/><sp/><sp/>hyp<sp/>=<sp/>ps_search_hyp(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>,<sp/>NULL,<sp/>out_is_final);</highlight></codeline>
<codeline lineno="1219"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>hyp;</highlight></codeline>
<codeline lineno="1221"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1222"><highlight class="normal"></highlight></codeline>
<codeline lineno="1223"><highlight class="normal"></highlight></codeline>
<codeline lineno="1224"><highlight class="normal">int32</highlight></codeline>
<codeline lineno="1225" refid="pocketsphinx_8h_1ac8ac154482457740173caa1c0d699c49" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ac8ac154482457740173caa1c0d699c49" kindref="member">ps_get_prob</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="1226"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1227"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>prob;</highlight></codeline>
<codeline lineno="1228"><highlight class="normal"></highlight></codeline>
<codeline lineno="1229"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_start(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1230"><highlight class="normal"><sp/><sp/><sp/><sp/>prob<sp/>=<sp/>ps_search_prob(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>);</highlight></codeline>
<codeline lineno="1231"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>prob;</highlight></codeline>
<codeline lineno="1233"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1234"><highlight class="normal"></highlight></codeline>
<codeline lineno="1235"><highlight class="normal"><ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*</highlight></codeline>
<codeline lineno="1236" refid="pocketsphinx_8h_1a2216f6ff53f6bc9c78f285ee3fe0d665" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a2216f6ff53f6bc9c78f285ee3fe0d665" kindref="member">ps_seg_iter</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>int32<sp/>*out_best_score)</highlight></codeline>
<codeline lineno="1237"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1238"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*itor;</highlight></codeline>
<codeline lineno="1239"><highlight class="normal"></highlight></codeline>
<codeline lineno="1240"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_start(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1241"><highlight class="normal"><sp/><sp/><sp/><sp/>itor<sp/>=<sp/>ps_search_seg_iter(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>,<sp/>out_best_score);</highlight></codeline>
<codeline lineno="1242"><highlight class="normal"><sp/><sp/><sp/><sp/>ptmr_stop(&amp;ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>);</highlight></codeline>
<codeline lineno="1243"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>itor;</highlight></codeline>
<codeline lineno="1244"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1245"><highlight class="normal"></highlight></codeline>
<codeline lineno="1246"><highlight class="normal"><ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*</highlight></codeline>
<codeline lineno="1247" refid="pocketsphinx_8h_1ae16ba181f654ffc9bfbbe861e9315f12" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ae16ba181f654ffc9bfbbe861e9315f12" kindref="member">ps_seg_next</ref>(<ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*seg)</highlight></codeline>
<codeline lineno="1248"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1249"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps_search_seg_next(seg);</highlight></codeline>
<codeline lineno="1250"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1251"><highlight class="normal"></highlight></codeline>
<codeline lineno="1252"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="1253" refid="pocketsphinx_8h_1a8a4fed34b58885627b53e99e90514169" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a8a4fed34b58885627b53e99e90514169" kindref="member">ps_seg_word</ref>(<ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*seg)</highlight></codeline>
<codeline lineno="1254"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1255"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>seg-&gt;<ref refid="structps__seg__s_1a97a0dc7db931c7e3f98d23d21ce27f04" kindref="member">word</ref>;</highlight></codeline>
<codeline lineno="1256"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1257"><highlight class="normal"></highlight></codeline>
<codeline lineno="1258"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1259" refid="pocketsphinx_8h_1a045a044726b816678965514f2ee7d8c7" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a045a044726b816678965514f2ee7d8c7" kindref="member">ps_seg_frames</ref>(<ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*seg,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*out_sf,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*out_ef)</highlight></codeline>
<codeline lineno="1260"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1261"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>uf;</highlight></codeline>
<codeline lineno="1262"><highlight class="normal"><sp/><sp/><sp/><sp/>uf<sp/>=<sp/><ref refid="acmod_8c_1a8b52ce1289cc84deda1cf98b4cebbca2" kindref="member">acmod_stream_offset</ref>(seg-&gt;<ref refid="structps__seg__s_1a14168ddcb60e094dad36c7c920a79bb3" kindref="member">search</ref>-&gt;<ref refid="structps__search__s_1a0fdf6fe8c4d9c28f10c48c09517c6b91" kindref="member">acmod</ref>);</highlight></codeline>
<codeline lineno="1263"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_sf)<sp/>*out_sf<sp/>=<sp/>seg-&gt;<ref refid="structps__seg__s_1a885a599726cd0efba573d106d016e6e2" kindref="member">sf</ref><sp/>+<sp/>uf;</highlight></codeline>
<codeline lineno="1264"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_ef)<sp/>*out_ef<sp/>=<sp/>seg-&gt;<ref refid="structps__seg__s_1ab25ecc6af8d2695c6097cf7e934eadd4" kindref="member">ef</ref><sp/>+<sp/>uf;</highlight></codeline>
<codeline lineno="1265"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1266"><highlight class="normal"></highlight></codeline>
<codeline lineno="1267"><highlight class="normal">int32</highlight></codeline>
<codeline lineno="1268" refid="pocketsphinx_8h_1adfd45d93c3fc9de6b7be89d5417f6abb" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1adfd45d93c3fc9de6b7be89d5417f6abb" kindref="member">ps_seg_prob</ref>(<ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*seg,<sp/>int32<sp/>*out_ascr,<sp/>int32<sp/>*out_lscr,<sp/>int32<sp/>*out_lback)</highlight></codeline>
<codeline lineno="1269"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1270"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_ascr)<sp/>*out_ascr<sp/>=<sp/>seg-&gt;<ref refid="structps__seg__s_1a6f7706ec4c0d0ec8ecafaf0f29f41f4b" kindref="member">ascr</ref>;</highlight></codeline>
<codeline lineno="1271"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_lscr)<sp/>*out_lscr<sp/>=<sp/>seg-&gt;<ref refid="structps__seg__s_1a69e605f422eeed1a9c67437e8ddd8b08" kindref="member">lscr</ref>;</highlight></codeline>
<codeline lineno="1272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_lback)<sp/>*out_lback<sp/>=<sp/>seg-&gt;<ref refid="structps__seg__s_1a4d86c21f1ed2dc3eb3b1b1b37ce9bb48" kindref="member">lback</ref>;</highlight></codeline>
<codeline lineno="1273"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>seg-&gt;<ref refid="structps__seg__s_1ae683244d90d0a5339930b47757778432" kindref="member">prob</ref>;</highlight></codeline>
<codeline lineno="1274"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1275"><highlight class="normal"></highlight></codeline>
<codeline lineno="1276"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1277" refid="pocketsphinx_8h_1ac02cea69794b0fbd17e6a4c5265b2255" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ac02cea69794b0fbd17e6a4c5265b2255" kindref="member">ps_seg_free</ref>(<ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*seg)</highlight></codeline>
<codeline lineno="1278"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1279"><highlight class="normal"><sp/><sp/><sp/><sp/>ps_search_seg_free(seg);</highlight></codeline>
<codeline lineno="1280"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1281"><highlight class="normal"></highlight></codeline>
<codeline lineno="1282"><highlight class="normal"><ref refid="structps__lattice__s" kindref="compound">ps_lattice_t</ref><sp/>*</highlight></codeline>
<codeline lineno="1283" refid="pocketsphinx_8h_1ac7e8897e5eed452f284bef3ee53d2429" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1ac7e8897e5eed452f284bef3ee53d2429" kindref="member">ps_get_lattice</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="1284"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1285"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps_search_lattice(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>);</highlight></codeline>
<codeline lineno="1286"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1287"><highlight class="normal"></highlight></codeline>
<codeline lineno="1288"><highlight class="normal"><ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*</highlight></codeline>
<codeline lineno="1289" refid="pocketsphinx_8h_1af4bb6ba47844a135745db428919d9810" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1af4bb6ba47844a135745db428919d9810" kindref="member">ps_nbest</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>sf,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ef,</highlight></codeline>
<codeline lineno="1290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*ctx1,<sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*ctx2)</highlight></codeline>
<codeline lineno="1291"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1292"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__lattice__s" kindref="compound">ps_lattice_t</ref><sp/>*dag;</highlight></codeline>
<codeline lineno="1293"><highlight class="normal"><sp/><sp/><sp/><sp/>ngram_model_t<sp/>*lmset;</highlight></codeline>
<codeline lineno="1294"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__astar__s" kindref="compound">ps_astar_t</ref><sp/>*nbest;</highlight></codeline>
<codeline lineno="1295"><highlight class="normal"><sp/><sp/><sp/><sp/>float32<sp/>lwf;</highlight></codeline>
<codeline lineno="1296"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>w1,<sp/>w2;</highlight></codeline>
<codeline lineno="1297"><highlight class="normal"></highlight></codeline>
<codeline lineno="1298"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref><sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1300"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((dag<sp/>=<sp/><ref refid="pocketsphinx_8h_1ac7e8897e5eed452f284bef3ee53d2429" kindref="member">ps_get_lattice</ref>(ps))<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1302"><highlight class="normal"></highlight></codeline>
<codeline lineno="1303"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME:<sp/>This<sp/>is<sp/>all<sp/>quite<sp/>specific<sp/>to<sp/>N-Gram<sp/>search.<sp/><sp/>Either<sp/>we</highlight></codeline>
<codeline lineno="1304"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>should<sp/>make<sp/>N-best<sp/>a<sp/>method<sp/>for<sp/>each<sp/>search<sp/>module<sp/>or<sp/>it<sp/>needs</highlight></codeline>
<codeline lineno="1305"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>to<sp/>be<sp/>abstracted<sp/>to<sp/>work<sp/>for<sp/>N-Gram<sp/>and<sp/>FSG.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1306"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(0<sp/>!=<sp/>strcmp(ps_search_type(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>),<sp/>PS_SEARCH_TYPE_NGRAM))<sp/>{</highlight></codeline>
<codeline lineno="1307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lmset<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lwf<sp/>=<sp/>1.0f;</highlight></codeline>
<codeline lineno="1309"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lmset<sp/>=<sp/>((<ref refid="structngram__search__s" kindref="compound">ngram_search_t</ref><sp/>*)ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>)-&gt;lmset;</highlight></codeline>
<codeline lineno="1311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>lwf<sp/>=<sp/>((<ref refid="structngram__search__s" kindref="compound">ngram_search_t</ref><sp/>*)ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>)-&gt;bestpath_fwdtree_lw_ratio;</highlight></codeline>
<codeline lineno="1312"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1313"><highlight class="normal"></highlight></codeline>
<codeline lineno="1314"><highlight class="normal"><sp/><sp/><sp/><sp/>w1<sp/>=<sp/>ctx1<sp/>?<sp/><ref refid="dict_8h_1ad3729eb1a02a9a321e17933f7e90c80e" kindref="member">dict_wordid</ref>(ps_search_dict(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>),<sp/>ctx1)<sp/>:<sp/>-1;</highlight></codeline>
<codeline lineno="1315"><highlight class="normal"><sp/><sp/><sp/><sp/>w2<sp/>=<sp/>ctx2<sp/>?<sp/><ref refid="dict_8h_1ad3729eb1a02a9a321e17933f7e90c80e" kindref="member">dict_wordid</ref>(ps_search_dict(ps-&gt;<ref refid="structps__decoder__s_1ad337270efc93613cf8dd7594f6515799" kindref="member">search</ref>),<sp/>ctx2)<sp/>:<sp/>-1;</highlight></codeline>
<codeline lineno="1316"><highlight class="normal"><sp/><sp/><sp/><sp/>nbest<sp/>=<sp/><ref refid="ps__lattice_8c_1aaf9aedd3cd8bd1d45053e10828215a25" kindref="member">ps_astar_start</ref>(dag,<sp/>lmset,<sp/>lwf,<sp/>sf,<sp/>ef,<sp/>w1,<sp/>w2);</highlight></codeline>
<codeline lineno="1317"><highlight class="normal"></highlight></codeline>
<codeline lineno="1318"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(<ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*)nbest;</highlight></codeline>
<codeline lineno="1319"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1320"><highlight class="normal"></highlight></codeline>
<codeline lineno="1321"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1322" refid="pocketsphinx_8h_1a83379b2da95eebdf5070d29196a9b067" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a83379b2da95eebdf5070d29196a9b067" kindref="member">ps_nbest_free</ref>(<ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*nbest)</highlight></codeline>
<codeline lineno="1323"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1324"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ps__lattice_8c_1abfb03e9e0fcbe3def45120f5ba43be14" kindref="member">ps_astar_finish</ref>(nbest);</highlight></codeline>
<codeline lineno="1325"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1326"><highlight class="normal"></highlight></codeline>
<codeline lineno="1327"><highlight class="normal"><ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*</highlight></codeline>
<codeline lineno="1328" refid="pocketsphinx_8h_1a0942b8c0570009319a5be20ef1b52821" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a0942b8c0570009319a5be20ef1b52821" kindref="member">ps_nbest_next</ref>(<ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*nbest)</highlight></codeline>
<codeline lineno="1329"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1330"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structps__latpath__s" kindref="compound">ps_latpath_t</ref><sp/>*next;</highlight></codeline>
<codeline lineno="1331"><highlight class="normal"></highlight></codeline>
<codeline lineno="1332"><highlight class="normal"><sp/><sp/><sp/><sp/>next<sp/>=<sp/><ref refid="ps__lattice_8c_1a6bea95f8fb827af790bbe6ce1920908c" kindref="member">ps_astar_next</ref>(nbest);</highlight></codeline>
<codeline lineno="1333"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(next<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline lineno="1334"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="pocketsphinx_8h_1a83379b2da95eebdf5070d29196a9b067" kindref="member">ps_nbest_free</ref>(nbest);</highlight></codeline>
<codeline lineno="1335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1336"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1337"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>nbest;</highlight></codeline>
<codeline lineno="1338"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1339"><highlight class="normal"></highlight></codeline>
<codeline lineno="1340"><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="1341" refid="pocketsphinx_8h_1a250c5f72d3addd0d0254f3ceeaa17ace" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a250c5f72d3addd0d0254f3ceeaa17ace" kindref="member">ps_nbest_hyp</ref>(<ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*nbest,<sp/>int32<sp/>*out_score)</highlight></codeline>
<codeline lineno="1342"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1343"><highlight class="normal"><sp/><sp/><sp/><sp/>assert(nbest<sp/>!=<sp/>NULL);</highlight></codeline>
<codeline lineno="1344"><highlight class="normal"></highlight></codeline>
<codeline lineno="1345"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nbest-&gt;top<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1347"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_score)<sp/>*out_score<sp/>=<sp/>nbest-&gt;top-&gt;<ref refid="structps__latpath__s_1a9249fb528f754db992df1d494a69b580" kindref="member">score</ref>;</highlight></codeline>
<codeline lineno="1348"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="ps__lattice_8c_1ac7372b5c5ec111f6814ce1ba495593e4" kindref="member">ps_astar_hyp</ref>(nbest,<sp/>nbest-&gt;top);</highlight></codeline>
<codeline lineno="1349"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1350"><highlight class="normal"></highlight></codeline>
<codeline lineno="1351"><highlight class="normal"><ref refid="structps__seg__s" kindref="compound">ps_seg_t</ref><sp/>*</highlight></codeline>
<codeline lineno="1352" refid="pocketsphinx_8h_1a1d2b6fd873d8213bd53a915ff2758785" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a1d2b6fd873d8213bd53a915ff2758785" kindref="member">ps_nbest_seg</ref>(<ref refid="structps__astar__s" kindref="compound">ps_nbest_t</ref><sp/>*nbest,<sp/>int32<sp/>*out_score)</highlight></codeline>
<codeline lineno="1353"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1354"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(nbest-&gt;top<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="1355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>NULL;</highlight></codeline>
<codeline lineno="1356"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(out_score)<sp/>*out_score<sp/>=<sp/>nbest-&gt;top-&gt;<ref refid="structps__latpath__s_1a9249fb528f754db992df1d494a69b580" kindref="member">score</ref>;</highlight></codeline>
<codeline lineno="1357"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="ps__lattice_8c_1ac8e3dff7276c03c93377d0cb79fbdbd7" kindref="member">ps_astar_seg_iter</ref>(nbest,<sp/>nbest-&gt;top,<sp/>1.0);</highlight></codeline>
<codeline lineno="1358"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1359"><highlight class="normal"></highlight></codeline>
<codeline lineno="1360"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1361" refid="pocketsphinx_8h_1abb3527e41c2f4cd64dccbdbd5f812d1d" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1abb3527e41c2f4cd64dccbdbd5f812d1d" kindref="member">ps_get_n_frames</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="1362"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1363"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref><sp/>+<sp/>1;</highlight></codeline>
<codeline lineno="1364"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1365"><highlight class="normal"></highlight></codeline>
<codeline lineno="1366"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1367" refid="pocketsphinx_8h_1aac7070c934a2d03d0d5b34e19614360f" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1aac7070c934a2d03d0d5b34e19614360f" kindref="member">ps_get_utt_time</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*out_nspeech,</highlight></codeline>
<codeline lineno="1368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*out_ncpu,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*out_nwall)</highlight></codeline>
<codeline lineno="1369"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1370"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>frate;</highlight></codeline>
<codeline lineno="1371"><highlight class="normal"></highlight></codeline>
<codeline lineno="1372"><highlight class="normal"><sp/><sp/><sp/><sp/>frate<sp/>=<sp/>cmd_ln_int32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-frate&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1373"><highlight class="normal"><sp/><sp/><sp/><sp/>*out_nspeech<sp/>=<sp/>(double)ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1aec694af0767ac5e8f1022b6252111885" kindref="member">output_frame</ref><sp/>/<sp/>frate;</highlight></codeline>
<codeline lineno="1374"><highlight class="normal"><sp/><sp/><sp/><sp/>*out_ncpu<sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>.t_cpu;</highlight></codeline>
<codeline lineno="1375"><highlight class="normal"><sp/><sp/><sp/><sp/>*out_nwall<sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>.t_elapsed;</highlight></codeline>
<codeline lineno="1376"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1377"><highlight class="normal"></highlight></codeline>
<codeline lineno="1378"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1379" refid="pocketsphinx_8h_1a61fb92154c5c731cf4a24e0976263da0" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a61fb92154c5c731cf4a24e0976263da0" kindref="member">ps_get_all_time</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*out_nspeech,</highlight></codeline>
<codeline lineno="1380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*out_ncpu,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*out_nwall)</highlight></codeline>
<codeline lineno="1381"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1382"><highlight class="normal"><sp/><sp/><sp/><sp/>int32<sp/>frate;</highlight></codeline>
<codeline lineno="1383"><highlight class="normal"></highlight></codeline>
<codeline lineno="1384"><highlight class="normal"><sp/><sp/><sp/><sp/>frate<sp/>=<sp/>cmd_ln_int32_r(ps-&gt;<ref refid="structps__decoder__s_1a0565ed97b32408bd05c8104f020cef05" kindref="member">config</ref>,<sp/></highlight><highlight class="stringliteral">&quot;-frate&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="1385"><highlight class="normal"><sp/><sp/><sp/><sp/>*out_nspeech<sp/>=<sp/>(double)ps-&gt;<ref refid="structps__decoder__s_1a2886b321c576c7def449ebb2f37899fd" kindref="member">n_frame</ref><sp/>/<sp/>frate;</highlight></codeline>
<codeline lineno="1386"><highlight class="normal"><sp/><sp/><sp/><sp/>*out_ncpu<sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>.t_tot_cpu;</highlight></codeline>
<codeline lineno="1387"><highlight class="normal"><sp/><sp/><sp/><sp/>*out_nwall<sp/>=<sp/>ps-&gt;<ref refid="structps__decoder__s_1ab42d1d1e300d2a6df5dd3cd796a27d43" kindref="member">perf</ref>.t_tot_elapsed;</highlight></codeline>
<codeline lineno="1388"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1389"><highlight class="normal"></highlight></codeline>
<codeline lineno="1390"><highlight class="normal">uint8<sp/></highlight></codeline>
<codeline lineno="1391" refid="pocketsphinx_8h_1a25a1d0e35f0c1ca8b018e1a27c0c1966" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a25a1d0e35f0c1ca8b018e1a27c0c1966" kindref="member">ps_get_in_speech</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps)</highlight></codeline>
<codeline lineno="1392"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1393"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>fe_get_vad_state(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>-&gt;<ref refid="structacmod__s_1a56eaceb9b6a1cbcccd09cf42cfa87231" kindref="member">fe</ref>);</highlight></codeline>
<codeline lineno="1394"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1395"><highlight class="normal"></highlight></codeline>
<codeline lineno="1396"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1397" refid="pocketsphinx__internal_8h_1a9e0d66662ea7c64f8bddbbfe57496896" refkind="member"><highlight class="normal"><ref refid="pocketsphinx__internal_8h_1a9e0d66662ea7c64f8bddbbfe57496896" kindref="member">ps_search_init</ref>(<ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search,<sp/><ref refid="structps__searchfuncs__s" kindref="compound">ps_searchfuncs_t</ref><sp/>*vt,</highlight></codeline>
<codeline lineno="1398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*type,</highlight></codeline>
<codeline lineno="1399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*name,</highlight></codeline>
<codeline lineno="1400"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cmd_ln_t<sp/>*config,<sp/><ref refid="structacmod__s" kindref="compound">acmod_t</ref><sp/>*acmod,<sp/><ref refid="structdict__t" kindref="compound">dict_t</ref><sp/>*dict,</highlight></codeline>
<codeline lineno="1401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structdict2pid__t" kindref="compound">dict2pid_t</ref><sp/>*d2p)</highlight></codeline>
<codeline lineno="1402"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1403"><highlight class="normal"><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1aa51e88956bbe9c05359d32526180809b" kindref="member">vt</ref><sp/>=<sp/>vt;</highlight></codeline>
<codeline lineno="1404"><highlight class="normal"><sp/><sp/><sp/><sp/>search-&gt;name<sp/>=<sp/>ckd_salloc(name);</highlight></codeline>
<codeline lineno="1405"><highlight class="normal"><sp/><sp/><sp/><sp/>search-&gt;type<sp/>=<sp/>ckd_salloc(type);</highlight></codeline>
<codeline lineno="1406"><highlight class="normal"></highlight></codeline>
<codeline lineno="1407"><highlight class="normal"><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1aa6e3e18165bbc70084a06575d5703042" kindref="member">config</ref><sp/>=<sp/>config;</highlight></codeline>
<codeline lineno="1408"><highlight class="normal"><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a0fdf6fe8c4d9c28f10c48c09517c6b91" kindref="member">acmod</ref><sp/>=<sp/>acmod;</highlight></codeline>
<codeline lineno="1409"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(d2p)</highlight></codeline>
<codeline lineno="1410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" kindref="member">d2p</ref><sp/>=<sp/><ref refid="dict2pid_8c_1a85a8de8009445e1129766186ddaa949a" kindref="member">dict2pid_retain</ref>(d2p);</highlight></codeline>
<codeline lineno="1411"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" kindref="member">d2p</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1413"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dict)<sp/>{</highlight></codeline>
<codeline lineno="1414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" kindref="member">dict</ref><sp/>=<sp/><ref refid="dict_8h_1a0edf70be186e8940af9d21243083cb8b" kindref="member">dict_retain</ref>(dict);</highlight></codeline>
<codeline lineno="1415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ae1a9fa33bfc851ec91ce96870714b3cc" kindref="member">start_wid</ref><sp/>=<sp/>dict_startwid(dict);</highlight></codeline>
<codeline lineno="1416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a0fb4d79f1084bdbbc0a808513f7c1ca7" kindref="member">finish_wid</ref><sp/>=<sp/>dict_finishwid(dict);</highlight></codeline>
<codeline lineno="1417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ab6851b4675f38ab6b3683d75521f000b" kindref="member">silence_wid</ref><sp/>=<sp/>dict_silwid(dict);</highlight></codeline>
<codeline lineno="1418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ad4d98deb905bd664ec44313ea0065b1a" kindref="member">n_words</ref><sp/>=<sp/><ref refid="dict_8h_1a361b948b42f9cfdf5c7fa9dfc8a71a94" kindref="member">dict_size</ref>(dict);</highlight></codeline>
<codeline lineno="1419"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1420"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" kindref="member">dict</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ae1a9fa33bfc851ec91ce96870714b3cc" kindref="member">start_wid</ref><sp/>=<sp/>search-&gt;<ref refid="structps__search__s_1a0fb4d79f1084bdbbc0a808513f7c1ca7" kindref="member">finish_wid</ref><sp/>=<sp/>search-&gt;<ref refid="structps__search__s_1ab6851b4675f38ab6b3683d75521f000b" kindref="member">silence_wid</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="1423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ad4d98deb905bd664ec44313ea0065b1a" kindref="member">n_words</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1424"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1425"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1426"><highlight class="normal"></highlight></codeline>
<codeline lineno="1427"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1428" refid="pocketsphinx__internal_8h_1a39db3228c813a2943d47ff3f13e6ef08" refkind="member"><highlight class="normal"><ref refid="pocketsphinx__internal_8h_1a39db3228c813a2943d47ff3f13e6ef08" kindref="member">ps_search_base_free</ref>(<ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search)</highlight></codeline>
<codeline lineno="1429"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1430"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME:<sp/>We<sp/>will<sp/>have<sp/>refcounting<sp/>on<sp/>acmod,<sp/>config,<sp/>etc,<sp/>at<sp/>which</highlight></codeline>
<codeline lineno="1431"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>*<sp/>point<sp/>we<sp/>will<sp/>free<sp/>them<sp/>here<sp/>too.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1432"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(search-&gt;name);</highlight></codeline>
<codeline lineno="1433"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(search-&gt;type);</highlight></codeline>
<codeline lineno="1434"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" kindref="member">dict_free</ref>(search-&gt;<ref refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" kindref="member">dict</ref>);</highlight></codeline>
<codeline lineno="1435"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" kindref="member">dict2pid_free</ref>(search-&gt;<ref refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="1436"><highlight class="normal"><sp/><sp/><sp/><sp/>ckd_free(search-&gt;<ref refid="structps__search__s_1aa398c736a887af97e42b2a562359adc3" kindref="member">hyp_str</ref>);</highlight></codeline>
<codeline lineno="1437"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="ps__lattice_8h_1a3f90e846bde47cd1acdff165b92f5c22" kindref="member">ps_lattice_free</ref>(search-&gt;<ref refid="structps__search__s_1a897f46c55d17e817ff1364f555b31463" kindref="member">dag</ref>);</highlight></codeline>
<codeline lineno="1438"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1439"><highlight class="normal"></highlight></codeline>
<codeline lineno="1440"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1441" refid="pocketsphinx__internal_8h_1a307801961f27bd5f4b82a3e6b83e0ca1" refkind="member"><highlight class="normal"><ref refid="pocketsphinx__internal_8h_1a307801961f27bd5f4b82a3e6b83e0ca1" kindref="member">ps_search_base_reinit</ref>(<ref refid="structps__search__s" kindref="compound">ps_search_t</ref><sp/>*search,<sp/><ref refid="structdict__t" kindref="compound">dict_t</ref><sp/>*dict,</highlight></codeline>
<codeline lineno="1442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="structdict2pid__t" kindref="compound">dict2pid_t</ref><sp/>*d2p)</highlight></codeline>
<codeline lineno="1443"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1444"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict_8h_1a51ee6c067decce8dbc182f95f7b33e91" kindref="member">dict_free</ref>(search-&gt;<ref refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" kindref="member">dict</ref>);</highlight></codeline>
<codeline lineno="1445"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="dict2pid_8c_1a293253226550e812c448ae096b364d0d" kindref="member">dict2pid_free</ref>(search-&gt;<ref refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" kindref="member">d2p</ref>);</highlight></codeline>
<codeline lineno="1446"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME:<sp/>_retain()<sp/>should<sp/>just<sp/>return<sp/>NULL<sp/>if<sp/>passed<sp/>NULL.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1447"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dict)<sp/>{</highlight></codeline>
<codeline lineno="1448"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" kindref="member">dict</ref><sp/>=<sp/><ref refid="dict_8h_1a0edf70be186e8940af9d21243083cb8b" kindref="member">dict_retain</ref>(dict);</highlight></codeline>
<codeline lineno="1449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ae1a9fa33bfc851ec91ce96870714b3cc" kindref="member">start_wid</ref><sp/>=<sp/>dict_startwid(dict);</highlight></codeline>
<codeline lineno="1450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a0fb4d79f1084bdbbc0a808513f7c1ca7" kindref="member">finish_wid</ref><sp/>=<sp/>dict_finishwid(dict);</highlight></codeline>
<codeline lineno="1451"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ab6851b4675f38ab6b3683d75521f000b" kindref="member">silence_wid</ref><sp/>=<sp/>dict_silwid(dict);</highlight></codeline>
<codeline lineno="1452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ad4d98deb905bd664ec44313ea0065b1a" kindref="member">n_words</ref><sp/>=<sp/><ref refid="dict_8h_1a361b948b42f9cfdf5c7fa9dfc8a71a94" kindref="member">dict_size</ref>(dict);</highlight></codeline>
<codeline lineno="1453"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1454"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="1455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a918f243fa966e72c47f697fb9e60089d" kindref="member">dict</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ae1a9fa33bfc851ec91ce96870714b3cc" kindref="member">start_wid</ref><sp/>=<sp/>search-&gt;<ref refid="structps__search__s_1a0fb4d79f1084bdbbc0a808513f7c1ca7" kindref="member">finish_wid</ref><sp/>=<sp/>search-&gt;<ref refid="structps__search__s_1ab6851b4675f38ab6b3683d75521f000b" kindref="member">silence_wid</ref><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="1457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1ad4d98deb905bd664ec44313ea0065b1a" kindref="member">n_words</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="1458"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="1459"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(d2p)</highlight></codeline>
<codeline lineno="1460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" kindref="member">d2p</ref><sp/>=<sp/><ref refid="dict2pid_8c_1a85a8de8009445e1129766186ddaa949a" kindref="member">dict2pid_retain</ref>(d2p);</highlight></codeline>
<codeline lineno="1461"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>search-&gt;<ref refid="structps__search__s_1a81b461e7ef3a080d046039e186134a15" kindref="member">d2p</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="1463"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1464"><highlight class="normal"></highlight></codeline>
<codeline lineno="1465"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1466" refid="pocketsphinx_8h_1a4aef468e7959d9a7605f344d6759721c" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a4aef468e7959d9a7605f344d6759721c" kindref="member">ps_set_rawdata_size</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>int32<sp/>size)<sp/></highlight></codeline>
<codeline lineno="1467"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1468"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a8c8dce7790c4486d1ee1b20d810805bf" kindref="member">acmod_set_rawdata_size</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>size);</highlight></codeline>
<codeline lineno="1469"><highlight class="normal">}</highlight></codeline>
<codeline lineno="1470"><highlight class="normal"></highlight></codeline>
<codeline lineno="1471"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="1472" refid="pocketsphinx_8h_1a0ea0a24f578b1eeff2fccdb0b61e5527" refkind="member"><highlight class="normal"><ref refid="pocketsphinx_8h_1a0ea0a24f578b1eeff2fccdb0b61e5527" kindref="member">ps_get_rawdata</ref>(<ref refid="structps__decoder__s" kindref="compound">ps_decoder_t</ref><sp/>*ps,<sp/>int16<sp/>**buffer,<sp/>int32<sp/>*size)</highlight></codeline>
<codeline lineno="1473"><highlight class="normal">{</highlight></codeline>
<codeline lineno="1474"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="acmod_8c_1a0804fc79c26de167a95ece1189effbec" kindref="member">acmod_get_rawdata</ref>(ps-&gt;<ref refid="structps__decoder__s_1af834d2bc1d44c1d9ef607b025413a0b8" kindref="member">acmod</ref>,<sp/>buffer,<sp/>size);</highlight></codeline>
<codeline lineno="1475"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="src/libpocketsphinx/pocketsphinx.c"/>
  </compounddef>
</doxygen>
